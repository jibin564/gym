var hP=Object.defineProperty,fP=Object.defineProperties;var pP=Object.getOwnPropertyDescriptors;var _E=Object.getOwnPropertySymbols,gP=Object.getPrototypeOf,mP=Object.prototype.hasOwnProperty,yP=Object.prototype.propertyIsEnumerable,vP=Reflect.get;var IE=(n,e,t)=>e in n?hP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})mP.call(e,t)&&IE(n,t,e[t]);if(_E)for(var t of _E(e))yP.call(e,t)&&IE(n,t,e[t]);return n},oe=(n,e)=>fP(n,pP(e));var Ir=(n,e,t)=>vP(gP(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function Y(n){return typeof n=="function"}function lo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wu=lo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Re=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof wu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wE(o)}catch(s){e=e??[],s instanceof wu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ai(t,e)}remove(e){let{_finalizers:t}=this;t&&ai(t,e),e instanceof n&&e._removeParent(this)}};Re.EMPTY=(()=>{let n=new Re;return n.closed=!0,n})();var cp=Re.EMPTY;function Eu(n){return n instanceof Re||n&&"closed"in n&&Y(n.remove)&&Y(n.add)&&Y(n.unsubscribe)}function wE(n){Y(n)?n():n.unsubscribe()}var Jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ho={setTimeout(n,e,...t){let{delegate:r}=ho;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ho;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Du(n){ho.setTimeout(()=>{let{onUnhandledError:e}=Jt;if(e)e(n);else throw n})}function fa(){}var EE=up("C",void 0,void 0);function DE(n){return up("E",void 0,n)}function bE(n){return up("N",n,void 0)}function up(n,e,t){return{kind:n,value:e,error:t}}var ci=null;function fo(n){if(Jt.useDeprecatedSynchronousErrorHandling){let e=!ci;if(e&&(ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ci;if(ci=null,t)throw r}}else n()}function TE(n){Jt.useDeprecatedSynchronousErrorHandling&&ci&&(ci.errorThrown=!0,ci.error=n)}var ui=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Eu(e)&&e.add(this)):this.destination=wP}static create(e,t,r){return new po(e,t,r)}next(e){this.isStopped?dp(bE(e),this):this._next(e)}error(e){this.isStopped?dp(DE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dp(EE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_P=Function.prototype.bind;function lp(n,e){return _P.call(n,e)}var hp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bu(r)}else bu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bu(t)}}},po=class extends ui{constructor(e,t,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lp(e.next,o),error:e.error&&lp(e.error,o),complete:e.complete&&lp(e.complete,o)}):i=e}this.destination=new hp(i)}};function bu(n){Jt.useDeprecatedSynchronousErrorHandling?TE(n):Du(n)}function IP(n){throw n}function dp(n,e){let{onStoppedNotification:t}=Jt;t&&ho.setTimeout(()=>t(n,e))}var wP={closed:!0,next:fa,error:IP,complete:fa};var go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gt(n){return n}function Tu(...n){return fp(n)}function fp(n){return n.length===0?gt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=DP(t)?t:new po(t,r,i);return fo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=CE(r),new r((i,o)=>{let s=new po({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[go](){return this}pipe(...t){return fp(t)(this)}toPromise(t){return t=CE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function CE(n){var e;return(e=n??Jt.Promise)!==null&&e!==void 0?e:Promise}function EP(n){return n&&Y(n.next)&&Y(n.error)&&Y(n.complete)}function DP(n){return n&&n instanceof ui||EP(n)&&Eu(n)}var Et=new ne(n=>n.complete());function pp(n){return Y(n?.lift)}function se(n){return e=>{if(pp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(n,e,t,r,i){return new gp(n,e,t,r,i)}var gp=class extends ui{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function mt(n){return n<=0?()=>Et:se((e,t)=>{let r=0;e.subscribe(re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function mo(){return se((n,e)=>{let t=null;n._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var yo=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,pp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let t=this.getSubject();e.add(this.source.subscribe(re(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return mo()(this)}};var SE=lo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Cu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new SE}next(t){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cp:(this.currentObservers=null,o.push(t),new Re(()=>{this.currentObservers=null,ai(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new Cu(e,t),n})(),Cu=class extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cp}};var Xe=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mp={now(){return(mp.delegate||Date).now()},delegate:void 0};var Su=class extends Re{constructor(e,t){super()}schedule(e,t=0){return this}};var pa={setInterval(n,e,...t){let{delegate:r}=pa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var vo=class extends Su{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _o=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_o.now=mp.now;var Io=class extends _o{constructor(e,t=_o.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ga=new Io(vo);var Au=class extends vo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ru=class extends Io{};var yp=new Ru(Au);function AE(n){return n&&Y(n.schedule)}function RE(n){return n[n.length-1]}function Nu(n){return Y(RE(n))?n.pop():void 0}function wr(n){return AE(RE(n))?n.pop():void 0}function Mu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ME(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function NE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function li(n){return this instanceof li?(this.v=n,this):new li(n)}function PE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,V){o.push([y,N,R,V])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof li?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function xE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof NE=="function"?NE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Pu=n=>n&&typeof n.length=="number"&&typeof n!="function";function xu(n){return Y(n?.then)}function ku(n){return Y(n[go])}function Ou(n){return Symbol.asyncIterator&&Y(n?.[Symbol.asyncIterator])}function Fu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=bP();function Lu(n){return Y(n?.[Vu])}function ju(n){return PE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield li(t.read());if(i)return yield li(void 0);yield yield li(r)}}finally{t.releaseLock()}})}function Uu(n){return Y(n?.getReader)}function Fe(n){if(n instanceof ne)return n;if(n!=null){if(ku(n))return TP(n);if(Pu(n))return CP(n);if(xu(n))return SP(n);if(Ou(n))return kE(n);if(Lu(n))return AP(n);if(Uu(n))return RP(n)}throw Fu(n)}function TP(n){return new ne(e=>{let t=n[go]();if(Y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CP(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function SP(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Du)})}function AP(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kE(n){return new ne(e=>{NP(n,e).catch(t=>e.error(t))})}function RP(n){return kE(ju(n))}function NP(n,e){var t,r,i,o;return ME(this,void 0,void 0,function*(){try{for(t=xE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Er(n,e=0){return se((t,r)=>{t.subscribe(re(r,i=>Dt(r,n,()=>r.next(i),e),()=>Dt(r,n,()=>r.complete(),e),i=>Dt(r,n,()=>r.error(i),e)))})}function Dr(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function OE(n,e){return Fe(n).pipe(Dr(e),Er(e))}function FE(n,e){return Fe(n).pipe(Dr(e),Er(e))}function VE(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function LE(n,e){return new ne(t=>{let r;return Dt(t,e,()=>{r=n[Vu](),Dt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function Bu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{Dt(t,e,()=>{let r=n[Symbol.asyncIterator]();Dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function jE(n,e){return Bu(ju(n),e)}function UE(n,e){if(n!=null){if(ku(n))return OE(n,e);if(Pu(n))return VE(n,e);if(xu(n))return FE(n,e);if(Ou(n))return Bu(n,e);if(Lu(n))return LE(n,e);if(Uu(n))return jE(n,e)}throw Fu(n)}function be(n,e){return e?UE(n,e):Fe(n)}function z(...n){let e=wr(n);return be(n,e)}function wo(n,e){let t=Y(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function vp(n){return!!n&&(n instanceof ne||Y(n.lift)&&Y(n.subscribe))}var qn=lo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return se((t,r)=>{let i=0;t.subscribe(re(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:MP}=Array;function PP(n,e){return MP(e)?n(...e):n(e)}function $u(n){return Z(e=>PP(n,e))}var{isArray:xP}=Array,{getPrototypeOf:kP,prototype:OP,keys:FP}=Object;function Hu(n){if(n.length===1){let e=n[0];if(xP(e))return{args:e,keys:null};if(VP(e)){let t=FP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function VP(n){return n&&typeof n=="object"&&kP(n)===OP}function qu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ma(...n){let e=wr(n),t=Nu(n),{args:r,keys:i}=Hu(n);if(r.length===0)return be([],e);let o=new ne(LP(r,e,i?s=>qu(i,s):gt));return t?o.pipe($u(t)):o}function LP(n,e,t=gt){return r=>{BE(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)BE(e,()=>{let l=be(n[u],e),h=!1;l.subscribe(re(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function BE(n,e,t){n?Dt(t,n,e):e()}function $E(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let R=!1;Fe(t(N,h++)).subscribe(re(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let V=u.shift();s?Dt(e,s,()=>C(V)):C(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(re(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Pe(n,e,t=1/0){return Y(e)?Pe((r,i)=>Z((o,s)=>e(r,o,i,s))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>$E(r,i,n,t)))}function Eo(n=1/0){return Pe(gt,n)}function HE(){return Eo(1)}function Do(...n){return HE()(be(n,wr(n)))}function zu(n){return new ne(e=>{Fe(n()).subscribe(e)})}function _p(...n){let e=Nu(n),{args:t,keys:r}=Hu(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Fe(t[h]).subscribe(re(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?qu(r,a):a),o.complete())}))}});return e?i.pipe($u(e)):i}function st(n,e){return se((t,r)=>{let i=0;t.subscribe(re(r,o=>n.call(e,o,i++)&&r.next(o)))})}function zn(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(re(t,void 0,void 0,s=>{o=Fe(n(s,zn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function qE(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(re(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function br(n,e){return Y(e)?Pe(n,e,1):Pe(n,1)}function jP(n,e=ga){return se((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(re(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Tr(n){return se((e,t)=>{let r=!1;e.subscribe(re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gu(n,e=gt){return n=n??UP,se((t,r)=>{let i,o=!0;t.subscribe(re(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function UP(n,e){return n===e}function Wu(n=BP){return se((e,t)=>{let r=!1;e.subscribe(re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function BP(){return new qn}function ya(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):gt,mt(1),t?Tr(e):Wu(()=>new qn))}function bo(n){return n<=0?()=>Et:se((e,t)=>{let r=[];e.subscribe(re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ip(n,e){let t=arguments.length>=2;return r=>r.pipe(n?st((i,o)=>n(i,o,r)):gt,bo(1),t?Tr(e):Wu(()=>new qn))}function Ku(n,e){return se(qE(n,e,arguments.length>=2,!0))}function $P(n){return st((e,t)=>n<=t)}function Qu(...n){let e=wr(n);return se((t,r)=>{(e?Do(n,t,e):Do(n,t)).subscribe(r)})}function jt(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(re(r,u=>{i?.unsubscribe();let l=0,h=o++;Fe(n(u,h)).subscribe(i=re(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function wp(n){return se((e,t)=>{Fe(n).subscribe(re(t,()=>t.complete(),fa)),!t.closed&&e.subscribe(t)})}function et(n,e,t){let r=Y(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(re(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gt}function Tp(n,e){return Object.is(n,e)}var He=null,Yu=!1,Cp=1,Ut=Symbol("SIGNAL");function ue(n){let e=He;return He=n,e}function Sp(){return He}var _a={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ia(n){if(Yu)throw new Error("");if(He===null)return;He.consumerOnSignalRead(n);let e=He.nextProducerIndex++;if(el(He),e<He.producerNode.length&&He.producerNode[e]!==n&&va(He)){let t=He.producerNode[e];Xu(t,He.producerIndexOfThis[e])}He.producerNode[e]!==n&&(He.producerNode[e]=n,He.producerIndexOfThis[e]=va(He)?GE(n,He,e):0),He.producerLastReadVersion[e]=n.version}function zE(){Cp++}function Ap(n){if(!(va(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cp)){if(!n.producerMustRecompute(n)&&!Pp(n)){bp(n);return}n.producerRecomputeValue(n),bp(n)}}function Rp(n){if(n.liveConsumerNode===void 0)return;let e=Yu;Yu=!0;try{for(let t of n.liveConsumerNode)t.dirty||HP(t)}finally{Yu=e}}function Np(){return He?.consumerAllowSignalWrites!==!1}function HP(n){n.dirty=!0,Rp(n),n.consumerMarkedDirty?.(n)}function bp(n){n.dirty=!1,n.lastCleanEpoch=Cp}function Ju(n){return n&&(n.nextProducerIndex=0),ue(n)}function Mp(n,e){if(ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(va(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Pp(n){el(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ap(t),r!==t.version))return!0}return!1}function xp(n){if(el(n),va(n))for(let e=0;e<n.producerNode.length;e++)Xu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function GE(n,e,t){if(WE(n),n.liveConsumerNode.length===0&&KE(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=GE(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Xu(n,e){if(WE(n),n.liveConsumerNode.length===1&&KE(n))for(let r=0;r<n.producerNode.length;r++)Xu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];el(i),i.producerIndexOfThis[r]=e}}function va(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function el(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function WE(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function KE(n){return n.producerNode!==void 0}function kp(n,e){let t=Object.create(qP);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ap(t),Ia(t),t.value===Zu)throw t.error;return t.value};return r[Ut]=t,r}var Ep=Symbol("UNSET"),Dp=Symbol("COMPUTING"),Zu=Symbol("ERRORED"),qP=oe(k({},_a),{value:Ep,dirty:!0,error:null,equal:Tp,kind:"computed",producerMustRecompute(n){return n.value===Ep||n.value===Dp},producerRecomputeValue(n){if(n.value===Dp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Dp;let t=Ju(n),r,i=!1;try{r=n.computation(),ue(null),i=e!==Ep&&e!==Zu&&r!==Zu&&n.equal(e,r)}catch(o){r=Zu,n.error=o}finally{Mp(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function zP(){throw new Error}var QE=zP;function YE(n){QE(n)}function Op(n){QE=n}var GP=null;function Fp(n,e){let t=Object.create(tl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Ia(t),t.value);return r[Ut]=t,r}function wa(n,e){Np()||YE(n),n.equal(n.value,e)||(n.value=e,WP(n))}function Vp(n,e){Np()||YE(n),wa(n,e(n.value))}var tl=oe(k({},_a),{equal:Tp,value:void 0,kind:"signal"});function WP(n){n.version++,zE(),Rp(n),GP?.()}function Lp(n){let e=ue(null);try{return n()}finally{ue(e)}}var jp;function Ea(){return jp}function Wn(n){let e=jp;return jp=n,e}var nl=Symbol("NotFound");var LD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(jD(e,t)),this.code=e}};function ZP(n){return`NG0${Math.abs(n)}`}function jD(n,e){return`${ZP(n)}${e?": "+e:""}`}var UD=Symbol("InputSignalNode#UNSET"),JP=oe(k({},tl),{transformFn:void 0,applyValueToInputSignal(n,e){wa(n,e)}});function BD(n,e){let t=Object.create(JP);t.value=n,t.transformFn=e?.transform;function r(){if(Ia(t),t.value===UD){let i=null;throw new U(-950,i)}return t.value}return r[Ut]=t,r}function Pa(n){return{toString:n}.toString()}var rl="__parameters__";function XP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function $D(n,e,t){return Pa(()=>{let r=XP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(rl)?u[rl]:Object.defineProperty(u,rl,{value:[]})[rl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xp=globalThis;function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function ex(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Tt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Tt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ZE(n,e){return n?e?`${n} ${e}`:n:e||""}var tx=De({__forward_ref__:De});function bi(n){return n.__forward_ref__=bi,n.toString=function(){return Tt(this())},n}function yt(n){return HD(n)?n():n}function HD(n){return typeof n=="function"&&n.hasOwnProperty(tx)&&n.__forward_ref__===bi}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vl(n){return JE(n,zD)||JE(n,GD)}function qD(n){return Vl(n)!==null}function JE(n,e){return n.hasOwnProperty(e)?n[e]:null}function nx(n){let e=n&&(n[zD]||n[GD]);return e||null}function XE(n){return n&&(n.hasOwnProperty(eD)||n.hasOwnProperty(rx))?n[eD]:null}var zD=De({\u0275prov:De}),eD=De({\u0275inj:De}),GD=De({ngInjectableDef:De}),rx=De({ngInjectorDef:De}),L=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function WD(n){return n&&!!n.\u0275providers}var ix=De({\u0275cmp:De}),ox=De({\u0275dir:De}),sx=De({\u0275pipe:De}),ax=De({\u0275mod:De}),dl=De({\u0275fac:De}),Ca=De({__NG_ELEMENT_ID__:De}),tD=De({__NG_ENV_ID__:De});function Ll(n){return typeof n=="string"?n:n==null?"":String(n)}function cx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ll(n)}function KD(n,e){throw new U(-200,n)}function $g(n,e){throw new U(-201,!1)}var te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(te||{}),eg;function QD(){return eg}function bt(n){let e=eg;return eg=n,e}function YD(n,e,t){let r=Vl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&te.Optional)return null;if(e!==void 0)return e;$g(n,"Injector")}var ux={},di=ux,tg="__NG_DI_FLAG__",hl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?nl:di,r)}},fl="ngTempTokenPath",lx="ngTokenPath",dx=/\n/gm,hx="\u0275",nD="__source";function fx(n,e=te.Default){if(Ea()===void 0)throw new U(-203,!1);if(Ea()===null)return YD(n,void 0,e);{let t=Ea(),r;return t instanceof hl?r=t.injector:r=t,r.get(n,e&te.Optional?null:void 0,e)}}function W(n,e=te.Default){return(QD()||fx)(yt(n),e)}function M(n,e=te.Default){return W(n,jl(e))}function jl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ng(n){let e=[];for(let t=0;t<n.length;t++){let r=yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let a=r[s],u=px(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function ZD(n,e){return n[tg]=e,n.prototype[tg]=e,n}function px(n){return n[tg]}function gx(n,e,t,r){let i=n[fl];throw e[nD]&&i.unshift(e[nD]),n.message=mx(`
`+n.message,i,t,r),n[lx]=i,n[fl]=null,n}function mx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hx?n.slice(2):n;let i=Tt(e);if(Array.isArray(e))i=e.map(Tt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Tt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dx,`
  `)}`}var Mt=ZD($D("Optional"),8);var yx=ZD($D("SkipSelf"),4);function fi(n,e){let t=n.hasOwnProperty(dl);return t?n[dl]:null}function Hg(n,e){n.forEach(t=>Array.isArray(t)?Hg(t,e):e(t))}function JD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function pl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function _x(n,e,t){let r=xa(n,e);return r>=0?n[r|1]=t:(r=~r,vx(n,r,e,t)),r}function Up(n,e){let t=xa(n,e);if(t>=0)return n[t|1]}function xa(n,e){return Ix(n,e,1)}function Ix(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var pi={},Bt=[],Sa=new L(""),XD=new L("",-1),eb=new L(""),gl=class{get(e,t=di){if(t===di){let r=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw r.name="NullInjectorError",r}return t}};function tb(n,e){let t=n[ax]||null;if(!t&&e===!0)throw new Error(`Type ${Tt(n)} does not have '\u0275mod' property.`);return t}function gi(n){return n[ix]||null}function wx(n){return n[ox]||null}function Ex(n){return n[sx]||null}function En(n){return{\u0275providers:n}}function Dx(...n){return{\u0275providers:nb(!0,n),\u0275fromNgModule:!0}}function nb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Hg(e,s=>{let a=s;rg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rb(i,o),t}function rb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qg(i,o=>{e(o,r)})}}function rg(n,e,t,r){if(n=yt(n),!n)return!1;let i=null,o=XE(n),s=!o&&gi(n);if(!o&&!s){let u=n.ngModule;if(o=XE(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hg(o.imports,h=>{rg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&rb(l,e)}if(!a){let l=fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Bt},i),e({provide:eb,useValue:i,multi:!0},i),e({provide:Sa,useValue:()=>W(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;qg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qg(n,e){for(let t of n)WD(t)&&(t=t.\u0275providers),Array.isArray(t)?qg(t,e):e(t)}var bx=De({provide:String,useValue:De});function ib(n){return n!==null&&typeof n=="object"&&bx in n}function Tx(n){return!!(n&&n.useExisting)}function Cx(n){return!!(n&&n.useFactory)}function Mo(n){return typeof n=="function"}function Sx(n){return!!n.useClass}var Ul=new L(""),sl={},rD={},Bp;function zg(){return Bp===void 0&&(Bp=new gl),Bp}var at=class{},Aa=class extends at{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,og(e,s=>this.processProvider(s)),this.records.set(XD,To(void 0,this)),i.has("environment")&&this.records.set(at,To(void 0,this));let o=this.records.get(Ul);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eb,Bt,te.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?nl:di,r)}destroy(){ba(this),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return ba(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ba(this);let t=Wn(this),r=bt(void 0),i;try{return e()}finally{Wn(t),bt(r)}}get(e,t=di,r=te.Default){if(ba(this),e.hasOwnProperty(tD))return e[tD](this);r=jl(r);let i,o=Wn(this),s=bt(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Px(e)&&Vl(e);l&&this.injectableDefInScope(l)?u=To(ig(e),sl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&te.Self?zg():this.parent;return t=r&te.Optional&&t===di?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[fl]=a[fl]||[]).unshift(Tt(e)),o)throw a;return gx(a,e,"R3InjectorError",this.source)}else throw a}finally{bt(s),Wn(o)}}resolveInjectorInitializers(){let e=ue(null),t=Wn(this),r=bt(void 0),i;try{let o=this.get(Sa,Bt,te.Self);for(let s of o)s()}finally{Wn(t),bt(r),ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Tt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let t=Mo(e)?e:yt(e&&e.provide),r=Rx(e);if(!Mo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=To(void 0,sl,!0),i.factory=()=>ng(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ue(null);try{return t.value===rD?KD(Tt(e)):t.value===sl&&(t.value=rD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Mx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ig(n){let e=Vl(n),t=e!==null?e.factory:fi(n);if(t!==null)return t;if(n instanceof L)throw new U(204,!1);if(n instanceof Function)return Ax(n);throw new U(204,!1)}function Ax(n){if(n.length>0)throw new U(204,!1);let t=nx(n);return t!==null?()=>t.factory(n):()=>new n}function Rx(n){if(ib(n))return To(void 0,n.useValue);{let e=ob(n);return To(e,sl)}}function ob(n,e,t){let r;if(Mo(n)){let i=yt(n);return fi(i)||ig(i)}else if(ib(n))r=()=>yt(n.useValue);else if(Cx(n))r=()=>n.useFactory(...ng(n.deps||[]));else if(Tx(n))r=(i,o)=>W(yt(n.useExisting),o!==void 0&&o&te.Optional?te.Optional:void 0);else{let i=yt(n&&(n.useClass||n.provide));if(Nx(n))r=()=>new i(...ng(n.deps));else return fi(i)||ig(i)}return r}function ba(n){if(n.destroyed)throw new U(205,!1)}function To(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Nx(n){return!!n.deps}function Mx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Px(n){return typeof n=="function"||typeof n=="object"&&n instanceof L}function og(n,e){for(let t of n)Array.isArray(t)?og(t,e):t&&WD(t)?og(t.\u0275providers,e):e(t)}function ct(n,e){let t;n instanceof Aa?(ba(n),t=n):t=new hl(n);let r,i=Wn(t),o=bt(void 0);try{return e()}finally{Wn(i),bt(o)}}function sb(){return QD()!==void 0||Ea()!=null}function Gg(n){if(!sb())throw new U(-203,!1)}function xx(n){return typeof n=="function"}var Yn=0,he=1,J=2,vt=3,en=4,tn=5,ml=6,yl=7,Ct=8,Po=9,Kn=10,Ve=11,Ra=12,iD=13,Bo=14,gn=15,xo=16,Co=17,ko=18,Bl=19,ab=20,Cr=21,$p=22,vl=23,$t=24,Ro=25,Nt=26,cb=1;var mi=7,_l=8,Il=9,Ht=10;function Sr(n){return Array.isArray(n)&&typeof n[cb]=="object"}function Zn(n){return Array.isArray(n)&&n[cb]===!0}function Wg(n){return(n.flags&4)!==0}function $o(n){return n.componentOffset>-1}function $l(n){return(n.flags&1)===1}function mn(n){return!!n.template}function wl(n){return(n[J]&512)!==0}function Ho(n){return(n[J]&256)===256}var sg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ub(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Ti=(()=>{let n=()=>lb;return n.ngInherit=!0,n})();function lb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ox),kx}function kx(){let n=hb(this),e=n?.current;if(e){let t=n.previous;if(t===pi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ox(n,e,t,r,i){let o=this.declaredInputs[r],s=hb(n)||Fx(n,{previous:pi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new sg(l&&l.currentValue,t,u===pi),ub(n,e,i,t)}var db="__ngSimpleChanges__";function hb(n){return n[db]||null}function Fx(n,e){return n[db]=e}var oD=null;var _e=function(n,e=null,t){oD?.(n,e,t)},Vx="svg",Lx="math";function yn(n){for(;Array.isArray(n);)n=n[Yn];return n}function fb(n,e){return yn(e[n])}function Dn(n,e){return yn(e[n.index])}function pb(n,e){return n.data[e]}function gb(n,e){return n[e]}function jx(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function vn(n,e){let t=e[n];return Sr(t)?t:t[Yn]}function Kg(n){return(n[J]&128)===128}function Ux(n){return Zn(n[vt])}function Oo(n,e){return e==null?null:n[e]}function mb(n){n[Co]=0}function yb(n){n[J]&1024||(n[J]|=1024,Kg(n)&&ka(n))}function Bx(n,e){for(;n>0;)e=e[Bo],n--;return e}function Hl(n){return!!(n[J]&9216||n[$t]?.dirty)}function ag(n){n[Kn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Hl(n)&&ka(n)}function ka(n){n[Kn].changeDetectionScheduler?.notify(0);let e=yi(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Kg(e)));)e=yi(e)}function vb(n,e){if(Ho(n))throw new U(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function $x(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function yi(n){let e=n[vt];return Zn(e)?e[vt]:e}function _b(n){return n[yl]??=[]}function Ib(n){return n.cleanup??=[]}var ae={lFrame:Sb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cg=!1;function Hx(){return ae.lFrame.elementDepthCount}function qx(){ae.lFrame.elementDepthCount++}function zx(){ae.lFrame.elementDepthCount--}function Qg(){return ae.bindingsEnabled}function Gx(){return ae.skipHydrationRootTNode!==null}function Wx(n){return ae.skipHydrationRootTNode===n}function Kx(){ae.skipHydrationRootTNode=null}function Ie(){return ae.lFrame.lView}function ut(){return ae.lFrame.tView}function F8(n){return ae.lFrame.contextLView=n,n[Ct]}function V8(n){return ae.lFrame.contextLView=null,n}function _t(){let n=wb();for(;n!==null&&n.type===64;)n=n.parent;return n}function wb(){return ae.lFrame.currentTNode}function Qx(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ci(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function Yg(){return ae.lFrame.isParent}function Eb(){ae.lFrame.isParent=!1}function Yx(){return ae.lFrame.contextLView}function Db(){return cg}function sD(n){let e=cg;return cg=n,e}function Zx(){let n=ae.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Jx(n){return ae.lFrame.bindingIndex=n}function ql(){return ae.lFrame.bindingIndex++}function Xx(n){let e=ae.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ek(){return ae.lFrame.inI18n}function tk(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,ug(e)}function nk(){return ae.lFrame.currentDirectiveIndex}function ug(n){ae.lFrame.currentDirectiveIndex=n}function rk(n){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bb(n){ae.lFrame.currentQueryIndex=n}function ik(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[tn]:null}function Tb(n,e,t){if(t&te.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&te.Host);)if(i=ik(o),i===null||(o=o[Bo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=Cb();return r.currentTNode=e,r.lView=n,!0}function Zg(n){let e=Cb(),t=n[he];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Cb(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?Sb(n):e}function Sb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Ab(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Rb=Ab;function Jg(){let n=Ab();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ok(n){return(ae.lFrame.contextLView=Bx(n,ae.lFrame.contextLView))[Ct]}function qo(){return ae.lFrame.selectedIndex}function vi(n){ae.lFrame.selectedIndex=n}function Xg(){let n=ae.lFrame;return pb(n.tView,n.selectedIndex)}function sk(){return ae.lFrame.currentNamespace}var Nb=!0;function zl(){return Nb}function Gl(n){Nb=n}function ak(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function em(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function al(n,e,t){Mb(n,e,3,t)}function cl(n,e,t,r){(n[J]&3)===t&&Mb(n,e,t,r)}function Hp(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function Mb(n,e,t,r){let i=r!==void 0?n[Co]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Co]+=65536),(a<o||o==-1)&&(ck(n,t,e,u),n[Co]=(n[Co]&4294901760)+u+2),u++}function aD(n,e){_e(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),_e(5,n,e)}}function ck(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[Co]>>16&&(n[J]&3)===e&&(n[J]+=16384,aD(a,o)):aD(a,o)}var No=-1,_i=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function uk(n){return(n.flags&8)!==0}function lk(n){return(n.flags&16)!==0}function dk(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];hk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Pb(n){return n===3||n===4||n===6}function hk(n){return n.charCodeAt(0)===64}function Fo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cD(n,t,i,null,e[++r]):cD(n,t,i,null,null))}}return n}function cD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function xb(n){return n!==No}function El(n){return n&32767}function fk(n){return n>>16}function Dl(n,e){let t=fk(n),r=e;for(;t>0;)r=r[Bo],t--;return r}var lg=!0;function bl(n){let e=lg;return lg=n,e}var pk=256,kb=pk-1,Ob=5,gk=0,pn={};function mk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ca)&&(r=t[Ca]),r==null&&(r=t[Ca]=gk++);let i=r&kb,o=1<<i;e.data[n+(i>>Ob)]|=o}function Tl(n,e){let t=Fb(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,qp(r.data,n),qp(e,null),qp(r.blueprint,null));let i=tm(n,e),o=n.injectorIndex;if(xb(i)){let s=El(i),a=Dl(i,e),u=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function qp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Bb(i),r===null)return No;if(t++,i=i[Bo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return No}function dg(n,e,t){mk(n,e,t)}function yk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Pb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Vb(n,e,t){if(t&te.Optional||n!==void 0)return n;$g(e,"NodeInjector")}function Lb(n,e,t,r){if(t&te.Optional&&r===void 0&&(r=null),(t&(te.Self|te.Host))===0){let i=n[Po],o=bt(void 0);try{return i?i.get(e,r,t&te.Optional):YD(e,r,t&te.Optional)}finally{bt(o)}}return Vb(r,e,t)}function jb(n,e,t,r=te.Default,i){if(n!==null){if(e[J]&2048&&!(r&te.Self)){let s=Ek(n,e,t,r,pn);if(s!==pn)return s}let o=Ub(n,e,t,r,pn);if(o!==pn)return o}return Lb(e,t,r,i)}function Ub(n,e,t,r,i){let o=Ik(t);if(typeof o=="function"){if(!Tb(e,n,r))return r&te.Host?Vb(i,t,r):Lb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))$g(t);else return s}finally{Rb()}}else if(typeof o=="number"){let s=null,a=Fb(n,e),u=No,l=r&te.Host?e[gn][tn]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?tm(n,e):e[a+8],u===No||!lD(r,!1)?a=-1:(s=e[he],a=El(u),e=Dl(u,e)));a!==-1;){let h=e[he];if(uD(o,a,h.data)){let p=vk(a,e,t,s,r,l);if(p!==pn)return p}u=e[a+8],u!==No&&lD(r,e[he].data[a+8]===l)&&uD(o,a,e)?(s=h,a=El(u),e=Dl(u,e)):a=-1}}return i}function vk(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],u=r==null?$o(a)&&lg:r!=s&&(a.type&3)!==0,l=i&te.Host&&o===a,h=_k(a,s,t,u,l);return h!==null?Cl(e,s,h,a,i):pn}function _k(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&t===C||y>=u&&C.type===t)return y}if(i){let y=s[u];if(y&&mn(y)&&y.type===t)return u}return null}function Cl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof _i){let a=o;a.resolving&&KD(cx(s[t]));let u=bl(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?bt(a.injectImpl):null,p=Tb(n,r,te.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&ak(t,s[t],e)}finally{h!==null&&bt(h),bl(u),a.resolving=!1,Rb()}}return o}function Ik(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ca)?n[Ca]:void 0;return typeof e=="number"?e>=0?e&kb:wk:e}function uD(n,e,t){let r=1<<n;return!!(t[e+(n>>Ob)]&r)}function lD(n,e){return!(n&te.Self)&&!(n&te.Host&&e)}var hi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return jb(this._tNode,this._lView,e,jl(r),t)}};function wk(){return new hi(_t(),Ie())}function Si(n){return Pa(()=>{let e=n.prototype.constructor,t=e[dl]||hg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[dl]||hg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function hg(n){return HD(n)?()=>{let e=hg(yt(n));return e&&e()}:fi(n)}function Ek(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!wl(s);){let a=Ub(o,s,t,r|te.Self,pn);if(a!==pn)return a;let u=o.parent;if(!u){let l=s[ab];if(l){let h=l.get(t,pn,r);if(h!==pn)return h}u=Bb(s),s=s[Bo]}o=u}return i}function Bb(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[tn]:null}function nm(n){return yk(_t(),n)}function dD(n,e=null,t=null,r){let i=$b(n,e,t,r);return i.resolveInjectorInitializers(),i}function $b(n,e=null,t=null,r,i=new Set){let o=[t||Bt,Dx(n)];return r=r||(typeof n=="object"?void 0:Tt(n)),new Aa(o,e||zg(),r||null,i)}var Le=class n{static THROW_IF_NOT_FOUND=di;static NULL=new gl;static create(e,t){if(Array.isArray(e))return dD({name:""},t,e,"");{let r=e.name??"";return dD({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>W(XD)});static __NG_ELEMENT_ID__=-1};var Dk=new L("");Dk.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&te.Optional)return null;throw new U(204,!1)};var Hb=!1,zo=(()=>{class n{static __NG_ELEMENT_ID__=bk;static __NG_ENV_ID__=t=>t}return n})(),fg=class extends zo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Ho(t)?(e(),()=>{}):(vb(t,e),()=>$x(t,e))}};function bk(){return new fg(Ie())}var Ii=class{},rm=new L("",{providedIn:"root",factory:()=>!1});var qb=new L(""),zb=new L(""),Ai=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Xe(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wl=(()=>{class n{internalPendingTasks=M(Ai);scheduler=M(Ii);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return v(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),pg=class extends Oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sb()&&(this.destroyRef=M(zo,{optional:!0})??void 0,this.pendingTasks=M(Ai,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ge=pg;function Sl(...n){}function Gb(n){let e,t;function r(){n=Sl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hD(n){return queueMicrotask(()=>n()),()=>{n=Sl}}var im="isAngularZone",Al=im+"_ID",Tk=0,ge=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ge(!1);onMicrotaskEmpty=new Ge(!1);onStable=new Ge(!1);onError=new Ge(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Hb}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Ak(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(im)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ck,Sl,Sl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ck={};function om(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Gb(()=>{n.callbackScheduled=!1,gg(n),n.isCheckStableRunning=!0,om(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gg(n)}function Ak(n){let e=()=>{Sk(n)},t=Tk++;n._inner=n._inner.fork({name:"angular",properties:{[im]:!0,[Al]:t,[Al+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Rk(u))return r.invokeTask(o,s,a,u);try{return fD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return fD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Nk(u)&&e(),pD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,gg(n),om(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function gg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pD(n){n._nesting--,om(n)}var mg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ge;onMicrotaskEmpty=new Ge;onStable=new Ge;onError=new Ge;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Rk(n){return Wb(n,"__ignore_ng_zone__")}function Nk(n){return Wb(n,"__scheduler_tick__")}function Wb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var _n=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mk=new L("",{providedIn:"root",factory:()=>{let n=M(ge),e=M(_n);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function gD(n,e){return BD(n,e)}function Pk(n){return BD(UD,n)}var Kb=(gD.required=Pk,gD);function xk(){return Kl(_t(),Ie())}function Kl(n,e){return new bn(Dn(n,e))}var bn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=xk}return n})();function kk(n){return typeof n=="function"&&n[Ut]!==void 0}function Oa(n,e){let t=Fp(n,e?.equal),r=t[Ut];return t.set=i=>wa(r,i),t.update=i=>Vp(r,i),t.asReadonly=Ok.bind(t),t}function Ok(){let n=this[Ut];if(n.readonlyFn===void 0){let e=()=>this();e[Ut]=n,n.readonlyFn=e}return n.readonlyFn}function Qb(n){return kk(n)&&typeof n.set=="function"}function Yb(n){return(n.flags&128)===128}var Zb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Zb||{}),Jb=new Map,Fk=0;function Vk(){return Fk++}function Lk(n){Jb.set(n[Bl],n)}function yg(n){Jb.delete(n[Bl])}var mD="__ngContext__";function Go(n,e){Sr(e)?(n[mD]=e[Bl],Lk(e)):n[mD]=e}function Xb(n){return tT(n[Ra])}function eT(n){return tT(n[en])}function tT(n){for(;n!==null&&!Zn(n);)n=n[en];return n}var vg;function nT(n){vg=n}function jk(){if(vg!==void 0)return vg;if(typeof document<"u")return document;throw new U(210,!1)}var sm=new L("",{providedIn:"root",factory:()=>Uk}),Uk="ng",am=new L(""),Ar=new L("",{providedIn:"platform",factory:()=>"unknown"});var cm=new L("",{providedIn:"root",factory:()=>jk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Bk="h",$k="b";var rT=!1,Hk=new L("",{providedIn:"root",factory:()=>rT});var um=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(um||{}),Wo=new L(""),yD=new Set;function Ko(n){yD.has(n)||(yD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var iT=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=qk}return n})();function qk(){return new iT(Ie(),_t())}var So=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(So||{}),oT=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),zk=[So.EarlyRead,So.Write,So.MixedReadWrite,So.Read],Gk=(()=>{class n{ngZone=M(ge);scheduler=M(Ii);errorHandler=M(_n,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Wo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&_e(16),this.executing=!0;for(let r of zk)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&_e(17)}register(t){let{view:r}=t;r!==void 0?((r[Ro]??=[]).push(t),ka(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(um.AFTER_NEXT_RENDER,t):t()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),_g=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ro];e&&(this.view[Ro]=e.filter(t=>t!==this))}};function lm(n,e){!e?.injector&&Gg(lm);let t=e?.injector??M(Le);return Ko("NgAfterNextRender"),Kk(n,t,e,!0)}function Wk(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Kk(n,e,t,r){let i=e.get(oT);i.impl??=e.get(Gk);let o=e.get(Wo,null,{optional:!0}),s=t?.phase??So.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(zo):null,u=e.get(iT,null,{optional:!0}),l=new _g(i.impl,Wk(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var Qk=(n,e,t,r)=>{};function Yk(n,e,t,r){Qk(n,e,t,r)}var Zk=()=>null;function sT(n,e,t=!1){return Zk(n,e,t)}function aT(n,e){let t=n.contentQueries;if(t!==null){let r=ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];bb(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function Ig(n,e,t){bb(0);let r=ue(null);try{e(n,t)}finally{ue(r)}}function dm(n,e,t){if(Wg(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}var In=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(In||{});var il;function Jk(){if(il===void 0&&(il=null,Xp.trustedTypes))try{il=Xp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return il}function vD(n){return Jk()?.createScriptURL(n)||n}var Rl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LD})`}};function Ql(n){return n instanceof Rl?n.changingThisBreaksApplicationSecurity:n}function cT(n,e){let t=Xk(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${LD})`)}return t===e}function Xk(n){return n instanceof Rl&&n.getTypeName()||null}var eO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function tO(n){return n=String(n),n.match(eO)?n:"unsafe:"+n}var hm=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hm||{});function nO(n){let e=lT();return e?e.sanitize(hm.URL,n)||"":cT(n,"URL")?Ql(n):tO(Ll(n))}function rO(n){let e=lT();if(e)return vD(e.sanitize(hm.RESOURCE_URL,n)||"");if(cT(n,"ResourceURL"))return vD(Ql(n));throw new U(904,!1)}function iO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?rO:nO}function uT(n,e,t){return iO(e,t)(n)}function lT(){let n=Ie();return n&&n[Kn].sanitizer}var oO=/^>|^->|<!--|-->|--!>|<!-$/g,sO=/(<|>)/g,aO="\u200B$1\u200B";function cO(n){return n.replace(oO,e=>e.replace(sO,aO))}function dT(n){return n instanceof Function?n():n}function uO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var hT="ng-template";function lO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&uO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(fm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function fm(n){return n.type===4&&n.value!==hT}function dO(n,e,t){let r=n.type===4&&!t?hT:n.value;return e===r}function hO(n,e,t){let r=4,i=n.attrs,o=i!==null?gO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Xt(r)&&!Xt(u))return!1;if(s&&Xt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dO(n,u,t)||u===""&&e.length===1){if(Xt(r))return!1;s=!0}}else if(r&8){if(i===null||!lO(n,i,u,t)){if(Xt(r))return!1;s=!0}}else{let l=e[++a],h=fO(u,i,fm(n),t);if(h===-1){if(Xt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Xt(r))return!1;s=!0}}}}return Xt(r)||s}function Xt(n){return(n&1)===0}function fO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mO(e,n)}function pO(n,e,t=!1){for(let r=0;r<e.length;r++)if(hO(n,e[r],t))return!0;return!1}function gO(n){for(let e=0;e<n.length;e++){let t=n[e];if(Pb(t))return e}return n.length}function mO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _D(n,e){return n?":not("+e.trim()+")":e}function yO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Xt(s)&&(e+=_D(o,i),i=""),r=s,o=o||!Xt(r);t++}return i!==""&&(e+=_D(o,i)),e}function vO(n){return n.map(yO).join(",")}function _O(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Xt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ri={};function IO(n,e){return n.createText(e)}function wO(n,e,t){n.setValue(e,t)}function EO(n,e){return n.createComment(cO(e))}function fT(n,e,t){return n.createElement(e,t)}function Nl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function pT(n,e,t){n.appendChild(e,t)}function ID(n,e,t,r,i){r!==null?Nl(n,e,t,r,i):pT(n,e,t)}function DO(n,e,t){n.removeChild(null,e,t)}function bO(n,e,t){n.setAttribute(e,"style",t)}function TO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&dk(n,e,r),i!==null&&TO(n,e,i),o!==null&&bO(n,e,o)}function pm(n,e,t,r,i,o,s,a,u,l,h){let p=Nt+r,m=p+i,y=CO(p,m),C=typeof l=="function"?l():l;return y[he]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function CO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ri);return t}function SO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=pm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gm(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),mb(p),p[vt]=p[Bo]=n,p[Ct]=t,p[Kn]=s||n&&n[Kn],p[Ve]=a||n&&n[Ve],p[Po]=u||n&&n[Po]||null,p[tn]=o,p[Bl]=Vk(),p[ml]=h,p[ab]=l,p[gn]=e.type==2?n[gn]:p,p}function AO(n,e,t){let r=Dn(e,n),i=SO(t),o=n[Kn].rendererFactory,s=mm(n,gm(n,i,null,mT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function mT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mm(n,e){return n[Ra]?n[iD][en]=e:n[Ra]=e,n[iD]=e,e}function Ni(n=1){vT(ut(),Ie(),qo()+n,!1)}function vT(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&al(e,o,t)}else{let o=n.preOrderHooks;o!==null&&cl(e,o,0,t)}vi(t)}var Yl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yl||{});function wg(n,e,t,r){let i=ue(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Yl.SignalBased)!==0&&(u=e[o][Ut]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):ub(e,u,o,r)}finally{ue(i)}}function _T(n,e,t,r,i){let o=qo(),s=r&2;try{vi(-1),s&&e.length>Nt&&vT(n,e,Nt,!1),_e(s?2:0,i),t(r,i)}finally{vi(o),_e(s?3:1,i)}}function Zl(n,e,t){kO(n,e,t),(t.flags&64)===64&&OO(n,e,t)}function ym(n,e,t=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function RO(n,e,t,r){let o=r.get(Hk,rT)||t===In.ShadowDom,s=n.selectRootElement(e,o);return NO(s),s}function NO(n){MO(n)}var MO=()=>null;function PO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function IT(n,e,t,r,i,o,s,a){if(!a&&_m(e,n,t,r,i)){$o(e)&&xO(t,e.index);return}if(e.type&3){let u=Dn(e,t);r=PO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function xO(n,e){let t=vn(e,n);t[J]&16||(t[J]|=64)}function kO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;$o(t)&&AO(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Tl(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Cl(e,n,s,t);if(Go(u,e),o!==null&&jO(e,s-r,u,a,t,o),mn(a)){let l=vn(t.index,e);l[Ct]=Cl(e,n,s,t)}}}function OO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=nk();try{vi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];ug(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&FO(u,l)}}finally{vi(-1),ug(s)}}function FO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function vm(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];pO(e,o.selectors,!1)&&(r??=[],mn(o)?r.unshift(o):r.push(o))}return r}function VO(n,e,t,r,i,o){let s=Dn(n,e);LO(e[Ve],s,o,n.value,t,r,i)}function LO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ll(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function jO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];wg(r,t,u,l)}}function UO(n,e){let t=n[Po],r=t?t.get(_n,null):null;r&&r.handleError(e)}function _m(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];wg(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];wg(h,l,r,i),a=!0}return a}function BO(n,e){let t=vn(e,n),r=t[he];$O(r,t);let i=t[Yn];i!==null&&t[ml]===null&&(t[ml]=sT(i,t[Po])),_e(18),Im(r,t,t[Ct]),_e(19,t[Ct])}function $O(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Im(n,e,t){Zg(e);try{let r=n.viewQuery;r!==null&&Ig(1,r,t);let i=n.template;i!==null&&_T(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ko]?.finishViewCreation(n),n.staticContentQueries&&aT(n,e),n.staticViewQueries&&Ig(2,n.viewQuery,t);let o=n.components;o!==null&&HO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,Jg()}}function HO(n,e){for(let t=0;t<e.length;t++)BO(n,e[t])}function qO(n,e,t,r){let i=ue(null);try{let o=e.tView,a=n[J]&4096?4096:16,u=gm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[xo]=l;let h=n[ko];return h!==null&&(u[ko]=h.createEmbeddedView(o)),Im(o,u,t),u}finally{ue(i)}}function wD(n,e){return!e||e.firstChild===null||Yb(n)}var zO;function wm(n,e){return zO(n,e)}var Qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qn||{});function wT(n){return(n.flags&32)===32}function Ao(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:Sr(r)&&(s=!0,r=r[Yn]);let a=yn(r);n===0&&t!==null?i==null?pT(e,t,a):Nl(e,t,a,i||null,!0):n===1&&t!==null?Nl(e,t,a,i||null,!0):n===2?DO(e,a,s):n===3&&e.destroyNode(a),o!=null&&r1(e,n,o,t,i)}}function GO(n,e){ET(n,e),e[Yn]=null,e[tn]=null}function WO(n,e,t,r,i,o){r[Yn]=i,r[tn]=e,Xl(n,r,t,1,i,o)}function ET(n,e){e[Kn].changeDetectionScheduler?.notify(9),Xl(n,e,e[Ve],2,null,null)}function KO(n){let e=n[Ra];if(!e)return zp(n[he],n);for(;e;){let t=null;if(Sr(e))t=e[Ra];else{let r=e[Ht];r&&(t=r)}if(!t){for(;e&&!e[en]&&e!==n;)Sr(e)&&zp(e[he],e),e=e[vt];e===null&&(e=n),Sr(e)&&zp(e[he],e),t=e&&e[en]}e=t}}function Em(n,e){let t=n[Il],r=t.indexOf(e);t.splice(r,1)}function DT(n,e){if(Ho(e))return;let t=e[Ve];t.destroyNode&&Xl(n,e,t,3,null,null),KO(e)}function zp(n,e){if(Ho(e))return;let t=ue(null);try{e[J]&=-129,e[J]|=256,e[$t]&&xp(e[$t]),YO(n,e),QO(n,e),e[he].type===1&&e[Ve].destroy();let r=e[xo];if(r!==null&&Zn(e[vt])){r!==e[vt]&&Em(r,e);let i=e[ko];i!==null&&i.detachView(n)}yg(e)}finally{ue(t)}}function QO(n,e){let t=n.cleanup,r=e[yl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[yl]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[vl];if(o!==null){e[vl]=null;for(let s of o)s.destroy()}}function YO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof _i)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];_e(4,a,u);try{u.call(a)}finally{_e(5,a,u)}}else{_e(4,i,o);try{o.call(i)}finally{_e(5,i,o)}}}}}function ZO(n,e,t){return JO(n,e.parent,t)}function JO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yn];if($o(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===In.None||i===In.Emulated)return null}return Dn(r,t)}function XO(n,e,t){return t1(n,e,t)}function e1(n,e,t){return n.type&40?Dn(n,t):null}var t1=e1,ED;function Jl(n,e,t,r){let i=ZO(n,r,e),o=e[Ve],s=r.parent||e[tn],a=XO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)ID(o,i,t[u],a,!1);else ID(o,i,t,a,!1);ED!==void 0&&ED(o,r,e,t,i)}function Ta(n,e){if(e!==null){let t=e.type;if(t&3)return Dn(e,n);if(t&4)return Eg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ta(n,r);{let i=n[e.index];return Zn(i)?Eg(-1,i):yn(i)}}else{if(t&128)return Ta(n,e.next);if(t&32)return wm(e,n)()||yn(n[e.index]);{let r=bT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yi(n[gn]);return Ta(i,r)}else return Ta(n,e.next)}}}return null}function bT(n,e){if(e!==null){let r=n[gn][tn],i=e.projection;return r.projection[i]}return null}function Eg(n,e){let t=Ht+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return Ta(r,i)}return e[mi]}function Dm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Go(yn(a),r),t.flags|=2),!wT(t))if(u&8)Dm(n,e,t.child,r,i,o,!1),Ao(e,n,i,a,o);else if(u&32){let l=wm(t,r),h;for(;h=l();)Ao(e,n,i,h,o);Ao(e,n,i,a,o)}else u&16?n1(n,e,r,t,i,o):Ao(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Xl(n,e,t,r,i,o){Dm(t,r,n.firstChild,e,i,o,!1)}function n1(n,e,t,r,i,o){let s=t[gn],u=s[tn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ao(e,n,i,h,o)}else{let l=u,h=s[vt];Yb(r)&&(l.flags|=128),Dm(n,e,l,h,i,o,!0)}}function r1(n,e,t,r,i){let o=t[mi],s=yn(t);o!==s&&Ao(e,n,r,o,i);for(let a=Ht;a<t.length;a++){let u=t[a];Xl(u[he],u,n,e,r,o)}}function i1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qn.Important),n.setStyle(t,r,i,o))}}function Ml(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(yn(o)),Zn(o)&&o1(o,r);let s=t.type;if(s&8)Ml(n,e,t.child,r);else if(s&32){let a=wm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=bT(e,t);if(Array.isArray(a))r.push(...a);else{let u=yi(e[gn]);Ml(u[he],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function o1(n,e){for(let t=Ht;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Ml(r[he],r,i,e)}n[mi]!==n[Yn]&&e.push(n[mi])}function TT(n){if(n[Ro]!==null){for(let e of n[Ro])e.impl.addSequence(e);n[Ro].length=0}}var CT=[];function s1(n){return n[$t]??a1(n)}function a1(n){let e=CT.pop()??Object.create(u1);return e.lView=n,e}function c1(n){n.lView[$t]!==n&&(n.lView=null,CT.push(n))}var u1=oe(k({},_a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ka(n.lView)},consumerOnSignalRead(){this.lView[$t]=this}});function l1(n){let e=n[$t]??Object.create(d1);return e.lView=n,e}var d1=oe(k({},_a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=yi(n.lView);for(;e&&!ST(e[he]);)e=yi(e);e&&yb(e)},consumerOnSignalRead(){this.lView[$t]=this}});function ST(n){return n.type!==2}function AT(n){if(n[vl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[vl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var h1=100;function RT(n,e=!0,t=0){let i=n[Kn].rendererFactory,o=!1;o||i.begin?.();try{f1(n,t)}catch(s){throw e&&UO(n,s),s}finally{o||i.end?.()}}function f1(n,e){let t=Db();try{sD(!0),Dg(n,e);let r=0;for(;Hl(n);){if(r===h1)throw new U(103,!1);r++,Dg(n,1)}}finally{sD(t)}}function p1(n,e,t,r){if(Ho(e))return;let i=e[J],o=!1,s=!1;Zg(e);let a=!0,u=null,l=null;o||(ST(n)?(l=s1(e),u=Ju(l)):Sp()===null?(a=!1,l=l1(e),u=Ju(l)):e[$t]&&(xp(e[$t]),e[$t]=null));try{mb(e),Jx(n.bindingStartIndex),t!==null&&_T(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&al(e,y,null)}else{let y=n.preOrderHooks;y!==null&&cl(e,y,0,null),Hp(e,0)}if(s||g1(e),AT(e),NT(e,0),n.contentQueries!==null&&aT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&al(e,y)}else{let y=n.contentHooks;y!==null&&cl(e,y,1),Hp(e,1)}y1(n,e);let p=n.components;p!==null&&PT(e,p,0);let m=n.viewQuery;if(m!==null&&Ig(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&al(e,y)}else{let y=n.viewHooks;y!==null&&cl(e,y,2),Hp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$p]){for(let y of e[$p])y();e[$p]=null}o||(TT(e),e[J]&=-73)}catch(h){throw o||ka(e),h}finally{l!==null&&(Mp(l,u),a&&c1(l)),Jg()}}function NT(n,e){for(let t=Xb(n);t!==null;t=eT(t))for(let r=Ht;r<t.length;r++){let i=t[r];MT(i,e)}}function g1(n){for(let e=Xb(n);e!==null;e=eT(e)){if(!(e[J]&2))continue;let t=e[Il];for(let r=0;r<t.length;r++){let i=t[r];yb(i)}}}function m1(n,e,t){_e(18);let r=vn(e,n);MT(r,t),_e(19,r[Ct])}function MT(n,e){Kg(n)&&Dg(n,e)}function Dg(n,e){let r=n[he],i=n[J],o=n[$t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Pp(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)p1(r,n,r.template,n[Ct]);else if(i&8192){AT(n),NT(n,1);let a=r.components;a!==null&&PT(n,a,1),TT(n)}}function PT(n,e,t){for(let r=0;r<e.length;r++)m1(n,e[r],t)}function y1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vi(~i);else{let o=i,s=t[++r],a=t[++r];tk(s,o);let u=e[o];_e(24,u),a(2,u),_e(25,u)}}}finally{vi(-1)}}function bm(n,e){let t=Db()?64:1088;for(n[Kn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=yi(n);if(wl(n)&&!r)return n;n=r}return null}function xT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function v1(n,e,t,r=!0){let i=e[he];if(_1(i,e,n,t),r){let s=Eg(t,n),a=e[Ve],u=a.parentNode(n[mi]);u!==null&&WO(i,n[tn],a,e,u,s)}let o=e[ml];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function bg(n,e){if(n.length<=Ht)return;let t=Ht+e,r=n[t];if(r){let i=r[xo];i!==null&&i!==n&&Em(i,r),e>0&&(n[t-1][en]=r[en]);let o=pl(n,Ht+e);GO(r[he],r);let s=o[ko];s!==null&&s.detachView(o[he]),r[vt]=null,r[en]=null,r[J]&=-129}return r}function _1(n,e,t,r){let i=Ht+r,o=t.length;r>0&&(t[i-1][en]=e),r<o-Ht?(e[en]=t[i],JD(t,Ht+r,e)):(t.push(e),e[en]=null),e[vt]=t;let s=e[xo];s!==null&&t!==s&&kT(s,e);let a=e[ko];a!==null&&a.insertView(n),ag(e),e[J]|=128}function kT(n,e){let t=n[Il],r=e[vt];if(Sr(r))n[J]|=2;else{let i=r[vt][gn];e[gn]!==i&&(n[J]|=2)}t===null?n[Il]=[e]:t.push(e)}var Na=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[he];return Ml(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Ct]}set context(e){this._lView[Ct]=e}get destroyed(){return Ho(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(Zn(e)){let t=e[_l],r=t?t.indexOf(this):-1;r>-1&&(bg(e,r),pl(t,r))}this._attachedToViewContainer=!1}DT(this._lView[he],this._lView)}onDestroy(e){vb(this._lView,e)}markForCheck(){bm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){ag(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,RT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wl(this._lView),t=this._lView[xo];t!==null&&!e&&Em(t,this._lView),ET(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=wl(this._lView),r=this._lView[xo];r!==null&&!t&&kT(r,this._lView),ag(this._lView)}};var ed=(()=>{class n{static __NG_ELEMENT_ID__=E1}return n})(),I1=ed,w1=class extends I1{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=qO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Na(i)}};function E1(){return OT(_t(),Ie())}function OT(n,e){return n.type&4?new w1(e,n,Kl(n,e)):null}function td(n,e,t,r,i){let o=n.data[e];if(o===null)o=D1(n,e,t,r,i),ek()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Qx();o.injectorIndex=s===null?-1:s.injectorIndex}return Ci(o,!0),o}function D1(n,e,t,r,i){let o=wb(),s=Yg(),a=s?o:o&&o.parent,u=n.data[e]=T1(n,a,t,e,r,i);return b1(n,u,o,s),u}function b1(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function T1(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Gx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var U8=new RegExp(`^(\\d+)*(${$k}|${Bk})*(.*)`);var C1=()=>null;function DD(n,e){return C1(n,e)}var S1=class{},FT=class{},Tg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Tt(e)}.`)}},nd=class{static NULL=new Tg},Vo=class{},Jn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>A1()}return n})();function A1(){let n=Ie(),e=_t(),t=vn(e.index,n);return(Sr(t)?t:n)[Ve]}var R1=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var Gp={},Cg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=jl(r);let i=this.injector.get(e,Gp,r);return i!==Gp||t===Gp?i:this.parentInjector.get(e,t,r)}};function Sg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ZE(i,a);else if(o==2){let u=a,l=e[++s];r=ZE(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function le(n,e=te.Default){let t=Ie();if(t===null)return W(n,e);let r=_t();return jb(r,t,yt(n),e)}function VT(){let n="invalid";throw new Error(n)}function Tm(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=M1(s);h===null?a=s:[a,u,l]=h,k1(n,e,t,a,o,u,l)}o!==null&&r!==null&&N1(t,r,o)}function N1(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function M1(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&mn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,P1(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function P1(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function x1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function k1(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&mn(y)&&(u=!0,x1(n,t,m)),dg(Tl(t,e),n,y.type)}U1(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=yT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Fo(t.mergedAttrs,y.hostAttrs),F1(n,t,e,p,y),j1(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}O1(n,t,o)}function O1(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))bD(0,e,i,r),bD(1,e,i,r),CD(e,r,!1);else{let o=t.get(i);TD(0,e,o,r),TD(1,e,o,r),CD(e,r,!0)}}}function bD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),LT(e,o)}}function TD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),LT(e,s)}}function LT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function CD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||fm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function F1(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=fi(i.type,!0)),s=new _i(o,mn(i),le);n.blueprint[r]=s,t[r]=s,V1(n,e,r,yT(n,t,i.hostVars,Ri),i)}function V1(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;L1(s)!=a&&s.push(a),s.push(t,r,o)}}function L1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function j1(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mn(e)&&(t[""]=n)}}function U1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function jT(n,e,t,r,i,o,s,a){let u=e.consts,l=Oo(u,s),h=td(e,n,2,r,l);return o&&Tm(e,t,h,Oo(u,a),i),h.mergedAttrs=Fo(h.mergedAttrs,h.attrs),h.attrs!==null&&Sg(h,h.attrs,!1),h.mergedAttrs!==null&&Sg(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function UT(n,e){em(n,e),Wg(e)&&n.queries.elementEnd(e)}var Pl=class extends nd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gi(e);return new Lo(t,this.ngModule)}};function B1(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Yl.SignalBased)!==0};return i&&(o.transform=i),o})}function $1(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function H1(n,e,t){let r=e instanceof at?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Cg(t,r):t}function q1(n){let e=n.get(Vo,null);if(e===null)throw new U(407,!1);let t=n.get(R1,null),r=n.get(Ii,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function z1(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return fT(e,t,t==="svg"?Vx:t==="math"?Lx:null)}var Lo=class extends FT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=B1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$1(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){_e(22);let o=ue(null);try{let s=this.componentDef,a=r?["ng-version","19.2.15"]:_O(this.componentDef.selectors[0]),u=pm(0,null,null,1,0,null,null,null,null,[a],null),l=H1(s,i||this.ngModule,e),h=q1(l),p=h.rendererFactory.createRenderer(null,s),m=r?RO(p,r,s.encapsulation,l):z1(s,p),y=gm(null,u,null,512|mT(s),null,null,h,p,l,null,sT(m,l,!0));y[Nt]=m,Zg(y);let C=null;try{let N=jT(Nt,u,y,"#host",()=>[this.componentDef],!0,0);m&&(gT(p,m,N),Go(m,y)),Zl(u,y,N),dm(u,N,y),UT(u,N),t!==void 0&&G1(N,this.ngContentSelectors,t),C=vn(N.index,y),y[Ct]=C[Ct],Im(u,y,null)}catch(N){throw C!==null&&yg(C),yg(y),N}finally{_e(23),Jg()}return new Ag(this.componentType,y)}finally{ue(o)}}},Ag=class extends S1{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=pb(t[he],Nt),this.location=Kl(this._tNode,t),this.instance=vn(this._tNode.index,t)[Ct],this.hostView=this.changeDetectorRef=new Na(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=_m(r,i[he],i,e,t);this.previousInputValues.set(e,t);let s=vn(r.index,i);bm(s,1)}get injector(){return new hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function G1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Qo=(()=>{class n{static __NG_ELEMENT_ID__=W1}return n})();function W1(){let n=_t();return Q1(n,Ie())}var K1=Qo,BT=class extends K1{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Kl(this._hostTNode,this._hostLView)}get injector(){return new hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=tm(this._hostTNode,this._hostLView);if(xb(e)){let t=Dl(e,this._hostLView),r=El(e),i=t[he].data[r+8];return new hi(i,t)}else return new hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=SD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=DD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,wD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!xx(e),a;if(s)a=t;else{let C=t||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let u=s?e:new Lo(gi(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(at,null);N&&(o=N)}let h=gi(u.componentType??{}),p=DD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,wD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Ux(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[vt],l=new BT(u,u[tn],u[vt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return v1(s,i,o,r),e.attachToViewContainerRef(),JD(Wp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=SD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bg(this._lContainer,t);r&&(pl(Wp(this._lContainer),t),DT(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=bg(this._lContainer,t);return r&&pl(Wp(this._lContainer),t)!=null?new Na(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function SD(n){return n[_l]}function Wp(n){return n[_l]||(n[_l]=[])}function Q1(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=xT(r,e,null,n),e[n.index]=t,mm(e,t)),Z1(t,e,n,r),new BT(t,n,e)}function Y1(n,e){let t=n[Ve],r=t.createComment(""),i=Dn(e,n),o=t.parentNode(i);return Nl(t,o,r,t.nextSibling(i),!1),r}var Z1=eF,J1=()=>!1;function X1(n,e,t){return J1(n,e,t)}function eF(n,e,t,r){if(n[mi])return;let i;t.type&8?i=yn(r):i=Y1(e,t),n[mi]=i}var jo=class{},Cm=class{};var Rg=class extends jo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=tb(e);this._bootstrapComponents=dT(o.bootstrap),this._r3Injector=$b(e,t,[{provide:jo,useValue:this},{provide:nd,useValue:this.componentFactoryResolver},...r],Tt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ng=class extends Cm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Rg(this.moduleType,e,[])}};var xl=class extends jo{injector;componentFactoryResolver=new Pl(this);instance=null;constructor(e){super();let t=new Aa([...e.providers,{provide:jo,useValue:this},{provide:nd,useValue:this.componentFactoryResolver}],e.parent||zg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fa(n,e,t=null){return new xl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var tF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=nb(!1,t.type),i=r.length>0?Fa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(W(at))})}return n})();function rd(n){return Pa(()=>{let e=HT(n),t=oe(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(tF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||In.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ko("NgStandalone"),qT(t);let r=n.dependencies;return t.directiveDefs=AD(r,!1),t.pipeDefs=AD(r,!0),t.id=sF(t),t})}function nF(n){return gi(n)||wx(n)}function rF(n){return n!==null}function Tn(n){return Pa(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function iF(n,e){if(n==null)return pi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Yl.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function oF(n){if(n==null)return pi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tt(n){return Pa(()=>{let e=HT(n);return qT(e),e})}function $T(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||pi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iF(n.inputs,e),outputs:oF(n.outputs),debugInfo:null}}function qT(n){n.features?.forEach(e=>e(n))}function AD(n,e){if(!n)return null;let t=e?Ex:nF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(rF)}function sF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aF(n){return Object.getPrototypeOf(n.prototype).constructor}function Rr(n){let e=aF(n.type),t=!0,r=[n];for(;e;){let i;if(mn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Kp(n.inputs),s.declaredInputs=Kp(n.declaredInputs),s.outputs=Kp(n.outputs);let a=i.hostBindings;a&&hF(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&lF(n,u),l&&dF(n,l),cF(n,i),ex(n.outputs,i.outputs),mn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Rr&&(t=!1)}}e=Object.getPrototypeOf(e)}uF(r)}function cF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function uF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fo(i.hostAttrs,t=Fo(t,i.hostAttrs))}}function Kp(n){return n===pi?{}:n===Bt?[]:n}function lF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function dF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function hF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function zT(n){return pF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function fF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function pF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function gF(n,e,t){return n[e]=t}function Yo(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function mF(n,e,t,r,i,o,s,a,u){let l=e.consts,h=td(e,n,4,s||null,a||null);Qg()&&Tm(e,t,h,Oo(l,u),vm),h.mergedAttrs=Fo(h.mergedAttrs,h.attrs),em(e,h);let p=h.tView=pm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function yF(n,e,t,r,i,o,s,a,u,l){let h=t+Nt,p=e.firstCreatePass?mF(h,e,n,r,i,o,s,a,u):e.data[h];Ci(p,!1);let m=vF(e,n,p,t);zl()&&Jl(e,n,m,p),Go(m,n);let y=xT(m,n,m,p);return n[h]=y,mm(n,y),X1(y,p,n),$l(p)&&Zl(e,n,p),u!=null&&ym(n,p,l),p}function Sm(n,e,t,r,i,o,s,a){let u=Ie(),l=ut(),h=Oo(l.consts,o);return yF(u,l,n,e,t,r,i,h,s,a),Sm}var vF=_F;function _F(n,e,t,r){return Gl(!0),e[Ve].createComment("")}var GT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var WT=new L("");var IF=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new Mg})}return n})(),Mg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Nr(n){return!!n&&typeof n.then=="function"}function Am(n){return!!n&&typeof n.subscribe=="function"}var KT=new L("");function Rm(n){return En([{provide:KT,multi:!0,useValue:n}])}var QT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(KT,{optional:!0})??[];injector=M(Le);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ct(this.injector,i);if(Nr(o))t.push(o);else if(Am(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),id=new L("");function wF(){Op(()=>{throw new U(600,!1)})}function EF(n){return n.isBoundToModule}var DF=10;var wi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Mk);afterRenderManager=M(oT);zonelessEnabled=M(rm);rootEffectScheduler=M(IF);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Oe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=M(Ai).hasPendingTasks.pipe(Z(t=>!t));constructor(){M(Wo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(at);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Le.NULL){_e(10);let o=t instanceof FT;if(!this._injector.get(QT).done){let y="";throw new U(405,y)}let a;o?a=t:a=this._injector.get(nd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=EF(a)?void 0:this._injector.get(jo),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(WT,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),ul(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),_e(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(um.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=ue(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ue(t),this.afterTick.next(),_e(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Vo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<DF;)_e(14),this.synchronizeOnce(),_e(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)bF(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ul(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(id,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ul(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ul(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bF(n,e,t,r){if(!t&&!Hl(n))return;RT(n,e,t&&!r?0:1)}function od(n,e,t,r){let i=Ie(),o=ql();if(Yo(i,o,e)){let s=ut(),a=Xg();VO(a,i,n,e,t,r)}return od}function TF(n,e,t,r){return Yo(n,ql(),t)?e+Ll(t)+r:Ri}function ol(n,e){return n<<17|e<<2}function Ei(n){return n>>17&32767}function CF(n){return(n&2)==2}function SF(n,e){return n&131071|e<<17}function Pg(n){return n|2}function Uo(n){return(n&131068)>>2}function Qp(n,e){return n&-131069|e<<2}function AF(n){return(n&1)===1}function xg(n){return n|1}function RF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ei(s),u=Uo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||xa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Ei(n[a+1]);n[r+1]=ol(m,a),m!==0&&(n[m+1]=Qp(n[m+1],r)),n[a+1]=SF(n[a+1],r)}else n[r+1]=ol(a,0),a!==0&&(n[a+1]=Qp(n[a+1],r)),a=r;else n[r+1]=ol(u,0),a===0?a=r:n[u+1]=Qp(n[u+1],r),u=r;l&&(n[r+1]=Pg(n[r+1])),RD(n,h,r,!0),RD(n,h,r,!1),NF(e,h,n,r,o),s=ol(a,u),o?e.classBindings=s:e.styleBindings=s}function NF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&xa(o,e)>=0&&(t[r+1]=xg(t[r+1]))}function RD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ei(i):Uo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];MF(u,e)&&(a=!0,n[s+1]=r?xg(l):Pg(l)),s=r?Ei(l):Uo(l)}a&&(n[t+1]=r?Pg(i):xg(i))}function MF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xa(n,e)>=0:!1}function Va(n,e,t){let r=Ie(),i=ql();if(Yo(r,i,e)){let o=ut(),s=Xg();IT(o,s,r,n,e,r[Ve],t,!1)}return Va}function ND(n,e,t,r,i){_m(e,n,t,i?"class":"style",r)}function Nm(n,e){return PF(n,e,null,!0),Nm}function PF(n,e,t,r){let i=Ie(),o=ut(),s=Xx(2);if(o.firstUpdatePass&&kF(o,n,s,r),e!==Ri&&Yo(i,s,e)){let a=o.data[qo()];jF(o,a,i,i[Ve],n,i[s+1]=UF(e,t),r,s)}}function xF(n,e){return e>=n.expandoStartIndex}function kF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[qo()],s=xF(n,t);BF(o,r)&&e===null&&!s&&(e=!1),e=OF(i,o,e,r),RF(i,o,e,t,s,r)}}function OF(n,e,t,r){let i=rk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Yp(null,n,e,t,r),t=Ma(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Yp(i,n,e,t,r),o===null){let u=FF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Yp(null,n,e,u[1],r),u=Ma(u,e.attrs,r),VF(n,e,r,u))}else o=LF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function FF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Uo(r)!==0)return n[Ei(r)]}function VF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ei(i)]=r}function LF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ma(r,s,t)}return Ma(r,e.attrs,t)}function Yp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ma(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ma(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_x(n,s,t?!0:e[++o]))}return n===void 0?null:n}function jF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=AF(l)?MD(u,e,t,i,Uo(l),s):void 0;if(!kl(h)){kl(o)||CF(l)&&(o=MD(u,null,t,i,a,s));let p=fb(qo(),t);i1(r,s,p,i,o)}}function MD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Ri&&(m=p?Bt:void 0);let y=p?Up(m,r):h===r?m:void 0;if(l&&!kl(y)&&(y=Up(u,r)),kl(y)&&(a=y,s))return a;let C=n[i+1];i=s?Ei(C):Uo(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Up(u,r))}return a}function kl(n){return n!==void 0}function UF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Tt(Ql(n)))),n}function BF(n,e){return(n.flags&(e?8:16))!==0}function qt(n,e,t,r){let i=Ie(),o=ut(),s=Nt+n,a=i[Ve],u=o.firstCreatePass?jT(s,o,i,e,vm,Qg(),t,r):o.data[s],l=$F(o,i,u,a,e,n);i[s]=l;let h=$l(u);return Ci(u,!0),gT(a,l,u),!wT(u)&&zl()&&Jl(o,i,l,u),(Hx()===0||h)&&Go(l,i),qx(),h&&(Zl(o,i,u),dm(o,u,i)),r!==null&&ym(i,u),qt}function Pt(){let n=_t();Yg()?Eb():(n=n.parent,Ci(n,!1));let e=n;Wx(e)&&Kx(),zx();let t=ut();return t.firstCreatePass&&UT(t,e),e.classesWithoutHost!=null&&uk(e)&&ND(t,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&lk(e)&&ND(t,e,Ie(),e.stylesWithoutHost,!1),Pt}function Mm(n,e,t,r){return qt(n,e,t,r),Pt(),Mm}var $F=(n,e,t,r,i,o)=>(Gl(!0),fT(r,i,sk()));function HF(n,e,t,r,i){let o=e.consts,s=Oo(o,r),a=td(e,n,8,"ng-container",s);s!==null&&Sg(a,s,!0);let u=Oo(o,i);return Qg()&&Tm(e,t,a,u,vm),a.mergedAttrs=Fo(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function qF(n,e,t){let r=Ie(),i=ut(),o=n+Nt,s=i.firstCreatePass?HF(o,i,r,e,t):i.data[o];Ci(s,!0);let a=GF(i,r,s,n);return r[o]=a,zl()&&Jl(i,r,a,s),Go(a,r),$l(s)&&(Zl(i,r,s),dm(i,s,r)),t!=null&&ym(r,s),qF}function zF(){let n=_t(),e=ut();return Yg()?Eb():(n=n.parent,Ci(n,!1)),e.firstCreatePass&&(em(e,n),Wg(n)&&e.queries.elementEnd(n)),zF}var GF=(n,e,t,r)=>(Gl(!0),EO(e[Ve],""));function W8(){return Ie()}var Ol="en-US";var WF=Ol;function KF(n){typeof n=="string"&&(WF=n.toLowerCase().replace(/_/g,"-"))}function PD(n,e,t){return function r(i){if(i===Function)return t;let o=$o(n)?vn(n.index,e):e;bm(o,5);let s=e[Ct],a=xD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=xD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function xD(n,e,t,r){let i=ue(null);try{return _e(6,e,t),t(r)!==!1}catch(o){return QF(n,o),!1}finally{_e(7,e,t),ue(i)}}function QF(n,e){let t=n[Po],r=t?t.get(_n,null):null;r&&r.handleError(e)}function kD(n,e,t,r,i,o){let s=e[t],a=e[he],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?Ib(a):null,m=_b(e),y=h.subscribe(o),C=m.length;m.push(o,y),p&&p.push(i,n.index,C,-(C+1))}function xt(n,e,t,r){let i=Ie(),o=ut(),s=_t();return YT(o,i,i[Ve],s,n,e,r),xt}function YF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[yl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function YT(n,e,t,r,i,o,s){let a=$l(r),l=n.firstCreatePass?Ib(n):null,h=_b(e),p=!0;if(r.type&3||s){let m=Dn(r,e),y=s?s(m):m,C=h.length,N=s?V=>s(yn(V[r.index])):r.index,R=null;if(!s&&a&&(R=YF(n,e,i,r.index)),R!==null){let V=R.__ngLastListenerFn__||R;V.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,p=!1}else{o=PD(r,e,o),Yk(e,y,i,o);let V=t.listen(y,i,o);h.push(o,V),l&&l.push(i,N,C,C+1)}}else o=PD(r,e,o);if(p){let m=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let C=0;C<y.length;C+=2){let N=y[C],R=y[C+1];kD(r,e,N,R,i,o)}if(m&&m.length)for(let C of m)kD(r,e,C,i,i,o)}}function ZT(n=1){return ok(n)}function K8(n){let e=Yx();return gb(e,Nt+n)}function Mr(n,e=""){let t=Ie(),r=ut(),i=n+Nt,o=r.firstCreatePass?td(r,i,1,e,null):r.data[i],s=ZF(r,t,o,e,n);t[i]=s,zl()&&Jl(r,t,s,o),Ci(o,!1)}var ZF=(n,e,t,r,i)=>(Gl(!0),IO(e[Ve],r));function Pm(n){return JT("",n,""),Pm}function JT(n,e,t){let r=Ie(),i=TF(r,n,e,t);return i!==Ri&&JF(r,qo(),i),JT}function JF(n,e,t){let r=fb(e,n);wO(n[Ve],r,t)}function sd(n,e,t){Qb(e)&&(e=e());let r=Ie(),i=ql();if(Yo(r,i,e)){let o=ut(),s=Xg();IT(o,s,r,n,e,r[Ve],t,!1)}return sd}function xm(n,e){let t=Qb(n);return t&&n.set(e),t}function ad(n,e){let t=Ie(),r=ut(),i=_t();return YT(r,t,t[Ve],i,n,e),ad}function XF(n,e,t){let r=ut();if(r.firstCreatePass){let i=mn(n);kg(t,r.data,r.blueprint,i,!0),kg(e,r.data,r.blueprint,i,!1)}}function kg(n,e,t,r,i){if(n=yt(n),Array.isArray(n))for(let o=0;o<n.length;o++)kg(n[o],e,t,r,i);else{let o=ut(),s=Ie(),a=_t(),u=Mo(n)?n:yt(n.provide),l=ob(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Mo(n)||!n.multi){let y=new _i(l,i,le),C=Jp(u,e,i?h:h+m,p);C===-1?(dg(Tl(a,s),o,u),Zp(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[C]=y,s[C]=y)}else{let y=Jp(u,e,h+m,p),C=Jp(u,e,h,h+m),N=y>=0&&t[y],R=C>=0&&t[C];if(i&&!R||!i&&!N){dg(Tl(a,s),o,u);let V=nV(i?tV:eV,t.length,i,r,l);!i&&R&&(t[C].providerFactory=V),Zp(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=XT(t[i?C:y],l,!i&&r);Zp(o,n,y>-1?y:C,V)}!i&&r&&R&&t[C].componentProviders++}}}function Zp(n,e,t,r){let i=Mo(e),o=Sx(e);if(i||o){let u=(o?yt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function XT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eV(n,e,t,r,i){return Og(this.multi,[])}function tV(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Cl(r,r[he],this.providerFactory.index,i);s=u.slice(0,a),Og(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Og(o,s);return s}function Og(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function nV(n,e,t,r,i){let o=new _i(n,t,le);return o.multi=[],o.index=e,o.componentProviders=0,XT(o,i,r&&!t),o}function La(n,e=[]){return t=>{t.providersResolver=(r,i)=>XF(r,i?i(n):n,e)}}function rV(n,e){let t=n[e];return t===Ri?void 0:t}function iV(n,e,t,r,i,o){let s=e+t;return Yo(n,s,i)?gF(n,s+1,o?r.call(o,i):r(i)):rV(n,s+1)}function Q8(n,e){let t=ut(),r,i=n+Nt;t.firstCreatePass?(r=oV(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=fi(r.type,!0)),s,a=bt(le);try{let u=bl(!1),l=o();return bl(u),jx(t,Ie(),i,l),l}finally{bt(a)}}function oV(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Y8(n,e,t){let r=n+Nt,i=Ie(),o=gb(i,r);return sV(i,r)?iV(i,Zx(),e,o.transform,t,o):o.transform(t)}function sV(n,e){return n[he].data[e].pure}function Z8(n,e){return OT(n,e)}var Di=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},eC=new Di("19.2.15"),Fg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tC=(()=>{class n{compileModuleSync(t){return new Ng(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=tb(t),o=dT(i.declarations).reduce((s,a)=>{let u=gi(a);return u&&s.push(new Lo(u)),s},[]);return new Fg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aV=(()=>{class n{zone=M(ge);changeDetectionScheduler=M(Ii);applicationRef=M(wi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cV=new L("",{factory:()=>!1});function nC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ge(oe(k({},iC()),{scheduleInRootZone:t})),[{provide:ge,useFactory:n},{provide:Sa,multi:!0,useFactory:()=>{let r=M(aV,{optional:!0});return()=>r.initialize()}},{provide:Sa,multi:!0,useFactory:()=>{let r=M(uV);return()=>{r.initialize()}}},e===!0?{provide:qb,useValue:!0}:[],{provide:zb,useValue:t??Hb}]}function rC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=nC({ngZoneFactory:()=>{let i=iC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ko("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return En([{provide:cV,useValue:!0},{provide:rm,useValue:!1},r])}function iC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uV=(()=>{class n{subscription=new Re;initialized=!1;zone=M(ge);pendingTasks=M(Ai);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lV=(()=>{class n{appRef=M(wi);taskService=M(Ai);ngZone=M(ge);zonelessEnabled=M(rm);tracing=M(Wo,{optional:!0});disableScheduling=M(qb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Al):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(zb,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?hD:Gb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Al+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dV(){return typeof $localize<"u"&&$localize.locale||Ol}var km=new L("",{providedIn:"root",factory:()=>M(km,te.Optional|te.SkipSelf)||dV()});var Vg=new L(""),hV=new L("");function Da(n){return!n.moduleRef}function fV(n){let e=Da(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ge);return t.run(()=>{Da(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(_n,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Da(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Vg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Vg);s.add(o),n.moduleRef.onDestroy(()=>{ul(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return gV(r,t,()=>{let o=e.get(QT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(km,Ol);if(KF(s||Ol),!e.get(hV,!0))return Da(n)?e.get(wi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Da(n)){let u=e.get(wi);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return pV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function pV(n,e){let t=n.injector.get(wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new U(-403,!1);e.push(n)}function gV(n,e,t){try{let r=t();return Nr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ll=null;function mV(n=[],e){return Le.create({name:e,providers:[{provide:Ul,useValue:"platform"},{provide:Vg,useValue:new Set([()=>ll=null])},...n]})}function yV(n=[]){if(ll)return ll;let e=mV(n);return ll=e,wF(),vV(e),e}function vV(n){let e=n.get(am,null);ct(n,()=>{e?.forEach(t=>t())})}function Om(){return!1}var Pr=(()=>{class n{static __NG_ELEMENT_ID__=_V}return n})();function _V(n){return IV(_t(),Ie(),(n&16)===16)}function IV(n,e,t){if($o(n)&&!t){let r=vn(n.index,e);return new Na(r,r)}else if(n.type&175){let r=e[gn];return new Na(r,e)}return null}var Lg=class{constructor(){}supports(e){return zT(e)}create(e){return new jg(e)}},wV=(n,e)=>e,jg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||wV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<OD(r,i,o)?t:r,a=OD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!zT(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,fF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ug(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ug=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Bg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Fl=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Bg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function FD(){return new Fm([new Lg])}var Fm=(()=>{class n{factories;static \u0275prov=B({token:n,providedIn:"root",factory:FD});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||FD()),deps:[[n,new yx,new Mt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();function oC(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;_e(8);try{let o=i?.injector??yV(r),s=[nC({}),{provide:Ii,useExisting:lV},...t||[]],a=new xl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return fV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{_e(9)}}function Mi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function nn(n){return Lp(n)}function ja(n,e){return kp(n,e?.equal)}var VD=class{[Ut];constructor(e){this[Ut]=e}destroy(){this[Ut].destroy()}};function sC(n){let e=gi(n);if(!e)return null;let t=new Lo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var We=new L("");var uC=null;function zt(){return uC}function Vm(n){uC??=n}var Ua=class{},Ba=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(lC),providedIn:"platform"})}return n})(),Lm=new L(""),lC=(()=>{class n extends Ba{_location;_history;_doc=M(We);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zt().getBaseHref(this._doc)}onPopState(t){let r=zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function aC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function on(n){return n&&n[0]!=="?"?`?${n}`:n}var sn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(ld),providedIn:"root"})}return n})(),ud=new L(""),ld=(()=>{class n extends sn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+on(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+on(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+on(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Ba),W(ud,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xr=(()=>{class n{_subject=new Oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=bV(aC(cC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+on(r))}normalize(t){return n.stripTrailingSlash(DV(this._basePath,cC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+on(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+on(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=on;static joinWithSlash=cd;static stripTrailingSlash=aC;static \u0275fac=function(r){return new(r||n)(W(sn))};static \u0275prov=B({token:n,factory:()=>EV(),providedIn:"root"})}return n})();function EV(){return new xr(W(sn))}function DV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cC(n){return n.replace(/\/index.html$/,"")}function bV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Bm=(()=>{class n extends sn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=cd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+on(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+on(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Ba),W(ud,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();var dd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fC=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),dC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);dC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(Qo),le(ed),le(Fm))};static \u0275dir=tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function dC(n,e){n.context.$implicit=e.item}var $m=(()=>{class n{_viewContainer;_context=new hd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hC(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hC(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(Qo),le(ed))};static \u0275dir=tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hd=class{$implicit=null;ngIf=null};function hC(n,e){if(n&&!n.createEmbeddedView)throw new U(2020,!1)}function TV(n,e){return new U(2100,!1)}var jm=class{createSubscription(e,t){return nn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){nn(()=>e.unsubscribe())}},Um=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},CV=new Um,SV=new jm,AV=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Nr(t))return CV;if(Am(t))return SV;throw TV(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(le(Pr,16))};static \u0275pipe=$T({name:"async",type:n,pure:!1})}return n})();var fd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tn({type:n});static \u0275inj=wn({})}return n})();function Hm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pd="browser",pC="server";function RV(n){return n===pd}function gd(n){return n===pC}var $a=class{};var gC=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new qm(M(We),window)})}return n})(),qm=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=NV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function NV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var vd=new L(""),Km=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(W(vd),W(ge))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Ha=class{_doc;constructor(e){this._doc=e}manager},md="ng-app-id";function yC(n){for(let e of n)e.remove()}function vC(n,e){let t=e.createElement("style");return t.textContent=n,t}function MV(n,e,t,r){let i=n.head?.querySelectorAll(`style[${md}="${e}"],link[${md}="${e}"]`);if(i)for(let o of i)o.removeAttribute(md),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Gm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Qm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=gd(o),MV(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,vC);r?.forEach(i=>this.addUsage(i,this.external,Gm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(yC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])yC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,vC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Gm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(md,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(W(We),W(sm),W(cm,8),W(Ar))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),zm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ym=/%COMP%/g;var IC="%COMP%",PV=`_nghost-${IC}`,xV=`_ngcontent-${IC}`,kV=!0,OV=new L("",{providedIn:"root",factory:()=>kV});function FV(n){return xV.replace(Ym,n)}function VV(n){return PV.replace(Ym,n)}function wC(n,e){return e.map(t=>t.replace(Ym,n))}var Zm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=gd(a),this.defaultRenderer=new qa(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===In.ShadowDom&&(r=oe(k({},r),{encapsulation:In.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof yd?i.applyToHost(t):i instanceof za&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case In.Emulated:o=new yd(u,l,r,this.appId,h,s,a,p,m);break;case In.ShadowDom:return new Wm(u,l,t,r,s,a,this.nonce,p,m);default:o=new za(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(W(Km),W(Qm),W(sm),W(OV),W(We),W(Ar),W(ge),W(cm),W(Wo,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),qa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(zm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_C(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_C(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=zm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=zm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,r,i&Qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=zt().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function _C(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Wm=class extends qa{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=wC(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Gm(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},za=class extends qa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?wC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yd=class extends za{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=FV(h),this.hostAttr=VV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var _d=class n extends Ua{supportsDOMEvents=!0;static makeCurrent(){Vm(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=LV();return t==null?null:jV(t)}resetBaseElement(){Ga=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hm(document.cookie,e)}},Ga=null;function LV(){return Ga=Ga||document.head.querySelector("base"),Ga?Ga.getAttribute("href"):null}function jV(n){return new URL(n,document.baseURI).pathname}var UV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),DC=(()=>{class n extends Ha{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(W(We))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),EC=["alt","control","meta","shift"],BV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$V={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bC=(()=>{class n extends Ha{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zt().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),EC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=BV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),EC.forEach(s=>{if(s!==i){let a=$V[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(W(We))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function HV(n,e,t){return oC(k({rootComponent:n,platformRef:t?.platformRef},qV(e)))}function qV(n){return{appProviders:[...QV,...n?.providers??[]],platformProviders:KV}}function zV(){_d.makeCurrent()}function GV(){return new _n}function WV(){return nT(document),document}var KV=[{provide:Ar,useValue:pd},{provide:am,useValue:zV,multi:!0},{provide:We,useFactory:WV}];var QV=[{provide:Ul,useValue:"root"},{provide:_n,useFactory:GV},{provide:vd,useClass:DC,multi:!0,deps:[We]},{provide:vd,useClass:bC,multi:!0,deps:[We]},Zm,Qm,Km,{provide:Vo,useExisting:Zm},{provide:$a,useClass:UV},[]];var TC=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(W(We))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ee="primary",oc=Symbol("RouteTitle"),ny=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ki(n){return new ny(n)}function xC(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ZV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cn(n[t],e[t]))return!1;return!0}function Cn(n,e){let t=n?ry(n):void 0,r=e?ry(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kC(n[i],e[i]))return!1;return!0}function ry(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function OC(n){return n.length>0?n[n.length-1]:null}function Lr(n){return vp(n)?n:Nr(n)?be(Promise.resolve(n)):z(n)}var JV={exact:VC,subset:LC},FC={exact:XV,subset:eL,ignored:()=>!0};function CC(n,e,t){return JV[t.paths](n.root,e.root,t.matrixParams)&&FC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function XV(n,e){return Cn(n,e)}function VC(n,e,t){if(!Pi(n.segments,e.segments)||!Ed(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!VC(n.children[r],e.children[r],t))return!1;return!0}function eL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kC(n[t],e[t]))}function LC(n,e,t){return jC(n,e,e.segments,t)}function jC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Pi(i,t)||e.hasChildren()||!Ed(i,t,r))}else if(n.segments.length===t.length){if(!Pi(n.segments,t)||!Ed(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!LC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Pi(n.segments,i)||!Ed(n.segments,i,r)||!n.children[ee]?!1:jC(n.children[ee],e,o,r)}}function Ed(n,e,t){return e.every((r,i)=>FC[t](n[i].parameters,r.parameters))}var An=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ki(this.queryParams),this._queryParamMap}toString(){return rL.serialize(this)}},me=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dd(this)}},kr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ki(this.parameters),this._parameterMap}toString(){return BC(this)}};function tL(n,e){return Pi(n,e)&&n.every((t,r)=>Cn(t.parameters,e[r].parameters))}function Pi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ee&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ee&&(t=t.concat(e(i,r)))}),t}var Oi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new Or,providedIn:"root"})}return n})(),Or=class{parse(e){let t=new oy(e);return new An(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wa(e.root,!0)}`,r=sL(e.queryParams),i=typeof e.fragment=="string"?`#${iL(e.fragment)}`:"";return`${t}${r}${i}`}},rL=new Or;function Dd(n){return n.segments.map(e=>BC(e)).join("/")}function Wa(n,e){if(!n.hasChildren())return Dd(n);if(e){let t=n.children[ee]?Wa(n.children[ee],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${Wa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nL(n,(r,i)=>i===ee?[Wa(n.children[ee],!1)]:[`${i}:${Wa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ee]!=null?`${Dd(n)}/${t[0]}`:`${Dd(n)}/(${t.join("//")})`}}function UC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Id(n){return UC(n).replace(/%3B/gi,";")}function iL(n){return encodeURI(n)}function iy(n){return UC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bd(n){return decodeURIComponent(n)}function SC(n){return bd(n.replace(/\+/g,"%20"))}function BC(n){return`${iy(n.path)}${oL(n.parameters)}`}function oL(n){return Object.entries(n).map(([e,t])=>`;${iy(e)}=${iy(t)}`).join("")}function sL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Id(t)}=${Id(i)}`).join("&"):`${Id(t)}=${Id(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var aL=/^[^\/()?;#]+/;function Jm(n){let e=n.match(aL);return e?e[0]:""}var cL=/^[^\/()?;=#]+/;function uL(n){let e=n.match(cL);return e?e[0]:""}var lL=/^[^=?&#]+/;function dL(n){let e=n.match(lL);return e?e[0]:""}var hL=/^[^&#]+/;function fL(n){let e=n.match(hL);return e?e[0]:""}var oy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ee]=new me(e,t)),r}parseSegment(){let e=Jm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new kr(bd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=uL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Jm(this.remaining);i&&(r=i,this.capture(r))}e[bd(t)]=bd(r)}parseQueryParam(e){let t=dL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=fL(this.remaining);s&&(r=s,this.capture(r))}let i=SC(t),o=SC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Jm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ee]:new me([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function $C(n){return n.segments.length>0?new me([],{[ee]:n}):n}function HC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=HC(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new me(n.segments,e);return pL(t)}function pL(n){if(n.numberOfChildren===1&&n.children[ee]){let e=n.children[ee];return new me(n.segments.concat(e.segments),e.children)}return n}function Fr(n){return n instanceof An}function qC(n,e,t=null,r=null){let i=zC(n);return GC(i,e,t,r)}function zC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new me(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=$C(r);return e??i}function GC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Xm(i,i,i,t,r);let o=gL(e);if(o.toRoot())return Xm(i,i,new me([],{}),t,r);let s=mL(o,i,n),a=s.processChildren?Qa(s.segmentGroup,s.index,o.commands):KC(s.segmentGroup,s.index,o.commands);return Xm(i,s.segmentGroup,a,t,r)}function Cd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Za(n){return typeof n=="object"&&n!=null&&n.outlets}function Xm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=WC(n,e,t);let a=$C(HC(s));return new An(a,o,i)}function WC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=WC(o,e,t)}),new me(n.segments,r)}var Sd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cd(r[0]))throw new U(4003,!1);let i=r.find(Za);if(i&&i!==OC(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sd(t,e,r)}var Xo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function mL(n,e,t){if(n.isAbsolute)return new Xo(e,!0,0);if(!t)return new Xo(e,!1,NaN);if(t.parent===null)return new Xo(t,!0,0);let r=Cd(n.commands[0])?0:1,i=t.segments.length-1+r;return yL(t,i,n.numberOfDoubleDots)}function yL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Xo(r,!1,i-o)}function vL(n){return Za(n[0])?n[0].outlets:{[ee]:n}}function KC(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return Qa(n,e,t);let r=_L(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new me(n.segments.slice(0,r.pathIndex),{});return o.children[ee]=new me(n.segments.slice(r.pathIndex),n.children),Qa(o,0,i)}else return r.match&&i.length===0?new me(n.segments,{}):r.match&&!n.hasChildren()?sy(n,e,t):r.match?Qa(n,0,i):sy(n,e,t)}function Qa(n,e,t){if(t.length===0)return new me(n.segments,{});{let r=vL(t),i={};if(Object.keys(r).some(o=>o!==ee)&&n.children[ee]&&n.numberOfChildren===1&&n.children[ee].segments.length===0){let o=Qa(n.children[ee],e,t);return new me(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=KC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(n.segments,i)}}function _L(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Za(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!RC(u,l,s))return o;r+=2}else{if(!RC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Za(o)){let u=IL(o.outlets);return new me(r,u)}if(i===0&&Cd(t[0])){let u=n.segments[e];r.push(new kr(u.path,AC(t[0]))),i++;continue}let s=Za(o)?o.outlets[ee]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Cd(a)?(r.push(new kr(s,AC(a))),i+=2):(r.push(new kr(s,{})),i++)}return new me(r,{})}function IL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=sy(new me([],{}),0,r))}),e}function AC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function RC(n,e,t){return n==t.path&&Cn(e,t.parameters)}var Td="imperative",qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(qe||{}),Ot=class{id;url;constructor(e,t){this.id=e,this.url=t}},Vr=class extends Ot{type=qe.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends Ot{urlAfterRedirects;type=qe.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(St||{}),ts=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ts||{}),Sn=class extends Ot{reason;code;type=qe.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Ot{reason;code;type=qe.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ns=class extends Ot{error;target;type=qe.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ja=class extends Ot{urlAfterRedirects;state;type=qe.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class extends Ot{urlAfterRedirects;state;type=qe.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rd=class extends Ot{urlAfterRedirects;state;shouldActivate;type=qe.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nd=class extends Ot{urlAfterRedirects;state;type=qe.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Md=class extends Ot{urlAfterRedirects;state;type=qe.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class{route;type=qe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xd=class{route;type=qe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kd=class{snapshot;type=qe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Od=class{snapshot;type=qe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{snapshot;type=qe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{snapshot;type=qe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rs=class{routerEvent;position;anchor;type=qe.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xa=class{},is=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wL(n,e){return n.providers&&!n._injector&&(n._injector=Fa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function an(n){return n.outlet||ee}function EL(n,e){let t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}function sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ld=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return sc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Fi(this.rootInjector)}},Fi=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ld(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(W(at))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ay(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ay(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=cy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cy(e,this._root).map(t=>t.value)}};function ay(n,e){if(n===e.value)return e;for(let t of e.children){let r=ay(n,t);if(r)return r}return null}function cy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=cy(n,t);if(r.length)return r.unshift(e),r}return[]}var kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Jo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ec=class extends jd{snapshot;constructor(e,t){super(e),this.snapshot=t,my(this,e)}toString(){return this.snapshot.toString()}};function QC(n){let e=DL(n),t=new Xe([new kr("",{})]),r=new Xe({}),i=new Xe({}),o=new Xe({}),s=new Xe(""),a=new Nn(t,r,o,s,i,ee,n,e.root);return a.snapshot=e.root,new ec(new kt(a,[]),e)}function DL(n){let e={},t={},r={},i="",o=new xi([],e,r,i,t,ee,n,null,{});return new tc("",new kt(o,[]))}var Nn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[oc]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>ki(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>ki(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ud(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&ZC(i)&&(r.resolve[oc]=i.title),r}var xi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[oc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ki(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ki(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},tc=class extends jd{url;constructor(e,t){super(t),this.url=e,my(this,t)}toString(){return YC(this._root)}};function my(n,e){e.value._routerState=n,e.children.forEach(t=>my(n,t))}function YC(n){let e=n.children.length>0?` { ${n.children.map(YC).join(", ")} } `:"";return`${n.value}${e}`}function ey(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cn(e.params,t.params)||n.paramsSubject.next(t.params),ZV(e.url,t.url)||n.urlSubject.next(t.url),Cn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function uy(n,e){let t=Cn(n.params,e.params)&&tL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||uy(n.parent,e.parent))}function ZC(n){return typeof n.title=="string"||n.title===null}var JC=new L(""),yy=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new Ge;deactivateEvents=new Ge;attachEvents=new Ge;detachEvents=new Ge;routerOutletData=Kb(void 0);parentContexts=M(Fi);location=M(Qo);changeDetector=M(Pr);inputBinder=M(ac,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ly(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ti]})}return n})(),ly=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Nn?this.route:e===Fi?this.childContexts:e===JC?this.outletData:this.parent.get(e,t)}},ac=new L(""),vy=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ma([r.queryParams,r.params,r.data]).pipe(jt(([o,s,a],u)=>(a=k(k(k({},o),s),a),u===0?z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=sC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),_y=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=rd({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Mm(0,"router-outlet")},dependencies:[yy],encapsulation:2})}return n})();function Iy(n){let e=n.children&&n.children.map(Iy),t=e?oe(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ee&&(t.component=_y),t}function bL(n,e,t){let r=nc(n,e._root,t?t._root:void 0);return new ec(r,e)}function nc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=TL(n,e,t);return new kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>nc(n,a)),s}}let r=CL(e.value),i=e.children.map(o=>nc(n,o));return new kt(r,i)}}function TL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nc(n,r,i);return nc(n,r)})}function CL(n){return new Nn(new Xe(n.url),new Xe(n.params),new Xe(n.queryParams),new Xe(n.fragment),new Xe(n.data),n.outlet,n.component,n)}var os=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},XC="ngNavigationCancelingError";function Bd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Fr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eS(!1,St.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[XC]=!0,t.cancellationCode=e,t}function SL(n){return tS(n)&&Fr(n.url)}function tS(n){return!!n&&n[XC]}var AL=(n,e,t,r)=>Z(i=>(new dy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ey(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Jo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Jo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Jo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Vd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Od(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ey(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ey(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$d=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},es=class{component;route;constructor(e,t){this.component=e,this.route=t}};function RL(n,e,t){let r=n._root,i=e?e._root:null;return Ka(r,i,t,[r.value])}function NL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function as(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qD(n)?n:e.get(n):r}function Ka(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Jo(e);return n.children.forEach(s=>{ML(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ya(a,t.getContext(s),i)),i}function ML(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=PL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ka(n,e,a?a.children:null,r,i):Ka(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new es(a.outlet.component,s))}else s&&Ya(e,a,i),i.canActivateChecks.push(new $d(r)),o.component?Ka(n,null,a?a.children:null,r,i):Ka(n,null,t,r,i);return i}function PL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Pi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Pi(n.url,e.url)||!Cn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uy(n,e)||!Cn(n.queryParams,e.queryParams);case"paramsChange":default:return!uy(n,e)}}function Ya(n,e,t){let r=Jo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ya(s,e.children.getContext(o),t):Ya(s,null,t):Ya(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new es(e.outlet.component,i)):t.canDeactivateChecks.push(new es(null,i)):t.canDeactivateChecks.push(new es(null,i))}function cc(n){return typeof n=="function"}function xL(n){return typeof n=="boolean"}function kL(n){return n&&cc(n.canLoad)}function OL(n){return n&&cc(n.canActivate)}function FL(n){return n&&cc(n.canActivateChild)}function VL(n){return n&&cc(n.canDeactivate)}function LL(n){return n&&cc(n.canMatch)}function nS(n){return n instanceof qn||n?.name==="EmptyError"}var wd=Symbol("INITIAL_VALUE");function ss(){return jt(n=>ma(n.map(e=>e.pipe(mt(1),Qu(wd)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===wd)return wd;if(t===!1||jL(t))return t}return!0}),st(e=>e!==wd),mt(1)))}function jL(n){return Fr(n)||n instanceof os}function UL(n,e){return Pe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?z(oe(k({},t),{guardsResult:!0})):BL(s,r,i,n).pipe(Pe(a=>a&&xL(a)?$L(r,o,n,e):z(a)),Z(a=>oe(k({},t),{guardsResult:a})))})}function BL(n,e,t,r){return be(n).pipe(Pe(i=>WL(i.component,i.route,t,e,r)),Gn(i=>i!==!0,!0))}function $L(n,e,t,r){return be(e).pipe(br(i=>Do(qL(i.route.parent,r),HL(i.route,r),GL(n,i.path,t),zL(n,i.route,t))),Gn(i=>i!==!0,!0))}function HL(n,e){return n!==null&&e&&e(new Fd(n)),z(!0)}function qL(n,e){return n!==null&&e&&e(new kd(n)),z(!0)}function zL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>zu(()=>{let s=sc(e)??t,a=as(o,s),u=OL(a)?a.canActivate(e,n):ct(s,()=>a(e,n));return Lr(u).pipe(Gn())}));return z(i).pipe(ss())}function GL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NL(s)).filter(s=>s!==null).map(s=>zu(()=>{let a=s.guards.map(u=>{let l=sc(s.node)??t,h=as(u,l),p=FL(h)?h.canActivateChild(r,n):ct(l,()=>h(r,n));return Lr(p).pipe(Gn())});return z(a).pipe(ss())}));return z(o).pipe(ss())}function WL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let u=sc(e)??i,l=as(a,u),h=VL(l)?l.canDeactivate(n,e,t,r):ct(u,()=>l(n,e,t,r));return Lr(h).pipe(Gn())});return z(s).pipe(ss())}function KL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=as(s,n),u=kL(a)?a.canLoad(e,t):ct(n,()=>a(e,t));return Lr(u)});return z(o).pipe(ss(),rS(r))}function rS(n){return Tu(et(e=>{if(typeof e!="boolean")throw Bd(n,e)}),Z(e=>e===!0))}function QL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=as(s,n),u=LL(a)?a.canMatch(e,t):ct(n,()=>a(e,t));return Lr(u)});return z(o).pipe(ss(),rS(r))}var rc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ic=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zo(n){return wo(new rc(n))}function YL(n){return wo(new U(4e3,!1))}function ZL(n){return wo(eS(!1,St.GuardRejected))}var hy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[ee])return YL(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:C,title:N}=i,R=ct(o,()=>a({params:y,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof An)throw new ic(R);t=R}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ic(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new An(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JL(n,e,t,r,i){let o=iS(n,e,t);return o.matched?(r=wL(e,r),QL(r,e,t,i).pipe(Z(s=>s===!0?o:k({},fy)))):z(o)}function iS(n,e,t){if(e.path==="**")return XL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},fy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xC)(t,n,e);if(!i)return k({},fy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function XL(n){return{matched:!0,parameters:n.length>0?OC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function NC(n,e,t,r){return t.length>0&&n2(n,t,r)?{segmentGroup:new me(e,t2(r,new me(t,n.children))),slicedSegments:[]}:t.length===0&&r2(n,t,r)?{segmentGroup:new me(n.segments,e2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function e2(n,e,t,r){let i={};for(let o of t)if(qd(n,e,o)&&!r[an(o)]){let s=new me([],{});i[an(o)]=s}return k(k({},r),i)}function t2(n,e){let t={};t[ee]=e;for(let r of n)if(r.path===""&&an(r)!==ee){let i=new me([],{});t[an(r)]=i}return t}function n2(n,e,t){return t.some(r=>qd(n,e,r)&&an(r)!==ee)}function r2(n,e,t){return t.some(r=>qd(n,e,r))}function qd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function i2(n,e,t){return e.length===0&&!n.children[t]}var py=class{};function o2(n,e,t,r,i,o,s="emptyOnly"){return new gy(n,e,t,r,i,s,o).recognize()}var s2=31,gy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hy(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=NC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:t,rootSnapshot:r})=>{let i=new kt(r,t),o=new tc("",i),s=qC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new xi([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,t).pipe(Z(r=>({children:r,rootSnapshot:t})),zn(r=>{if(r instanceof ic)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Z(s=>s instanceof kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return be(o).pipe(br(s=>{let a=r.children[s],u=EL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Ku((s,a)=>(s.push(...a),s)),Tr(null),Ip(),Pe(s=>{if(s===null)return Zo(r);let a=oS(s);return a2(a),z(a)}))}processSegment(e,t,r,i,o,s,a){return be(t).pipe(br(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(zn(l=>{if(l instanceof rc)return z(null);throw l}))),Gn(u=>!!u),zn(u=>{if(nS(u))return i2(r,i,o)?z(new py):Zo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return an(r)!==s&&(s===ee||!qd(i,o,r))?Zo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Zo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=iS(t,i,o);if(!u)return Zo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s2&&(this.allowRedirects=!1));let y=new xi(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,MC(i),an(i),i.component??i._loadedComponent??null,i,PC(i)),C=Ud(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Pe(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=JL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(jt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(jt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new xi(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,MC(r),an(r),r.component??r._loadedComponent??null,r,PC(r)),N=Ud(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:V}=NC(t,m,y,l);if(V.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Z(K=>new kt(C,K)));if(l.length===0&&V.length===0)return z(new kt(C,[]));let G=an(r)===o;return this.processSegment(h,l,R,V,G?ee:o,!0,C).pipe(Z(K=>new kt(C,K instanceof kt?[K]:[])))}))):Zo(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):KL(e,t,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,t).pipe(et(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ZL(t))):z({routes:[],injector:e})}};function a2(n){n.sort((e,t)=>e.value.outlet===ee?-1:t.value.outlet===ee?1:e.value.outlet.localeCompare(t.value.outlet))}function c2(n){let e=n.value.routeConfig;return e&&e.path===""}function oS(n){let e=[],t=new Set;for(let r of n){if(!c2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=oS(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!t.has(r))}function MC(n){return n.data||{}}function PC(n){return n.resolve||{}}function u2(n,e,t,r,i,o){return Pe(s=>o2(n,e,t,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:u})=>oe(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function l2(n,e){return Pe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of sS(u))s.add(l);let a=0;return be(s).pipe(br(u=>o.has(u)?d2(u,r,n,e):(u.data=Ud(u,u.parent,n).resolve,z(void 0))),et(()=>a++),bo(1),Pe(u=>a===s.size?z(t):Et))})}function sS(n){let e=n.children.map(t=>sS(t)).flat();return[n,...e]}function d2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ZC(i)&&(o[oc]=i.title),h2(o,n,e,r).pipe(Z(s=>(n._resolvedData=s,n.data=Ud(n,n.parent,t).resolve,null)))}function h2(n,e,t,r){let i=ry(n);if(i.length===0)return z({});let o={};return be(i).pipe(Pe(s=>f2(n[s],e,t,r).pipe(Gn(),et(a=>{if(a instanceof os)throw Bd(new Or,a);o[s]=a}))),bo(1),Z(()=>o),zn(s=>nS(s)?Et:wo(s)))}function f2(n,e,t,r){let i=sc(e)??r,o=as(n,i),s=o.resolve?o.resolve(e,t):ct(i,()=>o(e,t));return Lr(s)}function ty(n){return jt(e=>{let t=n(e);return t?be(t).pipe(Z(()=>e)):z(e)})}var wy=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(t){return t.data[oc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(aS),providedIn:"root"})}return n})(),aS=(()=>{class n extends wy{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(W(TC))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vi=new L("",{providedIn:"root",factory:()=>({})}),Li=new L(""),zd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(tC);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Lr(t.loadComponent()).pipe(Z(uS),et(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ya(()=>{this.componentLoaders.delete(t)})),i=new yo(r,()=>new Oe).pipe(mo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=cS(r,this.compiler,t,this.onLoadEndListener).pipe(ya(()=>{this.childrenLoaders.delete(r)})),s=new yo(o,()=>new Oe).pipe(mo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cS(n,e,t,r){return Lr(n.loadChildren()).pipe(Z(uS),Pe(i=>i instanceof Cm||Array.isArray(i)?z(i):be(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Li,[],{optional:!0,self:!0}).flat()),{routes:s.map(Iy),injector:o}}))}function p2(n){return n&&typeof n=="object"&&"default"in n}function uS(n){return p2(n)?n.default:n}var Gd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(g2),providedIn:"root"})}return n})(),g2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ey=new L(""),Dy=new L("");function lS(n,e,t){let r=n.get(Dy),i=n.get(We);return n.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),m2(n))),{onViewTransitionCreated:u}=r;return u&&ct(n,()=>u({transition:a,from:e,to:t})),s})}function m2(n){return new Promise(e=>{lm({read:()=>setTimeout(e)},{injector:n})})}var by=new L(""),Wd=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Oe;transitionAbortSubject=new Oe;configLoader=M(zd);environmentInjector=M(at);destroyRef=M(zo);urlSerializer=M(Oi);rootContexts=M(Fi);location=M(xr);inputBindingEnabled=M(ac,{optional:!0})!==null;titleStrategy=M(wy);options=M(Vi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Gd);createViewTransition=M(Ey,{optional:!0});navigationErrorHandler=M(by,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Pd(i)),r=i=>this.events.next(new xd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(oe(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Xe(null),this.transitions.pipe(st(r=>r!==null),jt(r=>{let i=!1,o=!1;return z(r).pipe(jt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Rn(s.id,this.urlSerializer.serialize(s.rawUrl),l,ts.IgnoredSameUrlNavigation)),s.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return z(s).pipe(jt(l=>(this.events.next(new Vr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Et:Promise.resolve(l))),u2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),et(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=oe(k({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Ja(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:m,extras:y}=s,C=new Vr(l,this.urlSerializer.serialize(h),p,m);this.events.next(C);let N=QC(this.rootComponentType).snapshot;return this.currentTransition=r=oe(k({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:oe(k({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,z(r)}else{let l="";return this.events.next(new Rn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,ts.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Et}}),et(s=>{let a=new Ad(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Z(s=>(this.currentTransition=r=oe(k({},s),{guards:RL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),UL(this.environmentInjector,s=>this.events.next(s)),et(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Bd(this.urlSerializer,s.guardsResult);let a=new Rd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),st(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",St.GuardRejected),!1)),ty(s=>{if(s.guards.canActivateChecks.length!==0)return z(s).pipe(et(a=>{let u=new Nd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),jt(a=>{let u=!1;return z(a).pipe(l2(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",St.NoDataFromResolver)}}))}),et(a=>{let u=new Md(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),ty(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(et(h=>{u.component=h}),Z(()=>{})));for(let h of u.children)l.push(...a(h));return l};return ma(a(s.targetSnapshot.root)).pipe(Tr(null),mt(1))}),ty(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?be(u).pipe(Z(()=>r)):z(r)}),Z(s=>{let a=bL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=oe(k({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),et(()=>{this.events.next(new Xa)}),AL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),mt(1),et({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),wp(this.transitionAbortSubject.pipe(et(s=>{throw s}))),ya(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),zn(s=>{if(this.destroyed)return r.resolve(!1),Et;if(o=!0,tS(s))this.events.next(new Sn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),SL(s)?this.events.next(new is(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ns(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=ct(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof os){let{message:l,cancellationCode:h}=Bd(this.urlSerializer,u);this.events.next(new Sn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new is(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Sn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y2(n){return n!==Td}var dS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(v2),providedIn:"root"})}return n})(),Hd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},v2=(()=>{class n extends Hd{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Si(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hS=(()=>{class n{urlSerializer=M(Oi);options=M(Vi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(xr);urlHandlingStrategy=M(Gd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new An;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof An?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=QC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(_2),providedIn:"root"})}return n})(),_2=(()=>{class n extends hS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Vr?this.updateStateMemento():t instanceof Rn?this.commitTransition(r):t instanceof Ja?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Xa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sn&&(t.code===St.GuardRejected||t.code===St.NoDataFromResolver)?this.restoreHistory(r):t instanceof ns?this.restoreHistory(r,!0):t instanceof Gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Si(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kd(n,e){n.events.pipe(st(t=>t instanceof Gt||t instanceof Sn||t instanceof ns||t instanceof Rn),Z(t=>t instanceof Gt||t instanceof Rn?0:(t instanceof Sn?t.code===St.Redirect||t.code===St.SupersededByNewNavigation:!1)?2:1),st(t=>t!==2),mt(1)).subscribe(()=>{e()})}var I2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},At=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(GT);stateManager=M(hS);options=M(Vi,{optional:!0})||{};pendingTasks=M(Ai);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Wd);urlSerializer=M(Oi);location=M(xr);urlHandlingStrategy=M(Gd);_events=new Oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(dS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Li,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(ac,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Sn&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof is){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||y2(i.source)},s);this.scheduleNavigation(a,Td,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}D2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Td,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Iy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=zC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return GC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Fr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Td,null,r)}navigate(t,r={skipLocationChange:!1}){return E2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},I2):r===!1?i=k({},w2):i=r,Fr(t))return CC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return CC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Kd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}function D2(n){return!(n instanceof Xa)&&!(n instanceof is)}var fS=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Oe;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Gt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Fr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:uT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Fr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(le(At),le(Nn),nm("tabindex"),le(Jn),le(bn),le(sn))};static \u0275dir=tt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&xt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&od("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Mi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Mi],replaceUrl:[2,"replaceUrl","replaceUrl",Mi],routerLink:"routerLink"},features:[Ti]})}return n})();var uc=class{};var pS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(st(t=>t instanceof Gt),br(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Fa(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return be(i).pipe(Eo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=z(null);let o=i.pipe(Pe(s=>s===null?z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return be([o,s]).pipe(Eo())}else return o})}static \u0275fac=function(r){return new(r||n)(W(At),W(at),W(uc),W(zd))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gS=new L(""),b2=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Rn&&t.code===ts.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rs&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rs(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){VT()};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function Cy(n,...e){return En([{provide:Li,multi:!0,useValue:n},[],{provide:Nn,useFactory:mS,deps:[At]},{provide:id,multi:!0,useFactory:yS},e.map(t=>t.\u0275providers)])}function mS(n){return n.routerState.root}function lc(n,e){return{\u0275kind:n,\u0275providers:e}}function yS(){let n=M(Le);return e=>{let t=n.get(wi);if(e!==t.components[0])return;let r=n.get(At),i=n.get(vS);n.get(Sy)===1&&r.initialNavigation(),n.get(wS,null,te.Optional)?.setUpPreloading(),n.get(gS,null,te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var vS=new L("",{factory:()=>new Oe}),Sy=new L("",{providedIn:"root",factory:()=>1});function _S(){let n=[{provide:Sy,useValue:0},Rm(()=>{let e=M(Le);return e.get(Lm,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(At),o=e.get(vS);Kd(i,()=>{r(!0)}),e.get(Wd).afterPreactivation=()=>(r(!0),o.closed?z(void 0):o),i.initialNavigation()}))})];return lc(2,n)}function IS(){let n=[Rm(()=>{M(At).setUpLocationChangeListener()}),{provide:Sy,useValue:2}];return lc(3,n)}var wS=new L("");function ES(n){return lc(0,[{provide:wS,useExisting:pS},{provide:uc,useExisting:n}])}function DS(){return lc(8,[vy,{provide:ac,useExisting:vy}])}function bS(n){Ko("NgRouterViewTransitions");let e=[{provide:Ey,useValue:lS},{provide:Dy,useValue:k({skipNextTransition:!!n?.skipInitialTransition},n)}];return lc(9,e)}var TS=[xr,{provide:Oi,useClass:Or},At,Fi,{provide:Nn,useFactory:mS,deps:[At]},zd,[]],T2=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[TS,[],{provide:Li,multi:!0,useValue:t},[],r?.errorHandler?{provide:by,useValue:r.errorHandler}:[],{provide:Vi,useValue:r||{}},r?.useHash?S2():A2(),C2(),r?.preloadingStrategy?ES(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?R2(r):[],r?.bindToComponentInputs?DS().\u0275providers:[],r?.enableViewTransitions?bS().\u0275providers:[],N2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Li,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tn({type:n});static \u0275inj=wn({})}return n})();function C2(){return{provide:gS,useFactory:()=>{let n=M(gC),e=M(ge),t=M(Vi),r=M(Wd),i=M(Oi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new b2(i,r,n,e,t)}}}function S2(){return{provide:sn,useClass:Bm}}function A2(){return{provide:sn,useClass:ld}}function R2(n){return[n.initialNavigation==="disabled"?IS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_S().\u0275providers:[]]}var Ty=new L("");function N2(){return[{provide:Ty,useFactory:yS},{provide:id,multi:!0,useExisting:Ty}]}var kS=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(le(Jn),le(bn))};static \u0275dir=tt({type:n})}return n})(),Py=(()=>{class n extends kS{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Si(n)))(i||n)}})();static \u0275dir=tt({type:n,features:[Rr]})}return n})(),Xd=new L("");var M2={provide:Xd,useExisting:bi(()=>eh),multi:!0};function P2(){let n=zt()?zt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var x2=new L(""),eh=(()=>{class n extends kS{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!P2())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(le(Jn),le(bn),le(x2,8))};static \u0275dir=tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&xt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[La([M2]),Rr]})}return n})();var k2=new L(""),O2=new L("");function OS(n){return n!=null}function FS(n){return Nr(n)?be(n):n}function VS(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function LS(n,e){return e.map(t=>t(n))}function F2(n){return!n.validate}function jS(n){return n.map(e=>F2(e)?e:t=>e.validate(t))}function V2(n){if(!n)return null;let e=n.filter(OS);return e.length==0?null:function(t){return VS(LS(t,e))}}function US(n){return n!=null?V2(jS(n)):null}function L2(n){if(!n)return null;let e=n.filter(OS);return e.length==0?null:function(t){let r=LS(t,e).map(FS);return _p(r).pipe(Z(VS))}}function BS(n){return n!=null?L2(jS(n)):null}function CS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function j2(n){return n._rawValidators}function U2(n){return n._rawAsyncValidators}function Ay(n){return n?Array.isArray(n)?n:[n]:[]}function Yd(n,e){return Array.isArray(n)?n.includes(e):n===e}function SS(n,e){let t=Ay(e);return Ay(n).forEach(i=>{Yd(t,i)||t.push(i)}),t}function AS(n,e){return Ay(e).filter(t=>!Yd(n,t))}var Zd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=US(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ry=class extends Zd{name;get formDirective(){return null}get path(){return null}},gc=class extends Zd{_parent=null;name=null;valueAccessor=null},Ny=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},B2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},PQ=oe(k({},B2),{"[class.ng-submitted]":"isSubmitted"}),$S=(()=>{class n extends Ny{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(le(gc,2))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Nm("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Rr]})}return n})();var dc="VALID",Qd="INVALID",cs="PENDING",hc="DISABLED",ls=class{},Jd=class extends ls{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fc=class extends ls{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},pc=class extends ls{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},us=class extends ls{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function $2(n){return(th(n)?n.validators:n)||null}function H2(n){return Array.isArray(n)?US(n):n||null}function q2(n,e){return(th(e)?e.asyncValidators:n)||null}function z2(n){return Array.isArray(n)?BS(n):n||null}function th(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var My=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nn(this.statusReactive)}set status(e){nn(()=>this.statusReactive.set(e))}_status=ja(()=>this.statusReactive());statusReactive=Oa(void 0);get valid(){return this.status===dc}get invalid(){return this.status===Qd}get pending(){return this.status==cs}get disabled(){return this.status===hc}get enabled(){return this.status!==hc}errors;get pristine(){return nn(this.pristineReactive)}set pristine(e){nn(()=>this.pristineReactive.set(e))}_pristine=ja(()=>this.pristineReactive());pristineReactive=Oa(!0);get dirty(){return!this.pristine}get touched(){return nn(this.touchedReactive)}set touched(e){nn(()=>this.touchedReactive.set(e))}_touched=ja(()=>this.touchedReactive());touchedReactive=Oa(!1);get untouched(){return!this.touched}_events=new Oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AS(e,this._rawAsyncValidators))}hasValidator(e){return Yd(this._rawValidators,e)}hasAsyncValidator(e){return Yd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new pc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new fc(!0,r))}markAsPending(e={}){this.status=cs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new us(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hc,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jd(this.value,r)),this._events.next(new us(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=dc,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dc||this.status===cs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jd(this.value,t)),this._events.next(new us(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hc:dc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=FS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new us(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?hc:this.errors?Qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cs)?cs:this._anyControlsHaveStatus(Qd)?Qd:dc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new pc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){th(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=H2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=z2(this._rawAsyncValidators)}};var xy=new L("",{providedIn:"root",factory:()=>nh}),nh="always";function G2(n,e){return[...e.path,n]}function W2(n,e,t=nh){Q2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Y2(n,e),J2(n,e),Z2(n,e),K2(n,e)}function RS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function K2(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Q2(n,e){let t=j2(n);e.validator!==null?n.setValidators(CS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=U2(n);e.asyncValidator!==null?n.setAsyncValidators(CS(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();RS(e._rawValidators,i),RS(e._rawAsyncValidators,i)}function Y2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HS(n,e)})}function Z2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function HS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function J2(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function X2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ej(n){return Object.getPrototypeOf(n.constructor)===Py}function tj(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===eh?t=o:ej(o)?r=o:i=o}),i||r||t||null}function NS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function MS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nj=class extends My{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super($2(t),q2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),th(t)&&(t.nonNullable||t.initialValueIsDefault)&&(MS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){MS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var rj={provide:gc,useExisting:bi(()=>ky)},PS=Promise.resolve(),ky=(()=>{class n extends gc{_changeDetectorRef;callSetDisabledState;control=new nj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ge;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=tj(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),X2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){W2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){PS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Mi(r);PS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?G2(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(le(Ry,9),le(k2,10),le(O2,10),le(Xd,10),le(Pr,8),le(xy,8))};static \u0275dir=tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[La([rj]),Rr,Ti]})}return n})();var ij=new L("");var oj={provide:Xd,useExisting:bi(()=>zS),multi:!0};function qS(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sj(n){return n.split(":")[0]}var zS=(()=>{class n extends Py{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=qS(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=sj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Si(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&xt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[La([oj]),Rr]})}return n})(),kQ=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(le(bn),le(Jn),le(zS,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),aj={provide:Xd,useExisting:bi(()=>GS),multi:!0};function xS(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function cj(n){return n.split(":")[0]}var GS=(()=>{class n extends Py{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=cj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Si(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&xt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[La([aj]),Rr]})}return n})(),OQ=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(xS(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xS(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(le(bn),le(Jn),le(GS,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var WS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tn({type:n});static \u0275inj=wn({})}return n})();var KS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xy,useValue:t.callSetDisabledState??nh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tn({type:n});static \u0275inj=wn({imports:[WS]})}return n})(),QS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ij,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xy,useValue:t.callSetDisabledState??nh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tn({type:n});static \u0275inj=wn({imports:[WS]})}return n})();var YS=()=>{};var XS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},rh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Fy;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dj=function(n){let e=XS(n);return rh.encodeByteArray(e,!0)},yc=function(n){return dj(n).replace(/\./g,"")},ih=function(n){try{return rh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ly(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hj=()=>Ly().__FIREBASE_DEFAULTS__,fj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ih(n[1]);return e&&JSON.parse(e)},oh=()=>{try{return YS()||hj()||fj()||pj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jy=n=>{var e,t;return(t=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},e0=n=>{let e=jy(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Uy=()=>{var n;return(n=oh())===null||n===void 0?void 0:n.config},By=n=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${n}`]};var ji=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function jr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function sh(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function t0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[yc(JSON.stringify(t)),yc(JSON.stringify(s)),""].join(".")}var mc={};function gj(){let n={prod:[],emulator:[]};for(let e of Object.keys(mc))mc[e]?n.emulator.push(e):n.prod.push(e);return n}function mj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ZS=!1;function ah(n,e){if(typeof window>"u"||typeof document>"u"||!jr(window.location.host)||mc[n]===e||mc[n]||ZS)return;mc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=gj().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ZS=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=mj(r),y=t("text"),C=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),V=t("preprendIcon"),G=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let K=m.element;a(K),h(R,N);let we=l();u(G,V),K.append(G,C,R,we),document.body.appendChild(K)}o?(C.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function yj(){var n;let e=(n=oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function o0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s0(){let n=Ke();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function a0(){return!yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vc(){try{return typeof indexedDB=="object"}catch{return!1}}function c0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var vj="FirebaseError",Ft=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}},cn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_j(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ft(i,a,r)}};function _j(n,e){return n.replace(Ij,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Ij=/\{\$([^}]+)}/g;function u0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Mn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(JS(o)&&JS(s)){if(!Mn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function JS(n){return n!==null&&typeof n=="object"}function ds(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hs(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function fs(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function l0(n,e){let t=new Vy(n,e);return t.subscribe.bind(t)}var Vy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Oy),i.error===void 0&&(i.error=Oy),i.complete===void 0&&(i.complete=Oy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function wj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Oy(){}var jQ=4*60*60*1e3;function xe(n){return n&&n._delegate?n._delegate:n}var It=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ui="[DEFAULT]";var $y=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ji;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dj(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ej(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ej(n){return n===Ui?void 0:n}function Dj(n){return n.instantiationMode==="EAGER"}var ch=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var bj=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),Tj={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Cj=ce.INFO,Sj={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Aj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Sj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pn=class{constructor(e){this.name=e,this._logLevel=Cj,this._logHandler=Aj,this._userLogHandler=null,bj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var Rj=(n,e)=>e.some(t=>n instanceof t),d0,h0;function Nj(){return d0||(d0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mj(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var f0=new WeakMap,qy=new WeakMap,p0=new WeakMap,Hy=new WeakMap,Gy=new WeakMap;function Pj(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(xn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&f0.set(t,n)}).catch(()=>{}),Gy.set(e,n),e}function xj(n){if(qy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});qy.set(n,e)}var zy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||p0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function g0(n){zy=n(zy)}function kj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(uh(this),e,...t);return p0.set(r,e.sort?e.sort():[e]),xn(r)}:Mj().includes(n)?function(...e){return n.apply(uh(this),e),xn(f0.get(this))}:function(...e){return xn(n.apply(uh(this),e))}}function Oj(n){return typeof n=="function"?kj(n):(n instanceof IDBTransaction&&xj(n),Rj(n,Nj())?new Proxy(n,zy):n)}function xn(n){if(n instanceof IDBRequest)return Pj(n);if(Hy.has(n))return Hy.get(n);let e=Oj(n);return e!==n&&(Hy.set(n,e),Gy.set(e,n)),e}var uh=n=>Gy.get(n);function y0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=xn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(xn(s.result),u.oldVersion,u.newVersion,xn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Fj=["get","getKey","getAll","getAllKeys","count"],Vj=["put","add","delete","clear"],Wy=new Map;function m0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wy.get(e))return Wy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Vj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fj.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Wy.set(e,o),o}g0(n=>oe(k({},n),{get:(e,t,r)=>m0(e,t)||n.get(e,t,r),has:(e,t)=>!!m0(e,t)||n.has(e,t)}));var Qy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Lj(n){let e=n.getComponent();return e?.type==="VERSION"}var Yy="@firebase/app",v0="0.13.2";var Xn=new Pn("@firebase/app"),jj="@firebase/app-compat",Uj="@firebase/analytics-compat",Bj="@firebase/analytics",$j="@firebase/app-check-compat",Hj="@firebase/app-check",qj="@firebase/auth",zj="@firebase/auth-compat",Gj="@firebase/database",Wj="@firebase/data-connect",Kj="@firebase/database-compat",Qj="@firebase/functions",Yj="@firebase/functions-compat",Zj="@firebase/installations",Jj="@firebase/installations-compat",Xj="@firebase/messaging",eU="@firebase/messaging-compat",tU="@firebase/performance",nU="@firebase/performance-compat",rU="@firebase/remote-config",iU="@firebase/remote-config-compat",oU="@firebase/storage",sU="@firebase/storage-compat",aU="@firebase/firestore",cU="@firebase/ai",uU="@firebase/firestore-compat",lU="firebase",dU="11.10.0";var Zy="[DEFAULT]",hU={[Yy]:"fire-core",[jj]:"fire-core-compat",[Bj]:"fire-analytics",[Uj]:"fire-analytics-compat",[Hj]:"fire-app-check",[$j]:"fire-app-check-compat",[qj]:"fire-auth",[zj]:"fire-auth-compat",[Gj]:"fire-rtdb",[Wj]:"fire-data-connect",[Kj]:"fire-rtdb-compat",[Qj]:"fire-fn",[Yj]:"fire-fn-compat",[Zj]:"fire-iid",[Jj]:"fire-iid-compat",[Xj]:"fire-fcm",[eU]:"fire-fcm-compat",[tU]:"fire-perf",[nU]:"fire-perf-compat",[rU]:"fire-rc",[iU]:"fire-rc-compat",[oU]:"fire-gcs",[sU]:"fire-gcs-compat",[aU]:"fire-fst",[uU]:"fire-fst-compat",[cU]:"fire-vertex","fire-js":"fire-js",[lU]:"fire-js-all"};var _c=new Map,fU=new Map,Jy=new Map;function _0(n,e){try{n.container.addComponent(e)}catch(t){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function un(n){let e=n.name;if(Jy.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Jy.set(e,n);for(let t of _c.values())_0(t,n);for(let t of fU.values())_0(t,n);return!0}function ps(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wt(n){return n==null?!1:n.settings!==void 0}var pU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new cn("app","Firebase",pU);var Xy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new It("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}};var Br=dU;function nv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Zy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(t||(t=Uy()),!t)throw Ur.create("no-options");let o=_c.get(i);if(o){if(Mn(t,o.options)&&Mn(r,o.config))return o;throw Ur.create("duplicate-app",{appName:i})}let s=new ch(i);for(let u of Jy.values())s.addComponent(u);let a=new Xy(t,r,s);return _c.set(i,a),a}function Bi(n=Zy){let e=_c.get(n);if(!e&&n===Zy&&Uy())return nv();if(!e)throw Ur.create("no-app",{appName:n});return e}function lh(){return Array.from(_c.values())}function Ne(n,e,t){var r;let i=(r=hU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}un(new It(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gU="firebase-heartbeat-database",mU=1,Ic="firebase-heartbeat-store",Ky=null;function D0(){return Ky||(Ky=y0(gU,mU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ur.create("idb-open",{originalErrorMessage:n.message})})),Ky}function yU(n){return v(this,null,function*(){try{let t=(yield D0()).transaction(Ic),r=yield t.objectStore(Ic).get(b0(n));return yield t.done,r}catch(e){if(e instanceof Ft)Xn.warn(e.message);else{let t=Ur.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(t.message)}}})}function I0(n,e){return v(this,null,function*(){try{let r=(yield D0()).transaction(Ic,"readwrite");yield r.objectStore(Ic).put(e,b0(n)),yield r.done}catch(t){if(t instanceof Ft)Xn.warn(t.message);else{let r=Ur.create("idb-set",{originalErrorMessage:t?.message});Xn.warn(r.message)}}})}function b0(n){return`${n.name}!${n.options.appId}`}var vU=1024,_U=30,ev=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=w0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>_U){let s=wU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=w0(),{heartbeatsToSend:r,unsentEntries:i}=IU(this._heartbeatsCache.heartbeats),o=yc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xn.warn(t),""}})}};function w0(){return new Date().toISOString().substring(0,10)}function IU(n,e=vU){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),E0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),E0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var tv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return vc()?c0().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield yU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return I0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function E0(n){return yc(JSON.stringify({version:2,heartbeats:n})).length}function wU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function EU(n){un(new It("platform-logger",e=>new Qy(e),"PRIVATE")),un(new It("heartbeat",e=>new ev(e),"PRIVATE")),Ne(Yy,v0,n),Ne(Yy,v0,"esm2017"),Ne("fire-js","")}EU("");var DU="firebase",bU="11.10.0";Ne(DU,bU,"app");function rv(n){n===void 0&&(Gg(rv),n=M(Le));let e=n.get(Wl);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var $r=new Di("ANGULARFIRE2_VERSION");function wc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ms=(n,e)=>{let t=e?[e]:lh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},gs=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(gs||{}),T0=Om()&&typeof Zone<"u"?gs.WARN:gs.SILENT;var dh=class{zone;delegate;constructor(e,t=yp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Hr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(ge);this.outsideAngular=t.runOutsideAngular(()=>new dh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new dh(typeof Zone>"u"?void 0:Zone.current,ga))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C0=!1;function TU(n,e){!C0&&(T0>gs.SILENT||Om())&&(C0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),T0>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function CU(n){let e=M(ge,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function $i(n){let e=M(ge,{optional:!0});return e?e.run(()=>n()):n()}var SU=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ct(t,()=>$i(()=>n.apply(void 0,r)))),ke=(n,e,t)=>(t||=e?gs.WARN:gs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(Hr),s=M(Wl),a=M(at)}catch{return TU(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=$i(()=>s.add())),i[l]=SU(i[l],r,a));let u=CU(()=>n.apply(this,i));return e?u instanceof ne?u.pipe(Dr(o.outsideAngular),Er(o.insideAngular),rv(a)):u instanceof Promise?$i(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>ct(a,()=>$i(()=>l(p))),p=>ct(a,()=>$i(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:$i(()=>u):u instanceof ne?u.pipe(Dr(o.outsideAngular),Er(o.insideAngular)):$i(()=>u)});var er=class{constructor(e){return e}},Hi=class{constructor(){return lh()}};function AU(n){return n&&n.length===1?n[0]:new er(Bi())}var iv=new L("angularfire2._apps"),RU={provide:er,useFactory:AU,deps:[[new Mt,iv]]},NU={provide:Hi,deps:[[new Mt,iv]]};function MU(n){return(e,t)=>{let r=t.get(Ar);Ne("angularfire",$r.full,"core"),Ne("angularfire",$r.full,"app"),Ne("angular",eC.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function S0(n,...e){return En([RU,NU,{provide:iv,useFactory:MU(n),multi:!0,deps:[ge,Le,Hr,...e]}])}var A0=ke(nv,!0);var PU=new Map,xU={activated:!1,tokenObservers:[]},kU={initialized:!1,enabled:!1};function ln(n){return PU.get(n)||Object.assign({},xU)}function P0(){return kU}var OU="https://content-firebaseappcheck.googleapis.com/v1";var FU="exchangeDebugToken",R0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},zY=24*60*60*1e3;var av=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new ji,this.pending.promise.catch(t=>{}),yield VU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ji,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function VU(n){return new Promise(e=>{setTimeout(e,n)})}var LU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},qr=new cn("appCheck","AppCheck",LU);function x0(n){if(!ln(n).activated)throw qr.create("use-before-activation",{appName:n.name})}function k0(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw qr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw qr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw qr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function O0(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${OU}/projects/${t}/apps/${r}:${FU}?key=${i}`,body:{debug_token:e}}}var jU="firebase-app-check-database",UU=1,cv="firebase-app-check-store";var hh=null;function BU(){return hh||(hh=new Promise((n,e)=>{try{let t=indexedDB.open(jU,UU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cv,{keyPath:"compositeKey"})}}}catch(t){e(qr.create("storage-open",{originalErrorMessage:t?.message}))}}),hh)}function $U(n,e){return HU(qU(n),e)}function HU(n,e){return v(this,null,function*(){let r=(yield BU()).transaction(cv,"readwrite"),o=r.objectStore(cv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(qr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function qU(n){return`${n.options.appId}-${n.name}`}var Ec=new Pn("@firebase/app-check");function ov(n,e){return vc()?$U(n,e).catch(t=>{Ec.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function F0(){return P0().enabled}function V0(){return v(this,null,function*(){let n=P0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zU={error:"UNKNOWN_ERROR"};function GU(n){return rh.encodeString(JSON.stringify(n),!1)}function uv(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;x0(r);let i=ln(r),o=i.token,s;if(o&&!Dc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Dc(l)?o=l:yield ov(r,void 0))}if(!e&&o&&Dc(o))return{token:o.token};let a=!1;if(F0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=k0(O0(r,yield V0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield ov(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ec.warn(l.message):t&&Ec.error(l),sv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ec.warn(l.message):t&&Ec.error(l),s=l}let u;return o?s?Dc(o)?u={token:o.token,internalError:s}:u=sv(s):(u={token:o.token},i.token=o,yield ov(r,o)):u=sv(s),a&&YU(r,u),u})}function WU(n){return v(this,null,function*(){let e=n.app;x0(e);let{provider:t}=ln(e);if(F0()){let r=yield V0(),{token:i}=yield k0(O0(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function KU(n,e,t,r){let{app:i}=n,o=ln(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Dc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),N0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>N0(n))}function L0(n,e){let t=ln(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function N0(n){let{app:e}=n,t=ln(e),r=t.tokenRefresher;r||(r=QU(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function QU(n){let{app:e}=n;return new av(()=>v(null,null,function*(){let t=ln(e),r;if(t.token?r=yield uv(n,!0):r=yield uv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ln(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},R0.RETRIAL_MIN_WAIT,R0.RETRIAL_MAX_WAIT)}function YU(n,e){let t=ln(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Dc(n){return n.expireTimeMillis-Date.now()>0}function sv(n){return{token:GU(zU),error:n}}var lv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ln(this.app);for(let t of e)L0(this.app,t.next);return Promise.resolve()}};function ZU(n,e){return new lv(n,e)}function JU(n){return{getToken:e=>uv(n,e),getLimitedUseToken:()=>WU(n),addTokenListener:e=>KU(n,"INTERNAL",e),removeTokenListener:e=>L0(n.app,e)}}var XU="@firebase/app-check",eB="0.10.1";var tB="app-check",M0="app-check-internal";function nB(){un(new It(tB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return ZU(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(M0).initialize()})),un(new It(M0,n=>{let e=n.getProvider("app-check").getImmediate();return JU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(XU,eB)}nB();var rB="app-check";var ys=class{constructor(){return ms(rB)}};var iB=["localhost","0.0.0.0","127.0.0.1"],iZ=typeof window<"u"&&iB.includes(window.location.hostname);function eA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tA=eA,nA=new cn("auth","Firebase",eA());var vh=new Pn("@firebase/auth");function oB(n,...e){vh.logLevel<=ce.WARN&&vh.warn(`Auth (${Br}): ${n}`,...e)}function ph(n,...e){vh.logLevel<=ce.ERROR&&vh.error(`Auth (${Br}): ${n}`,...e)}function Wt(n,...e){throw Pv(n,...e)}function dn(n,...e){return Pv(n,...e)}function Mv(n,e,t){let r=Object.assign(Object.assign({},tA()),{[e]:t});return new cn("auth","Firebase",r).create(e,{appName:n.name})}function rr(n){return Mv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sB(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wt(n,"argument-error"),Mv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return nA.create(n,...e)}function $(n,e,...t){if(!n)throw Pv(e,...t)}function tr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ph(e),new Error(e)}function ir(n,e){n||tr(e)}function fv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aB(){return j0()==="http:"||j0()==="https:"}function j0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aB()||i0()||"connection"in navigator)?navigator.onLine:!0}function uB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var qi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=n0()||o0()}get(){return cB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xv(n,e){ir(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var _h=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hB=new qi(3e4,6e4);function or(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function sr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return rA(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ds(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return r0()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&jr(n.emulatorConfig.host)&&(y.credentials="include"),_h.fetch()(yield iA(n,n.config.apiHost,t,p),y)}))})}function rA(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},lB),e);try{let i=new pv(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw fh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw fh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw fh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Mv(n,h,l);Wt(n,h)}}catch(i){if(i instanceof Ft)throw i;Wt(n,"network-request-failed",{message:String(i)})}})}function Pc(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield sr(n,e,t,r,i);return"mfaPendingCredential"in l&&Wt(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function iA(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?xv(n.config,i):`${n.config.apiScheme}://${i}`;return dB.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function fB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var pv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),hB.get())})}};function fh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=dn(n,e,r);return i.customData._tokenResponse=t,i}function U0(n){return n!==void 0&&n.enterprise!==void 0}var gv=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function pB(n,e){return v(this,null,function*(){return sr(n,"GET","/v2/recaptchaConfig",or(n,e))})}function gB(n,e){return v(this,null,function*(){return sr(n,"POST","/v1/accounts:delete",e)})}function Ih(n,e){return v(this,null,function*(){return sr(n,"POST","/v1/accounts:lookup",e)})}function Tc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function kv(n,e=!1){return v(this,null,function*(){let t=xe(n),r=yield t.getIdToken(e),i=Ov(r);$(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Tc(dv(i.auth_time)),issuedAtTime:Tc(dv(i.iat)),expirationTime:Tc(dv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dv(n){return Number(n)*1e3}function Ov(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{let i=ih(t);return i?JSON.parse(i):(ph("Failed to decode base64 JWT payload"),null)}catch(i){return ph("Caught error parsing JWT payload as JSON",i?.toString()),null}}function B0(n){let e=Ov(n);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Sc(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ft&&mB(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function mB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ac=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wh(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Sc(n,Ih(t,{idToken:r}));$(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?oA(o.providerUserInfo):[],a=yB(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ac(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Fv(n){return v(this,null,function*(){let e=xe(n);yield wh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function yB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oA(n){return n.map(e=>{var{providerId:t}=e,r=Mu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function vB(n,e){return v(this,null,function*(){let t=yield rA(n,{},()=>v(null,null,function*(){let r=ds({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield iA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&jr(n.emulatorConfig.host)&&(u.credentials="include"),_h.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function _B(n,e){return v(this,null,function*(){return sr(n,"POST","/v2/accounts:revokeToken",or(n,e))})}var Cc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,"internal-error");let t=B0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield vB(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&($(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&($(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return tr("not implemented")}};function zr(n,e){$(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Gr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Mu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ac(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Sc(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return kv(this,e)}reload(){return Fv(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield wh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(wt(this.auth.app))return Promise.reject(rr(this.auth));let e=yield this.getIdToken();return yield Sc(this,gB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:we,isAnonymous:ht,providerData:ve,stsTokenManager:D}=t;$(K&&D,e,"internal-error");let _=Cc.fromJSON(this.name,D);$(typeof K=="string",e,"internal-error"),zr(p,e.name),zr(m,e.name),$(typeof we=="boolean",e,"internal-error"),$(typeof ht=="boolean",e,"internal-error"),zr(y,e.name),zr(C,e.name),zr(N,e.name),zr(R,e.name),zr(V,e.name),zr(G,e.name);let w=new n({uid:K,auth:e,email:m,emailVerified:we,displayName:p,isAnonymous:ht,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:V,lastLoginAt:G});return ve&&Array.isArray(ve)&&(w.providerData=ve.map(E=>Object.assign({},E))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Cc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wh(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];$(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?oA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ac(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var $0=new Map;function nr(n){ir(n instanceof Function,"Expected a class definition");let e=$0.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$0.set(n,e),e)}var IB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yv=IB;function gh(n,e,t){return`firebase:${n}:${e}:${t}`}var Eh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=gh(this.userKey,i.apiKey,o),this.fullPersistenceKey=gh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ih(this.auth,{idToken:e}).catch(()=>{});return t?Gr._fromGetAccountInfoResponse(this.auth,t,e):null}return Gr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(nr(yv),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(yv),s=gh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Ih(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Gr._fromGetAccountInfoResponse(e,m,h)}else p=Gr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function H0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dA(e))return"Blackberry";if(hA(e))return"Webos";if(aA(e))return"Safari";if((e.includes("chrome/")||cA(e))&&!e.includes("edge/"))return"Chrome";if(lA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sA(n=Ke()){return/firefox\//i.test(n)}function aA(n=Ke()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cA(n=Ke()){return/crios\//i.test(n)}function uA(n=Ke()){return/iemobile/i.test(n)}function lA(n=Ke()){return/android/i.test(n)}function dA(n=Ke()){return/blackberry/i.test(n)}function hA(n=Ke()){return/webos/i.test(n)}function Vv(n=Ke()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function wB(n=Ke()){var e;return Vv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EB(){return s0()&&document.documentMode===10}function fA(n=Ke()){return Vv(n)||lA(n)||hA(n)||dA(n)||/windows phone/i.test(n)||uA(n)}function pA(n,e=[]){let t;switch(n){case"Browser":t=H0(Ke());break;case"Worker":t=`${H0(Ke())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Br}/${r}`}var vv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function DB(t){return v(this,arguments,function*(n,e={}){return sr(n,"GET","/v2/passwordPolicy",or(n,e))})}var bB=6,_v=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:bB,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Iv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dh(this),this.idTokenSubscription=new Dh(this),this.beforeStateQueue=new vv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Eh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Ih(this,{idToken:e}),r=yield Gr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(wt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield wh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uB()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(wt(this.app))return Promise.reject(rr(this));let t=e?xe(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return wt(this.app)?Promise.reject(rr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return wt(this.app)?Promise.reject(rr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield DB(this),t=new _v(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield _B(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&nr(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=yield Eh.create(this,[nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ar(n){return xe(n)}var Dh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=l0(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xh={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TB(n){xh=n}function gA(n){return xh.loadJS(n)}function CB(){return xh.recaptchaEnterpriseScript}function SB(){return xh.gapiScript}function mA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var wv=class{constructor(){this.enterprise=new Ev}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Ev=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var AB="recaptcha-enterprise",yA="NO_RECAPTCHA",Dv=class{constructor(e){this.type=AB,this.auth=ar(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){pB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new gv(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;U0(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(yA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&U0(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=CB();u.length!==0&&(u+=a),gA(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function bc(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new Dv(n),s;if(i)s=yA;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function bh(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield bc(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield bc(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield bc(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield bc(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield bc(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Lv(n,e){let t=ps(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Mn(o,e??{}))return i;Wt(i,"already-initialized")}return t.initialize({options:e})}function RB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function jv(n,e,t){let r=ar(n);$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=vA(e),{host:s,port:a}=NB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$(Mn(l,r.config.emulator)&&Mn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,jr(s)?(sh(`${o}//${s}${u}`),ah("Auth",!0)):i||MB()}function vA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NB(n){let e=vA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:q0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:q0(s)}}}function q0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function MB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var _s=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,t){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}};function PB(n,e){return v(this,null,function*(){return sr(n,"POST","/v1/accounts:signUp",e)})}function xB(n,e){return v(this,null,function*(){return Pc(n,"POST","/v1/accounts:signInWithPassword",or(n,e))})}function _A(n,e){return v(this,null,function*(){return sr(n,"POST","/v1/accounts:sendOobCode",or(n,e))})}function kB(n,e){return v(this,null,function*(){return _A(n,e)})}function OB(n,e){return v(this,null,function*(){return _A(n,e)})}function FB(n,e){return v(this,null,function*(){return Pc(n,"POST","/v1/accounts:signInWithEmailLink",or(n,e))})}function VB(n,e){return v(this,null,function*(){return Pc(n,"POST","/v1/accounts:signInWithEmailLink",or(n,e))})}var Rc=class n extends _s{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bh(e,t,"signInWithPassword",xB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return FB(e,{email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bh(e,r,"signUpPassword",PB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return VB(e,{idToken:t,email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function vs(n,e){return v(this,null,function*(){return Pc(n,"POST","/v1/accounts:signInWithIdp",or(n,e))})}var LB="http://localhost",Th=class n extends _s{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Mu(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return vs(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,vs(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,vs(e,t)}buildRequest(){let e={requestUri:LB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ds(t)}return e}};function jB(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UB(n){let e=hs(fs(n)).link,t=e?hs(fs(e)).deep_link_id:null,r=hs(fs(n)).deep_link_id;return(r?hs(fs(r)).link:null)||r||t||e||n}var Ch=class n{constructor(e){var t,r,i,o,s,a;let u=hs(fs(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=jB((i=u.mode)!==null&&i!==void 0?i:null);$(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=UB(e);try{return new n(t)}catch{return null}}};var IA=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Rc._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ch.parseLink(r);return $(i,"argument-error"),Rc._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Nc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Sh=class extends Nc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Uv=(()=>{class n extends Sh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Th._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function BB(n,e){return v(this,null,function*(){return Pc(n,"POST","/v1/accounts:signUp",or(n,e))})}var Is=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Gr._fromIdTokenResponse(e,r,i),s=z0(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=z0(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function z0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var bv=class n extends Ft{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function wA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?bv._fromErrorAndOperation(n,o,e,r):o})}function $B(n,e,t=!1){return v(this,null,function*(){let r=yield Sc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Is._forOperation(n,"link",r)})}function HB(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(wt(r.app))return Promise.reject(rr(r));let i="reauthenticate";try{let o=yield Sc(n,wA(r,i,e,n),t);$(o.idToken,r,"internal-error");let s=Ov(o.idToken);$(s,r,"internal-error");let{sub:a}=s;return $(n.uid===a,r,"user-mismatch"),Is._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wt(r,"user-mismatch"),o}})}function EA(n,e,t=!1){return v(this,null,function*(){if(wt(n.app))return Promise.reject(rr(n));let r="signIn",i=yield wA(n,r,e),o=yield Is._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Bv(n,e){return v(this,null,function*(){return EA(ar(n),e)})}function DA(n,e,t){var r;$(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),$(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),$(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&($(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&($(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function bA(n){return v(this,null,function*(){let e=ar(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function $v(n,e,t){return v(this,null,function*(){let r=ar(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&DA(r,i,t),yield bh(r,i,"getOobCode",OB,"EMAIL_PASSWORD_PROVIDER")})}function Hv(n,e,t){return v(this,null,function*(){if(wt(n.app))return Promise.reject(rr(n));let r=ar(n),s=yield bh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BB,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bA(n),u}),a=yield Is._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function qv(n,e,t){return wt(n.app)?Promise.reject(rr(n)):Bv(xe(n),IA.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&bA(n),r}))}function zv(n,e){return v(this,null,function*(){let t=xe(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&DA(t.auth,i,e);let{email:o}=yield kB(t.auth,i);o!==n.email&&(yield n.reload())})}function xc(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function Gv(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}function Wv(n){return xe(n).signOut()}var Ah="__sak";var Rh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qB=1e3,zB=10,GB=(()=>{class n extends Rh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);EB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,zB):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},qB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Ir(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Ir(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Ir(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),TA=GB;var WB=(()=>{class n extends Rh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Kv=WB;function KB(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var QB=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield KB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Qv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Tv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=Qv("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function kn(){return window}function YB(n){kn().location.href=n}function CA(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}function ZB(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function JB(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function XB(){return CA()?self:null}var SA="firebaseLocalStorageDb",e$=1,Nh="firebaseLocalStorage",AA="fbase_key",zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function kh(n,e){return n.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function t$(){let n=indexedDB.deleteDatabase(SA);return new zi(n).toPromise()}function Cv(){let n=indexedDB.open(SA,e$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Nh,{keyPath:AA})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),yield t$(),e(yield Cv()))}))})}function G0(n,e,t){return v(this,null,function*(){let r=kh(n,!0).put({[AA]:e,value:t});return new zi(r).toPromise()})}function n$(n,e){return v(this,null,function*(){let t=kh(n,!1).get(e),r=yield new zi(t).toPromise();return r===void 0?null:r.value})}function W0(n,e){let t=kh(n,!0).delete(e);return new zi(t).toPromise()}var r$=800,i$=3,o$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Cv(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>i$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return CA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=QB._getInstance(XB()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield ZB(),!this.activeServiceWorker)return;this.sender=new Tv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||JB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Cv();return yield G0(t,Ah,"1"),yield W0(t,Ah),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>G0(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>n$(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>W0(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=kh(o,!1).getAll();return new zi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),RA=o$;var hZ=mA("rcb"),fZ=new qi(3e4,6e4);function NA(n,e){return e?nr(e):($(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Mc=class extends _s{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vs(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function s$(n){return EA(n.auth,new Mc(n),n.bypassAuthState)}function a$(n){let{auth:e,user:t}=n;return $(t,e,"internal-error"),HB(t,new Mc(n),n.bypassAuthState)}function c$(n){return v(this,null,function*(){let{auth:e,user:t}=n;return $(t,e,"internal-error"),$B(t,new Mc(n),n.bypassAuthState)})}var Mh=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s$;case"linkViaPopup":case"linkViaRedirect":return c$;case"reauthViaPopup":case"reauthViaRedirect":return a$;default:Wt(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var u$=new qi(2e3,1e4);function Yv(n,e,t){return v(this,null,function*(){if(wt(n.app))return Promise.reject(dn(n,"operation-not-supported-in-this-environment"));let r=ar(n);sB(n,e,Nc);let i=NA(r,t);return new l$(r,"signInViaPopup",e,i).executeNotNull()})}var l$=(()=>{class n extends Mh{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return $(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){ir(this.filter.length===1,"Popup operations only handle one event");let t=Qv();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,u$.get())};t()}}n.currentPopupAction=null;return n})(),d$="pendingRedirect",mh=new Map,Sv=class n extends Mh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=mh.get(this.auth._key());if(!e){try{let r=(yield h$(this.resolver,this.auth))?yield Ir(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Ir(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ir(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function h$(n,e){return v(this,null,function*(){let t=g$(e),r=p$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function f$(n,e){mh.set(n._key(),e)}function p$(n){return nr(n._redirectPersistence)}function g$(n){return gh(d$,n.config.apiKey,n.name)}function m$(n,e,t=!1){return v(this,null,function*(){if(wt(n.app))return Promise.reject(rr(n));let r=ar(n),i=NA(r,e),s=yield new Sv(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var y$=10*60*1e3,Av=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!MA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(dn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y$&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0(e))}saveEventToCache(e){this.cachedEventUids.add(K0(e)),this.lastProcessedEventTime=Date.now()}};function K0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function v$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MA(n);default:return!1}}function _$(t){return v(this,arguments,function*(n,e={}){return sr(n,"GET","/v1/projects",e)})}var I$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,w$=/^https?/;function E$(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield _$(n);for(let t of e)try{if(D$(t))return}catch{}Wt(n,"unauthorized-domain")})}function D$(n){let e=fv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!w$.test(t))return!1;if(I$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var b$=new qi(3e4,6e4);function Q0(){let n=kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function T$(n){return new Promise((e,t)=>{var r,i,o;function s(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),t(dn(n,"network-request-failed"))},timeout:b$.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=kn().gapi)===null||o===void 0)&&o.load)s();else{let a=mA("iframefcb");return kn()[a]=()=>{gapi.load?s():t(dn(n,"network-request-failed"))},gA(`${SB()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw yh=null,e})}var yh=null;function C$(n){return yh=yh||T$(n),yh}var S$=new qi(5e3,15e3),A$="__/auth/iframe",R$="emulator/auth/iframe",N$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P$(n){let e=n.config;$(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?xv(e,R$):`https://${n.config.authDomain}/${A$}`,r={apiKey:e.apiKey,appName:n.name,v:Br},i=M$.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ds(r).slice(1)}`}function x$(n){return v(this,null,function*(){let e=yield C$(n),t=kn().gapi;return $(t,n,"internal-error"),e.open({where:document.body,url:P$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N$,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=dn(n,"network-request-failed"),a=kn().setTimeout(()=>{o(s)},S$.get());function u(){kn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var k$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O$=500,F$=600,V$="_blank",L$="http://localhost",Ph=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function j$(n,e,t,r=O$,i=F$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},k$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ke().toLowerCase();t&&(a=cA(l)?V$:t),sA(l)&&(e=e||L$,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(wB(l)&&a!=="_self")return U$(e||"",a),new Ph(null);let p=window.open(e||"",a,h);$(p,n,"popup-blocked");try{p.focus()}catch{}return new Ph(p)}function U$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var B$="__/auth/handler",$$="emulator/auth/handler",H$=encodeURIComponent("fac");function Y0(n,e,t,r,i,o){return v(this,null,function*(){$(n.config.authDomain,n,"auth-domain-config-required"),$(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Br,eventId:i};if(e instanceof Nc){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",u0(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Sh){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${H$}=${encodeURIComponent(u)}`:"";return`${q$(n)}?${ds(a).slice(1)}${l}`})}function q$({config:n}){return n.emulator?xv(n,$$):`https://${n.authDomain}/${B$}`}var hv="webStorageSupport",Rv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kv,this._completeRedirectFn=m$,this._overrideRedirectResult=f$}_openPopup(e,t,r,i){return v(this,null,function*(){var o;ir((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Y0(e,t,r,fv(),i);return j$(e,s,Qv())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield Y0(e,t,r,fv(),i);return YB(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ir(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield x$(e),r=new Av(e);return t.register("authEvent",i=>($(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hv,{type:hv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[hv];s!==void 0&&t(!!s),Wt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=E$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fA()||aA()||Vv()}},PA=Rv;var Z0="@firebase/auth",J0="1.10.8";var Nv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function z$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G$(n){un(new It("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;$(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pA(n)},l=new Iv(r,i,o,u);return RB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),un(new It("auth-internal",e=>{let t=ar(e.getProvider("auth").getImmediate());return(r=>new Nv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(Z0,J0,z$(n)),Ne(Z0,J0,"esm2017")}var W$=5*60,K$=By("authIdTokenMaxAge")||W$,X0=null,Q$=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>K$)return;let i=t?.token;X0!==i&&(X0=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Zv(n=Bi()){let e=ps(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Lv(n,{popupRedirectResolver:PA,persistence:[RA,TA,Kv]}),r=By("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Q$(o.toString());Gv(t,s,()=>s(t.currentUser)),xc(t,a=>s(a))}}let i=jy("auth");return i&&jv(t,`http://${i}`),t}function Y$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=dn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Y$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G$("Browser");function OA(n){return new ne(function(e){var t=xc(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var FA="auth",Gi=class{constructor(e){return e}},kc=class{constructor(){return ms(FA)}};var Jv=new L("angularfire2.auth-instances");function kH(n,e){let t=wc(FA,n,e);return t&&new Gi(t)}function OH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Gi(r)}}var FH={provide:kc,deps:[[new Mt,Jv]]},VH={provide:Gi,useFactory:kH,deps:[[new Mt,Jv],er]};function VA(n,...e){return Ne("angularfire",$r.full,"auth"),En([VH,FH,{provide:Jv,useFactory:OH(n),multi:!0,deps:[ge,Le,Hr,Hi,[new Mt,ys],...e]}])}var LA=ke(OA,!0);var jA=ke(Hv,!0,2);var UA=ke(Zv,!0);var BA=ke(zv,!0,2),$A=ke($v,!0,2);var HA=ke(qv,!0,2);var qA=ke(Yv,!0,2);var zA=ke(Wv,!0,2);var GA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},WA={};var cr,Xv;(function(){var n;function e(D,_){function w(){}w.prototype=_.prototype,D.D=_.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(E,b,S){for(var I=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)I[Bn-2]=arguments[Bn];return _.prototype[b].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,w){w||(w=0);var E=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)E[b]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(b=0;16>b;++b)E[b]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=D.g[0],w=D.g[1],b=D.g[2];var S=D.g[3],I=_+(S^w&(b^S))+E[0]+3614090360&4294967295;_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+E[1]+3905402710&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+E[2]+606105819&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+E[3]+3250441966&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+E[4]+4118548399&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+E[5]+1200080426&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+E[6]+2821735955&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+E[7]+4249261313&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+E[8]+1770035416&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+E[9]+2336552879&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+E[10]+4294925233&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+E[11]+2304563134&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(S^w&(b^S))+E[12]+1804603682&4294967295,_=w+(I<<7&4294967295|I>>>25),I=S+(b^_&(w^b))+E[13]+4254626195&4294967295,S=_+(I<<12&4294967295|I>>>20),I=b+(w^S&(_^w))+E[14]+2792965006&4294967295,b=S+(I<<17&4294967295|I>>>15),I=w+(_^b&(S^_))+E[15]+1236535329&4294967295,w=b+(I<<22&4294967295|I>>>10),I=_+(b^S&(w^b))+E[1]+4129170786&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+E[6]+3225465664&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+E[11]+643717713&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+E[0]+3921069994&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+E[5]+3593408605&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+E[10]+38016083&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+E[15]+3634488961&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+E[4]+3889429448&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+E[9]+568446438&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+E[14]+3275163606&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+E[3]+4107603335&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+E[8]+1163531501&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(b^S&(w^b))+E[13]+2850285829&4294967295,_=w+(I<<5&4294967295|I>>>27),I=S+(w^b&(_^w))+E[2]+4243563512&4294967295,S=_+(I<<9&4294967295|I>>>23),I=b+(_^w&(S^_))+E[7]+1735328473&4294967295,b=S+(I<<14&4294967295|I>>>18),I=w+(S^_&(b^S))+E[12]+2368359562&4294967295,w=b+(I<<20&4294967295|I>>>12),I=_+(w^b^S)+E[5]+4294588738&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+E[8]+2272392833&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+E[11]+1839030562&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+E[14]+4259657740&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+E[1]+2763975236&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+E[4]+1272893353&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+E[7]+4139469664&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+E[10]+3200236656&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+E[13]+681279174&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+E[0]+3936430074&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+E[3]+3572445317&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+E[6]+76029189&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(w^b^S)+E[9]+3654602809&4294967295,_=w+(I<<4&4294967295|I>>>28),I=S+(_^w^b)+E[12]+3873151461&4294967295,S=_+(I<<11&4294967295|I>>>21),I=b+(S^_^w)+E[15]+530742520&4294967295,b=S+(I<<16&4294967295|I>>>16),I=w+(b^S^_)+E[2]+3299628645&4294967295,w=b+(I<<23&4294967295|I>>>9),I=_+(b^(w|~S))+E[0]+4096336452&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+E[7]+1126891415&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+E[14]+2878612391&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+E[5]+4237533241&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+E[12]+1700485571&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+E[3]+2399980690&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+E[10]+4293915773&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+E[1]+2240044497&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+E[8]+1873313359&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+E[15]+4264355552&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+E[6]+2734768916&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+E[13]+1309151649&4294967295,w=b+(I<<21&4294967295|I>>>11),I=_+(b^(w|~S))+E[4]+4149444226&4294967295,_=w+(I<<6&4294967295|I>>>26),I=S+(w^(_|~b))+E[11]+3174756917&4294967295,S=_+(I<<10&4294967295|I>>>22),I=b+(_^(S|~w))+E[2]+718787259&4294967295,b=S+(I<<15&4294967295|I>>>17),I=w+(S^(b|~_))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var w=_-this.blockSize,E=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=w;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<_;)if(E[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,E),b=0;break}}else for(;S<_;)if(E[b++]=D[S++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var w=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=w&255,w/=256;for(this.u(D),D=Array(16),_=w=0;4>_;++_)for(var E=0;32>E;E+=8)D[w++]=this.g[_]>>>E&255;return D};function o(D,_){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=_(D)}function s(D,_){this.h=_;for(var w=[],E=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;E&&S==_||(w[b]=S,E=!1)}this.g=w}var a={};function u(D){return-128<=D&&128>D?o(D,function(_){return new s([_|0],0>_?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var _=[],w=1,E=0;D>=w;E++)_[E]=D/w|0,w*=4294967296;return new s(_,0)}function h(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return R(h(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(_,8)),E=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),E=E.j(S).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var D=0,_=1,w=0;w<this.g.length;w++){var E=this.i(w);D+=(0<=E?E:4294967296+E)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var _=l(Math.pow(D,6)),w=this,E="";;){var b=we(w,_).g;w=V(w,b.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=b,C(w))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=V(this,D),N(D)?-1:C(D)?0:1};function R(D){for(var _=D.g.length,w=[],E=0;E<_;E++)w[E]=~D.g[E];return new s(w,~D.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],E=0,b=0;b<=_;b++){var S=E+(this.i(b)&65535)+(D.i(b)&65535),I=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);E=I>>>16,S&=65535,I&=65535,w[b]=I<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(D,_){return D.add(R(_))}n.j=function(D){if(C(this)||C(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var _=this.g.length+D.g.length,w=[],E=0;E<2*_;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<D.g.length;b++){var S=this.i(E)>>>16,I=this.i(E)&65535,Bn=D.i(b)>>>16,Ks=D.i(b)&65535;w[2*E+2*b]+=I*Ks,G(w,2*E+2*b),w[2*E+2*b+1]+=S*Ks,G(w,2*E+2*b+1),w[2*E+2*b+1]+=I*Bn,G(w,2*E+2*b+1),w[2*E+2*b+2]+=S*Bn,G(w,2*E+2*b+2)}for(E=0;E<_;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=_;E<2*_;E++)w[E]=0;return new s(w,0)};function G(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function K(D,_){this.g=D,this.h=_}function we(D,_){if(C(_))throw Error("division by zero");if(C(D))return new K(p,p);if(N(D))return _=we(R(D),_),new K(R(_.g),R(_.h));if(N(_))return _=we(D,R(_)),new K(R(_.g),_.h);if(30<D.g.length){if(N(D)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=_;0>=E.l(D);)w=ht(w),E=ht(E);var b=ve(w,1),S=ve(E,1);for(E=ve(E,2),w=ve(w,2);!C(E);){var I=S.add(E);0>=I.l(D)&&(b=b.add(w),S=I),E=ve(E,1),w=ve(w,1)}return _=V(D,b.j(_)),new K(b,_)}for(b=p;0<=D.l(_);){for(w=Math.max(1,Math.floor(D.m()/_.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(w),I=S.j(_);N(I)||0<I.l(D);)w-=E,S=l(w),I=S.j(_);C(S)&&(S=m),b=b.add(S),D=V(D,I)}return new K(b,D)}n.A=function(D){return we(this,D).h},n.and=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)&D.i(E);return new s(w,this.h&D.h)},n.or=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)|D.i(E);return new s(w,this.h|D.h)},n.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)^D.i(E);return new s(w,this.h^D.h)};function ht(D){for(var _=D.g.length+1,w=[],E=0;E<_;E++)w[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(w,D.h)}function ve(D,_){var w=_>>5;_%=32;for(var E=D.g.length-w,b=[],S=0;S<E;S++)b[S]=0<_?D.i(S+w)>>>_|D.i(S+w+1)<<32-_:D.i(S+w);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Xv=WA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,cr=WA.Integer=s}).apply(typeof GA<"u"?GA:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ur={};var e_,LH,ws,t_,Oc,Fh,n_,r_,i_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[T].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,A=g.length||0;c.length=T+A;for(let O=0;O<A;O++)c[T+O]=g[O]}else c.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function we(c){return we[" "](c),c}we[" "]=function(){};var ht=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ve(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Vf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Bn{constructor(){this.h=this.g=null}add(d,f){let g=Ks.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ks=new V(()=>new PM,c=>c.reset());class PM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qs,Ys=!1,Vf=new Bn,vw=()=>{let c=a.Promise.resolve(void 0);Qs=()=>{c.then(xM)}};var xM=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ks;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ys=!1};function mr(){this.s=this.s,this.C=this.C}mr.prototype.s=!1,mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var kM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Zs(c,d){if(nt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ht){e:{try{we(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:OM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Zs.aa.h.call(this)}}C(Zs,nt);var OM={2:"touch",3:"pen",4:"mouse"};Zs.prototype.h=function(){Zs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Js="closure_listenable_"+(1e6*Math.random()|0),FM=0;function VM(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++FM,this.da=this.fa=!1}function iu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ou(c){this.src=c,this.g={},this.h=0}ou.prototype.add=function(c,d,f,g,T){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=jf(c,d,g,T);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new VM(d,this.src,A,!!g,T),d.fa=f,c.push(d)),d};function Lf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(iu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function jf(c,d,f,g){for(var T=0;T<c.length;++T){var A=c[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var Uf="closure_lm_"+(1e6*Math.random()|0),Bf={};function _w(c,d,f,g,T){if(g&&g.once)return ww(c,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)_w(c,d[A],f,g,T);return null}return f=zf(f),c&&c[Js]?c.K(d,f,l(g)?!!g.capture:!!g,T):Iw(c,d,f,!1,g,T)}function Iw(c,d,f,g,T,A){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,Ee=Hf(c);if(Ee||(c[Uf]=Ee=new ou(c)),f=Ee.add(d,f,g,O,A),f.proxy)return f;if(g=LM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)kM||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(Dw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function LM(){function c(f){return d.call(c.src,c.listener,f)}let d=jM;return c}function ww(c,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)ww(c,d[A],f,g,T);return null}return f=zf(f),c&&c[Js]?c.L(d,f,l(g)?!!g.capture:!!g,T):Iw(c,d,f,!0,g,T)}function Ew(c,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)Ew(c,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=zf(f),c&&c[Js]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=jf(A,f,g,T),-1<f&&(iu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Hf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=jf(d,f,g,T)),(f=-1<c?d[c]:null)&&$f(f))}function $f(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Js])Lf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Dw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Hf(d))?(Lf(f,c),f.h==0&&(f.src=null,d[Uf]=null)):iu(c)}}}function Dw(c){return c in Bf?Bf[c]:Bf[c]="on"+c}function jM(c,d){if(c.da)c=!0;else{d=new Zs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&$f(c),c=f.call(g,d)}return c}function Hf(c){return c=c[Uf],c instanceof ou?c:null}var qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function zf(c){return typeof c=="function"?c:(c[qf]||(c[qf]=function(d){return c.handleEvent(d)}),c[qf])}function rt(){mr.call(this),this.i=new ou(this),this.M=this,this.F=null}C(rt,mr),rt.prototype[Js]=!0,rt.prototype.removeEventListener=function(c,d,f,g){Ew(this,c,d,f,g)};function ft(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new nt(d,c);else if(d instanceof nt)d.target=d.target||c;else{var T=d;d=new nt(g,c),E(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];T=su(O,g,!0,d)&&T}if(O=d.g=c,T=su(O,g,!0,d)&&T,T=su(O,g,!1,d)&&T,f)for(A=0;A<f.length;A++)O=d.g=f[A],T=su(O,g,!1,d)&&T}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)iu(f[g]);delete c.g[d],c.h--}}this.F=null},rt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},rt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function su(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Je=O.ha||O.src;O.fa&&Lf(c.i,O),T=Ee.call(Je,g)!==!1&&T}}return T&&!g.defaultPrevented}function bw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Tw(c){c.g=bw(()=>{c.g=null,c.i&&(c.i=!1,Tw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class UM extends mr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Tw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(c){mr.call(this),this.h=c,this.g={}}C(Xs,mr);var Cw=[];function Sw(c){ve(c.g,function(d,f){this.g.hasOwnProperty(f)&&$f(d)},c),c.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),Sw(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gf=a.JSON.stringify,BM=a.JSON.parse,$M=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wf(){}Wf.prototype.h=null;function Aw(c){return c.h||(c.h=c.i())}function Rw(){}var ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kf(){nt.call(this,"d")}C(Kf,nt);function Qf(){nt.call(this,"c")}C(Qf,nt);var ri={},Nw=null;function au(){return Nw=Nw||new rt}ri.La="serverreachability";function Mw(c){nt.call(this,ri.La,c)}C(Mw,nt);function ta(c){let d=au();ft(d,new Mw(d))}ri.STAT_EVENT="statevent";function Pw(c,d){nt.call(this,ri.STAT_EVENT,c),this.stat=d}C(Pw,nt);function pt(c){let d=au();ft(d,new Pw(d,c))}ri.Ma="timingevent";function xw(c,d){nt.call(this,ri.Ma,c),this.size=d}C(xw,nt);function na(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ra(){this.g=!0}ra.prototype.xa=function(){this.g=!1};function HM(c,d,f,g,T,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),Je=0;Je<Ee.length;Je++){var pe=Ee[Je].split("=");if(1<pe.length){var it=pe[0];pe=pe[1];var ot=it.split("_");O=2<=ot.length&&ot[1]=="type"?O+(it+"="+pe+"&"):O+(it+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+O})}function qM(c,d,f,g,T,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+O})}function so(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+GM(c,f)+(g?" "+g:"")})}function zM(c,d){c.info(function(){return"TIMEOUT: "+d})}ra.prototype.info=function(){};function GM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return Gf(f)}catch{return d}}var cu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yf;function uu(){}C(uu,Wf),uu.prototype.g=function(){return new XMLHttpRequest},uu.prototype.i=function(){return{}},Yf=new uu;function yr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ow}function Ow(){this.i=null,this.g="",this.h=!1}var Fw={},Zf={};function Jf(c,d,f){c.L=1,c.v=fu($n(d)),c.m=f,c.P=!0,Vw(c,null)}function Vw(c,d){c.F=Date.now(),lu(c),c.A=$n(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Zw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Ow,c.g=gE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new UM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(Cw[0]=T.toString()),T=Cw);for(var A=0;A<T.length;A++){var O=_w(f,T[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ta(),HM(c.i,c.u,c.A,c.l,c.R,c.m)}yr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},yr.prototype.Y=function(c){try{if(c==this.g)e:{let ot=Hn(this.g);var d=this.g.Ba();let uo=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||iE(this.g)))){this.J||ot!=4||d==7||(d==8||0>=uo?ta(3):ta(2)),Xf(this);var f=this.g.Z();this.X=f;t:if(Lw(this)){var g=iE(this.g);c="";var T=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),ia(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,qM(this.i,this.u,this.A,this.l,this.R,ot,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Je=this.g;if((Ee=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ee)){var pe=Ee;break t}}pe=null}if(f=pe)so(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ep(this,f);else{this.o=!1,this.s=3,pt(12),ii(this),ia(this);break e}}if(this.P){f=!0;let Zt;for(;!this.J&&this.C<O.length;)if(Zt=WM(this,O),Zt==Zf){ot==4&&(this.s=4,pt(14),f=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Fw){this.s=4,pt(15),so(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else so(this.i,this.l,Zt,null),ep(this,Zt);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||O.length!=0||this.h.h||(this.s=1,pt(16),f=!1),this.o=this.o&&f,!f)so(this.i,this.l,O,"[Invalid Chunked Response]"),ii(this),ia(this);else if(0<O.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),sp(it),it.M=!0,pt(11))}}else so(this.i,this.l,O,null),ep(this,O);ot==4&&ii(this),this.o&&!this.J&&(ot==4?dE(this.j,this):(this.o=!1,lu(this)))}else lP(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),ii(this),ia(this)}}}catch{}finally{}};function Lw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function WM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Zf:(f=Number(d.substring(f,g)),isNaN(f)?Fw:(g+=1,g+f>d.length?Zf:(d=d.slice(g,g+f),c.C=g+f,d)))}yr.prototype.cancel=function(){this.J=!0,ii(this)};function lu(c){c.S=Date.now()+c.I,jw(c,c.I)}function jw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=na(m(c.ba,c),d)}function Xf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(zM(this.i,this.A),this.L!=2&&(ta(),pt(17)),ii(this),this.s=2,ia(this)):jw(this,this.S-c)};function ia(c){c.j.G==0||c.J||dE(c.j,c)}function ii(c){Xf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Sw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function ep(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||tp(f.h,c))){if(!c.K&&tp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)vu(f),mu(f);else break e;op(f),pt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=na(m(f.Za,f),6e3));if(1>=$w(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else si(f,11)}else if((c.K||f.g==c)&&vu(f),!G(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let pe=T[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let it=pe[3];it!=null&&(f.la=it,f.j.info("VER="+f.la));let ot=pe[4];ot!=null&&(f.Aa=ot,f.j.info("SVER="+f.Aa));let uo=pe[5];uo!=null&&typeof uo=="number"&&0<uo&&(g=1.5*uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Zt=c.g;if(Zt){let Iu=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var A=g.h;A.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(np(A,A.h),A.h=null))}if(g.D){let ap=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;ap&&(g.ya=ap,Te(g.I,g.D,ap))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=pE(g,g.J?g.ia:null,g.W),O.K){Hw(g.h,O);var Ee=O,Je=g.L;Je&&(Ee.I=Je),Ee.B&&(Xf(Ee),lu(Ee)),g.g=O}else uE(g);0<f.i.length&&yu(f)}else pe[0]!="stop"&&pe[0]!="close"||si(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?si(f,7):ip(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}ta(4)}catch{}}var KM=class{constructor(c,d){this.g=c,this.map=d}};function Uw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $w(c){return c.h?1:c.g?c.g.size:0}function tp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function np(c,d){c.g?c.g.add(d):c.h=d}function Hw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Uw.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function qw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function QM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function YM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function zw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=YM(c),g=QM(c),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],c)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var A=c[f].substring(0,g);T=c[f].substring(g+1)}else A=c[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,du(this,c.j),this.o=c.o,this.g=c.g,hu(this,c.s),this.l=c.l;var d=c.i,f=new aa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ww(this,f),this.m=c.m}else c&&(d=String(c).match(Gw))?(this.h=!1,du(this,d[1]||"",!0),this.o=oa(d[2]||""),this.g=oa(d[3]||"",!0),hu(this,d[4]),this.l=oa(d[5]||"",!0),Ww(this,d[6]||"",!0),this.m=oa(d[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(sa(d,Kw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(sa(d,Kw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(sa(f,f.charAt(0)=="/"?eP:XM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",sa(f,nP)),c.join("")};function $n(c){return new oi(c)}function du(c,d,f){c.j=f?oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function hu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ww(c,d,f){d instanceof aa?(c.i=d,rP(c.i,c.h)):(f||(d=sa(d,tP)),c.i=new aa(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function fu(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function sa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,JM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function JM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Kw=/[#\/\?@]/g,XM=/[#\?:]/g,eP=/[#\?]/g,tP=/[#\?@]/g,nP=/#/g;function aa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&ZM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=aa.prototype,n.add=function(c,d){vr(this),this.i=null,c=ao(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Qw(c,d){vr(c),d=ao(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Yw(c,d){return vr(c),d=ao(c,d),c.g.has(d)}n.forEach=function(c,d){vr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){vr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},n.V=function(c){vr(this);let d=[];if(typeof c=="string")Yw(this,c)&&(d=d.concat(this.g.get(ao(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return vr(this),this.i=null,c=ao(this,c),Yw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Zw(c,d,f){Qw(c,d),0<f.length&&(c.i=null,c.g.set(ao(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var T=A;O[g]!==""&&(T+="="+encodeURIComponent(String(O[g]))),c.push(T)}}return this.i=c.join("&")};function ao(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function rP(c,d){d&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(Qw(this,g),Zw(this,T,f))},c)),c.j=d}function iP(c,d){let f=new ra;if(a.Image){let g=new Image;g.onload=y(_r,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(_r,f,"TestLoadImage: error",!1,d,g),g.onabort=y(_r,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(_r,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function oP(c,d){let f=new ra,g=new AbortController,T=setTimeout(()=>{g.abort(),_r(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?_r(f,"TestPingServer: ok",!0,d):_r(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),_r(f,"TestPingServer: error",!1,d)})}function _r(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function sP(){this.g=new $M}function aP(c,d,f){let g=f||"";try{zw(c,function(T,A){let O=T;l(T)&&(O=Gf(T)),d.push(g+A+"="+encodeURIComponent(O))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function ca(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ca,Wf),ca.prototype.g=function(){return new pu(this.l,this.j)},ca.prototype.i=function(c){return function(){return c}}({});function pu(c,d){rt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pu,rt),n=pu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,la(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ua(this):la(this),this.readyState==3&&Jw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ua(this))},n.Qa=function(c){this.g&&(this.response=c,ua(this))},n.ga=function(){this.g&&ua(this)};function ua(c){c.readyState=4,c.l=null,c.j=null,c.v=null,la(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xw(c){let d="";return ve(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function rp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Xw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ae(c){rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,rt);var cP=/^https?$/i,uP=["POST","PUT"];n=Ae.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yf.g(),this.v=this.o?Aw(this.o):Aw(Yf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){eE(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uP,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rE(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){eE(this,A)}};function eE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,tE(c),gu(c)}function tE(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),gu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gu(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nE(this):this.bb())},n.bb=function(){nE(this)};function nE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)bw(c.Ea,0,c);else if(ft(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var T=String(c.D).match(Gw)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!cP.test(T?T.toLowerCase():"")}f=g}if(f)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var A=2<Hn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",tE(c)}}finally{gu(c)}}}}function gu(c,d){if(c.g){rE(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ft(c,"ready");try{f.onreadystatechange=g}catch{}}}function rE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),BM(d)}};function iE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lP(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function oE(c){this.Aa=0,this.i=[],this.j=new ra,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,c),this.cb=da("retryDelaySeedMs",1e4,c),this.Wa=da("forwardChannelMaxRetries",2,c),this.wa=da("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Uw(c&&c.concurrentRequestLimit),this.Da=new sP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=oE.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){pt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=pE(this,null,this.W),yu(this)};function ip(c){if(sE(c),c.G==3){var d=c.U++,f=$n(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),ha(c,f),d=new yr(c,c.j,d),d.L=2,d.v=fu($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=gE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),lu(d)}fE(c)}function mu(c){c.g&&(sp(c),c.g.cancel(),c.g=null)}function sE(c){mu(c),c.u&&(a.clearTimeout(c.u),c.u=null),vu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function yu(c){if(!Bw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qs||vw(),Ys||(Qs(),Ys=!0),Vf.add(d,c),c.B=0}}function dP(c,d){return $w(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=na(m(c.Ga,c,d),hE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new yr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=cE(this,T,d),f=$n(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),ha(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Xw(A)))+"&"+d:this.m&&rp(f,this.m,A)),np(this.h,T),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),T.T=!0,Jf(T,f,null)):Jf(T,f,d),this.G=2}}else this.G==3&&(c?aE(this,c):this.i.length==0||Bw(this.h)||aE(this))};function aE(c,d){var f;d?f=d.l:f=c.U++;let g=$n(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),ha(c,g),c.m&&c.o&&rp(g,c.m,c.o),f=new yr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=cE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),np(c.h,f),Jf(f,g,d)}function ha(c,d){c.H&&ve(c.H,function(f,g){Te(d,g,f)}),c.l&&zw({},function(f,g){Te(d,g,f)})}function cE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=T[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let Je=0;Je<f;Je++){let pe=T[Je].g,it=T[Je].map;if(pe-=A,0>pe)A=Math.max(0,T[Je].g-100),Ee=!1;else try{aP(it,O,"req"+pe+"_")}catch{g&&g(it)}}if(Ee){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function uE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qs||vw(),Ys||(Qs(),Ys=!0),Vf.add(d,c),c.v=0}}function op(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=na(m(c.Fa,c),hE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,lE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=na(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),mu(this),lE(this))};function sp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function lE(c){c.g=new yr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$n(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),ha(c,d),c.m&&c.o&&rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=fu($n(d)),f.m=null,f.P=!0,Vw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,mu(this),op(this),pt(19))};function vu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function dE(c,d){var f=null;if(c.g==d){vu(c),sp(c),c.g=null;var g=2}else if(tp(c.h,d))f=d.D,Hw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=au(),ft(g,new xw(g,f)),yu(c)}else uE(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&dP(c,d)||g==2&&op(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:si(c,5);break;case 4:si(c,10);break;case 3:si(c,6);break;default:si(c,2)}}}function hE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function si(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new oi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||du(g,"https"),fu(g),T?iP(g.toString(),f):oP(g.toString(),f)}else pt(2);c.G=0,c.l&&c.l.sa(d),fE(c),sE(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function fE(c){if(c.G=0,c.ka=[],c.l){let d=qw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function pE(c,d,f){var g=f instanceof oi?$n(f):new oi(f);if(g.g!="")d&&(g.g=d+"."+g.g),hu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new oi(null);g&&du(A,g),d&&(A.g=d),T&&hu(A,T),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),ha(c,g),g}function gE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new ca({eb:f})):new Ae(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mE(){}n=mE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _u(){}_u.prototype.g=function(c,d){return new Rt(c,d)};function Rt(c,d){rt.call(this),this.g=new oE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new co(this)}C(Rt,rt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){ip(this.g)},Rt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Gf(c),c=f);d.i.push(new KM(d.Ya++,c)),d.G==3&&yu(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,ip(this.g),delete this.g,Rt.aa.N.call(this)};function yE(c){Kf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(yE,Kf);function vE(){Qf.call(this),this.status=1}C(vE,Qf);function co(c){this.g=c}C(co,mE),co.prototype.ua=function(){ft(this.g,"a")},co.prototype.ta=function(c){ft(this.g,new yE(c))},co.prototype.sa=function(c){ft(this.g,new vE)},co.prototype.ra=function(){ft(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,i_=ur.createWebChannelTransport=function(){return new _u},r_=ur.getStatEventTarget=function(){return au()},n_=ur.Event=ri,Fh=ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cu.NO_ERROR=0,cu.TIMEOUT=8,cu.HTTP_ERROR=6,Oc=ur.ErrorCode=cu,kw.COMPLETE="complete",t_=ur.EventType=kw,Rw.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",rt.prototype.listen=rt.prototype.K,ws=ur.WebChannel=Rw,LH=ur.FetchXmlHttpFactory=ca,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,e_=ur.XhrIo=Ae}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});var KA="@firebase/firestore",QA="4.8.0";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Hs="11.10.0";var Ji=new Pn("@firebase/firestore");function Es(){return Ji.logLevel}function F(n,...e){if(Ji.logLevel<=ce.DEBUG){let t=e.map(HI);Ji.debug(`Firestore (${Hs}): ${n}`,...t)}}function lr(n,...e){if(Ji.logLevel<=ce.ERROR){let t=e.map(HI);Ji.error(`Firestore (${Hs}): ${n}`,...t)}}function Jr(n,...e){if(Ji.logLevel<=ce.WARN){let t=e.map(HI);Ji.warn(`Firestore (${Hs}): ${n}`,...t)}}function HI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LR(n,r,t)}function LR(n,e,t){let r=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw lr(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||LR(e,i,r)}function Q(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Ft{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},u_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},l_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},d_=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Qe(e)}},h_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},f_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new h_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},p_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function jH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function jR(){return new TextEncoder}var Bc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=jH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function g_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=jR(),s=UH(o.encode(YA(n,t)),o.encode(YA(e,t)));return s!==0?s:ie(r,i)}}t+=r>65535?2:1}return ie(n.length,e.length)}function YA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function UH(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function Rs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ZA="__name__",zh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):g_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}},Se=class n extends zh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},BH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lt=class n extends zh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return BH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZA}static keyField(){return new n([ZA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new j(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};function UR(n,e,t){if(!t)throw new j(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $H(n,e,t,r){if(e===!0&&r===!0)throw new j(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JA(n){if(!H.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XA(n){if(H.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=qI(n);throw new j(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Be(n,e){let t={typeString:n};return e&&(t.value=e),t}function tu(n,e){if(!BR(n))throw new j(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new j(P.INVALID_ARGUMENT,t);return!0}var eR=-62135596800,tR=1e6,$e=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tR);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<eR)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tR}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-eR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Be("string",$e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};var X=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new $e(0,0))}static max(){return new n(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $c=-1,m_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};m_.UNKNOWN_ID=-1;function HH(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new $e(t+1,0):new $e(t,r));return new Xi(i,H.empty(),e)}function qH(n){return new Xi(n.readTime,n.key,$c)}var Xi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(X.min(),H.empty(),$c)}static max(){return new n(X.max(),H.empty(),$c)}};function zH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var GH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",y_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qs(n){return v(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==GH)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function WH(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zs(n){return n.name==="IndexedDbTransactionError"}var zI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),GI=-1;function Df(n){return n==null}function Hc(n){return n===0&&1/n==-1/0}function KH(n){return typeof n=="number"&&Number.isInteger(n)&&!Hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var $R="";function QH(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nR(e)),e=YH(n.get(t),e);return nR(e)}function YH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case $R:t+="";break;default:t+=o}}return t}function nR(n){return n+$R+""}var ZH="remoteDocuments",HR="owner";var qR="mutationQueues";var zR="mutations";var GR="documentMutations",JH="remoteDocumentsV14";var WR="remoteDocumentGlobal";var KR="targets";var QR="targetDocuments";var YR="targetGlobal",ZR="collectionParents";var JR="clientMetadata";var XR="bundles";var eN="namedQueries";var XH="indexConfiguration";var e4="indexState";var t4="indexEntries";var tN="documentOverlays";var n4="globals";var r4=[qR,zR,GR,ZH,KR,HR,YR,QR,JR,WR,ZR,XR,eN],yJ=[...r4,tN],i4=[qR,zR,GR,JH,KR,HR,YR,QR,JR,WR,ZR,XR,eN,tN],o4=i4,s4=[...o4,XH,e4,t4];var vJ=[...s4,n4];function rR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ni(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Me=class n{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cs(this.root,e,this.comparator,!0)}},Cs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class n{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gh(this.data.getIterator())}getIteratorFrom(e){return new Gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class n{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ye(Lt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var a4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(ye(!!n,39018),typeof n=="string"){let e=0,t=a4.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hr(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}var rN="server_timestamp",iN="__type__",oN="__previous_value__",sN="__local_write_time__";function WI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[iN])===null||t===void 0?void 0:t.stringValue)===rN}function bf(n){let e=n.mapValue.fields[oN];return WI(e)?bf(e):e}function qc(n){let e=dr(n.mapValue.fields[sN].timestampValue);return new $e(e.seconds,e.nanos)}var v_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Kh="(default)",Qh=class n{constructor(e,t){this.projectId=e,this.database=t||Kh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var KI="__type__",aN="__max__",Vh={mapValue:{fields:{__type__:{stringValue:aN}}}},QI="__vector__",Ns="value";function Xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?WI(n)?4:uN(n)?9007199254740991:cN(n)?10:11:q(28295,{value:n})}function Ln(n,e){if(n===e)return!0;let t=Xr(n);if(t!==Xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qc(n).isEqual(qc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=dr(i.timestampValue),a=dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return hr(i.bytesValue).isEqual(hr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?Hc(s)===Hc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Rs(n.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rR(s)!==rR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ln(s[u],a[u])))return!1;return!0}(n,e);default:return q(52216,{left:n})}}function zc(n,e){return(n.values||[]).find(t=>Ln(t,e))!==void 0}function Ms(n,e){if(n===e)return 0;let t=Xr(n),r=Xr(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return iR(n.timestampValue,e.timestampValue);case 4:return iR(qc(n),qc(e));case 5:return g_(n.stringValue,e.stringValue);case 6:return function(o,s){let a=hr(o),u=hr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(Ce(o.latitude),Ce(s.latitude));return a!==0?a:ie(Ce(o.longitude),Ce(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oR(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Ns])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Ns])===null||u===void 0?void 0:u.arrayValue,N=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:oR(y,C)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vh.mapValue&&s===Vh.mapValue)return 0;if(o===Vh.mapValue)return 1;if(s===Vh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=g_(u[p],h[p]);if(m!==0)return m;let y=Ms(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)}(n.mapValue,e.mapValue);default:throw q(23264,{le:t})}}function iR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=dr(n),r=dr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function oR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ms(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function Ps(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=dr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return hr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=__(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${__(t.fields[s])}`;return i+"}"}(n.mapValue):q(61005,{value:n})}function Uh(n){switch(Xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=bf(n);return e?16+Uh(e):16;case 5:return 2*n.stringValue.length;case 6:return hr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Uh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ni(r.fields,(o,s)=>{i+=o.length+Uh(s)}),i}(n.mapValue);default:throw q(13486,{value:n})}}function I_(n){return!!n&&"integerValue"in n}function YI(n){return!!n&&"arrayValue"in n}function sR(n){return!!n&&"nullValue"in n}function aR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bh(n){return!!n&&"mapValue"in n}function cN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[KI])===null||t===void 0?void 0:t.stringValue)===QI}function Vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ni(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aN}var IJ={mapValue:{fields:{[KI]:{stringValue:QI},[Ns]:{arrayValue:{}}}}};var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=Lt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Vc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ni(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Vc(this.value))}};function lN(n){let e=[];return ni(n.fields,(t,r)=>{let i=new Lt([t]);if(Bh(r)){let o=lN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Qt(e)}var fn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,X.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xs=class{constructor(e,t){this.position=e,this.inclusive=t}};function cR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=Ms(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ln(n.position[t],e.position[t]))return!1;return!0}var ks=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function c4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yh=class{},ze=class n extends Yh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new E_(e,t,r):t==="array-contains"?new T_(e,r):t==="in"?new C_(e,r):t==="not-in"?new S_(e,r):t==="array-contains-any"?new A_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new D_(e,r):new b_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ms(t,this.value)):t!==null&&Xr(this.value)===Xr(t)&&this.matchesComparison(Ms(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jn=class n extends Yh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return dN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function dN(n){return n.op==="and"}function hN(n){return u4(n)&&dN(n)}function u4(n){for(let e of n.filters)if(e instanceof jn)return!1;return!0}function w_(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+Ps(n.value);if(hN(n))return n.filters.map(e=>w_(e)).join(",");{let e=n.filters.map(t=>w_(t)).join(",");return`${n.op}(${e})`}}function fN(n,e){return n instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Ln(r.value,i.value)}(n,e):n instanceof jn?function(r,i){return i instanceof jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&fN(s,i.filters[a]),!0):!1}(n,e):void q(19439)}function pN(n){return n instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${Ps(t.value)}`}(n):n instanceof jn?function(t){return t.op.toString()+" {"+t.getFilters().map(pN).join(" ,")+"}"}(n):"Filter"}var E_=class extends ze{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},D_=class extends ze{constructor(e,t){super(e,"in",t),this.keys=gN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},b_=class extends ze{constructor(e,t){super(e,"not-in",t),this.keys=gN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function gN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var T_=class extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return YI(t)&&zc(t.arrayValue,this.value)}},C_=class extends ze{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&zc(this.value.arrayValue,t)}},S_=class extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zc(this.value.arrayValue,t)}},A_=class extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!YI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zc(this.value.arrayValue,r))}};var R_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function lR(n,e=null,t=[],r=[],i=null,o=null,s=null){return new R_(n,e,t,r,i,o,s)}function ZI(n){let e=Q(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>w_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ps(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ps(r)).join(",")),e.Pe=t}return e.Pe}function JI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uR(n.startAt,e.startAt)&&uR(n.endAt,e.endAt)}function N_(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Os=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function l4(n,e,t,r,i,o,s,a){return new Os(n,e,t,r,i,o,s,a)}function Tf(n){return new Os(n)}function dR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function d4(n){return n.collectionGroup!==null}function Lc(n){let e=Q(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(Lt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ks(o,r))}),t.has(Lt.keyField().canonicalString())||e.Te.push(new ks(Lt.keyField(),r))}return e.Te}function Fn(n){let e=Q(n);return e.Ie||(e.Ie=h4(e,Lc(n))),e.Ie}function h4(n,e){if(n.limitType==="F")return lR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ks(i.field,o)});let t=n.endAt?new xs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xs(n.startAt.position,n.startAt.inclusive):null;return lR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function M_(n,e,t){return new Os(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cf(n,e){return JI(Fn(n),Fn(e))&&n.limitType===e.limitType}function mN(n){return`${ZI(Fn(n))}|lt:${n.limitType}`}function Ds(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>pN(i)).join(", ")}]`),Df(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ps(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ps(i)).join(",")),`Target(${r})`}(Fn(n))}; limitType=${n.limitType})`}function Sf(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Lc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=cR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Lc(r),i)||r.endAt&&!function(s,a,u){let l=cR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Lc(r),i))}(n,e)}function f4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yN(n){return(e,t)=>{let r=!1;for(let i of Lc(n)){let o=p4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function p4(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ms(u,l):q(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}var fr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return nN(this.inner)}size(){return this.innerSize}};var g4=new Me(H.comparator);function pr(){return g4}var vN=new Me(H.comparator);function Fc(...n){let e=vN;for(let t of n)e=e.insert(t.key,t);return e}function _N(n){let e=vN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wi(){return jc()}function IN(){return jc()}function jc(){return new fr(n=>n.toString(),(n,e)=>n.isEqual(e))}var m4=new Me(H.comparator),y4=new Ye(H.comparator);function de(...n){let e=y4;for(let t of n)e=e.add(t);return e}var v4=new Ye(ie);function _4(){return v4}function XI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(e)?"-0":e}}function wN(n){return{integerValue:""+n}}function I4(n,e){return KH(e)?wN(e):XI(n,e)}var Fs=class{constructor(){this._=void 0}};function w4(n,e,t){return n instanceof Vs?function(i,o){let s={fields:{[iN]:{stringValue:rN},[sN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&WI(o)&&(o=bf(o)),o&&(s.fields[oN]=o),{mapValue:s}}(t,e):n instanceof eo?DN(n,e):n instanceof to?bN(n,e):function(i,o){let s=EN(i,o),a=hR(s)+hR(i.Ee);return I_(s)&&I_(i.Ee)?wN(a):XI(i.serializer,a)}(n,e)}function E4(n,e,t){return n instanceof eo?DN(n,e):n instanceof to?bN(n,e):t}function EN(n,e){return n instanceof Ls?function(r){return I_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Vs=class extends Fs{},eo=class extends Fs{constructor(e){super(),this.elements=e}};function DN(n,e){let t=TN(e);for(let r of n.elements)t.some(i=>Ln(i,r))||t.push(r);return{arrayValue:{values:t}}}var to=class extends Fs{constructor(e){super(),this.elements=e}};function bN(n,e){let t=TN(e);for(let r of n.elements)t=t.filter(i=>!Ln(i,r));return{arrayValue:{values:t}}}var Ls=class extends Fs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function hR(n){return Ce(n.integerValue||n.doubleValue)}function TN(n){return YI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof eo&&i instanceof eo||r instanceof to&&i instanceof to?Rs(r.elements,i.elements,Ln):r instanceof Ls&&i instanceof Ls?Ln(r.Ee,i.Ee):r instanceof Vs&&i instanceof Vs}(n.transform,e.transform)}var P_=class{constructor(e,t){this.version=e,this.transformResults=t}},Wr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $h(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var js=class{};function CN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zh(n.key,Wr.none()):new no(n.key,n.data,Wr.none());{let t=n.data,r=Vt.empty(),i=new Ye(Lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Un(n.key,r,new Qt(i.toArray()),Wr.none())}}function b4(n,e,t){n instanceof no?function(i,o,s){let a=i.value.clone(),u=pR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Un?function(i,o,s){if(!$h(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=pR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(SN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Uc(n,e,t,r){return n instanceof no?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=o.value.clone(),h=gR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Un?function(o,s,a,u){if(!$h(o.precondition,s))return a;let l=gR(o.fieldTransforms,u,s),h=s.data;return h.setAll(SN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return $h(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function T4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=EN(r.transform,i||null);o!=null&&(t===null&&(t=Vt.empty()),t.set(r.field,o))}return t||null}function fR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rs(r,i,(o,s)=>D4(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var no=class extends js{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Un=class extends js{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function SN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function pR(n,e,t){let r=new Map;ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,E4(s,a,t[i]))}return r}function gR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,w4(o,s,e))}return r}var Zh=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},x_=class extends js{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var k_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&b4(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Uc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=IN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=CN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(t,r)=>fR(t,r))&&Rs(this.baseMutations,e.baseMutations,(t,r)=>fR(t,r))}},O_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return m4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var F_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var V_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,fe;function C4(n){switch(n){case P.OK:return q(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function AN(n){if(n===void 0)return lr("GRPC error has no .code"),P.UNKNOWN;switch(n){case je.OK:return P.OK;case je.CANCELLED:return P.CANCELLED;case je.UNKNOWN:return P.UNKNOWN;case je.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case je.INTERNAL:return P.INTERNAL;case je.UNAVAILABLE:return P.UNAVAILABLE;case je.UNAUTHENTICATED:return P.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case je.NOT_FOUND:return P.NOT_FOUND;case je.ALREADY_EXISTS:return P.ALREADY_EXISTS;case je.PERMISSION_DENIED:return P.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case je.ABORTED:return P.ABORTED;case je.OUT_OF_RANGE:return P.OUT_OF_RANGE;case je.UNIMPLEMENTED:return P.UNIMPLEMENTED;case je.DATA_LOSS:return P.DATA_LOSS;default:return q(39323,{code:n})}}(fe=je||(je={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var mR=null;var S4=new cr([4294967295,4294967295],0);function yR(n){let e=jR().encode(n),t=new Xv;return t.update(e),new Uint8Array(t.digest())}function vR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new cr([t,r],0),new cr([i,o],0)]}var L_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ki(`Invalid padding: ${t}`);if(r<0)throw new Ki(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ki(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ki(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=cr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(cr.fromNumber(r)));return i.compare(S4)===1&&(i=new cr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=yR(e),[r,i]=vR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=yR(e),[r,i]=vR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ki=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(X.min(),i,new Me(ie),pr(),de())}},Gc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var Ss=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Xh=class{constructor(e,t){this.targetId=e,this.De=t}},ef=class{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},tf=class{constructor(){this.ve=0,this.Ce=_R(),this.Fe=dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=de(),t=de(),r=de();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Gc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=_R()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},j_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=pr(),this.je=Lh(),this.Je=Lh(),this.He=new Me(ie)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(N_(o))if(r===0){let s=new H(o.path);this.Xe(t,s,fn.newNoDocument(s,X.min()))}else ye(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}mR?.ct(function(h,p,m,y,C){var N,R,V,G,K,we;let ht={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ve=p.unchangedNames;return ve&&(ht.bloomFilter={applied:C===0,hashCount:(N=ve?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(V=(R=ve?.bits)===null||R===void 0?void 0:R.bitmap)===null||V===void 0?void 0:V.length)!==null&&G!==void 0?G:0,padding:(we=(K=ve?.bits)===null||K===void 0?void 0:K.padding)!==null&&we!==void 0?we:0,mightContain:D=>{var _;return(_=y?.mightContain(D))!==null&&_!==void 0&&_}}),ht}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=hr(r).toUint8Array()}catch(u){if(u instanceof Wh)return Jr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new L_(s,i,o)}catch(u){return Jr(u instanceof Ki?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&N_(a.target)){let u=new H(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,fn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=de();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Jh(e,t,this.He,this.ze,r);return this.ze=pr(),this.je=Lh(),this.Je=Lh(),this.He=new Me(ie),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new tf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ye(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ye(ie),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new tf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Lh(){return new Me(H.comparator)}function _R(){return new Me(H.comparator)}var A4={asc:"ASCENDING",desc:"DESCENDING"},R4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N4={and:"AND",or:"OR"},U_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function B_(n,e){return n.useProto3Json||Df(e)?e:{value:e}}function nf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M4(n,e){return nf(n,e.toTimestamp())}function Vn(n){return ye(!!n,49232),X.fromTimestamp(function(t){let r=dr(t);return new $e(r.seconds,r.nanos)}(n))}function ew(n,e){return $_(n,e).canonicalString()}function $_(n,e){let t=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function NN(n){let e=Se.fromString(n);return ye(ON(e),10190,{key:e.toString()}),e}function H_(n,e){return ew(n.databaseId,e.path)}function o_(n,e){let t=NN(e);if(t.get(1)!==n.databaseId.projectId)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(PN(t))}function MN(n,e){return ew(n.databaseId,e)}function P4(n){let e=NN(n);return e.length===4?Se.emptyPath():PN(e)}function q_(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PN(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function IR(n,e,t){return{name:H_(n,e),fields:t.value.mapValue.fields}}function x4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ye(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?P.UNKNOWN:AN(l.code);return new j(h,l.message||"")}(s);t=new ef(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=o_(n,r.document.name),o=Vn(r.document.updateTime),s=r.document.createTime?Vn(r.document.createTime):X.min(),a=new Vt({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ss(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=o_(n,r.document),o=r.readTime?Vn(r.readTime):X.min(),s=fn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ss([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=o_(n,r.document),o=r.removedTargetIds||[];t=new Ss([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new V_(i,o),a=r.targetId;t=new Xh(a,s)}}return t}function k4(n,e){let t;if(e instanceof no)t={update:IR(n,e.key,e.value)};else if(e instanceof Zh)t={delete:H_(n,e.key)};else if(e instanceof Un)t={update:IR(n,e.key,e.data),updateMask:H4(e.fieldMask)};else{if(!(e instanceof x_))return q(16599,{Rt:e.type});t={verify:H_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Vs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof eo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof to)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ls)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:M4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)}(n,e.precondition)),t}function O4(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Vn(i.updateTime):Vn(o);return s.isEqual(X.min())&&(s=Vn(o)),new P_(s,i.transformResults||[])}(t,e))):[]}function F4(n,e){return{documents:[MN(n,e.path)]}}function V4(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MN(n,i);let o=function(l){if(l.length!==0)return kN(jn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:bs(m.field),direction:U4(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=B_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function L4(n){let e=P4(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ye(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=xN(p);return m instanceof jn&&hN(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(C){return new ks(Ts(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Df(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new xs(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new xs(y,m)}(t.endAt)),l4(e,i,s,o,a,"F",u,l)}function j4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ts(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ts(t.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ts(t.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ts(t.unaryFilter.field);return ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(n):n.fieldFilter!==void 0?function(t){return ze.create(Ts(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return jn.create(t.compositeFilter.filters.map(r=>xN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(t.compositeFilter.op))}(n):q(30097,{filter:n})}function U4(n){return A4[n]}function B4(n){return R4[n]}function $4(n){return N4[n]}function bs(n){return{fieldPath:n.canonicalString()}}function Ts(n){return Lt.fromServerFormat(n.fieldPath)}function kN(n){return n instanceof ze?function(t){if(t.op==="=="){if(aR(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NAN"}};if(sR(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aR(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NOT_NAN"}};if(sR(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(t.field),op:B4(t.op),value:t.value}}}(n):n instanceof jn?function(t){let r=t.getFilters().map(i=>kN(i));return r.length===1?r[0]:{compositeFilter:{op:$4(t.op),filters:r}}}(n):q(54877,{filter:n})}function H4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ON(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wc=class n{constructor(e,t,r,i,o=X.min(),s=X.min(),a=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var z_=class{constructor(e){this.gt=e}};function q4(n){let e=L4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?M_(e,e.limit,"L"):e}var rf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Hc(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=dr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(hr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?uN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):cN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ns,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ce(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};rf.Ut=new rf;var G_=class{constructor(){this.Dn=new W_}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Xi.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},W_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(Se.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Se.comparator)).toArray()}};var wJ=new Uint8Array(0);var wR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FN=41943040,Kt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(FN,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);var Kc=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ER="LruGarbageCollector",z4=1048576;function DR([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var K_=class{constructor(e){this.Tr=e,this.buffer=new Ye(DR),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();DR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Q_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(ER,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){zs(t)?F(ER,"Ignoring IndexedDB error during garbage collection: ",t):yield qs(t)}yield this.Rr(3e5)}))}},Y_=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(zI.ue);let r=new K_(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(wR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Es()<=ce.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function G4(n,e){return new Y_(n,e)}var Z_=class{constructor(){this.changes=new fr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var J_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var X_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Uc(r.mutation,i,Qt.empty(),$e.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=Wi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Fc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Wi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=pr(),s=jc(),a=function(){return jc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Un)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Uc(h.mutation,l,h.mutation.getFieldMask(),$e.now())):s.set(l.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new J_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=jc(),i=new Me((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=IN();h.forEach(m=>{if(!o.has(m)){let y=CN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Wi()),a=$c,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:_N(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=Fc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Fc();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Os(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,fn.newInvalidDocument(h)))});let a=Fc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Uc(h.mutation,l,Qt.empty(),$e.now()),Sf(t,l)&&(a=a.insert(u,l))}),a})}};var eI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:q4(i.bundledQuery),readTime:Vn(i.readTime)}}(t)),x.resolve()}};var tI=class{constructor(){this.overlays=new Me(H.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Wi();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Wi(),o=t.length+1,s=new H(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Wi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Wi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let o=this.kr.get(t);o===void 0&&(o=de(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var nI=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Qc=class{constructor(){this.qr=new Ye(Ue.Qr),this.$r=new Ye(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Se([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Se([])),r=new Ue(t,e),i=new Ue(t,e+1),o=de();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var rI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ye(Ue.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new k_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?GI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(ie);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new H(o),0),a=new Ye(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iI=class{constructor(e){this.ni=e,this.docs=function(){return new Me(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=pr(),s=t.path,a=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||zH(qH(h),r)<=0||(i.has(h.key)||Sf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oI(this)}getSize(e){return x.resolve(this.size)}},oI=class extends Z_{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var sI=class{constructor(e){this.persistence=e,this.ii=new fr(t=>ZI(t),JI),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new Qc,this.targetCount=0,this._i=Kc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var of=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new zI(0),this.ci=!1,this.ci=!0,this.li=new nI,this.referenceDelegate=e(this),this.hi=new sI(this),this.indexManager=new G_,this.remoteDocumentCache=function(i){return new iI(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new z_(t),this.Ti=new eI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new rI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new aI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},aI=class extends y_{constructor(e){super(),this.currentSequenceNumber=e}},cI=class n{constructor(e){this.persistence=e,this.Ai=new Qc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},sf=class n{constructor(e,t){this.persistence=e,this.gi=new fr(r=>QH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=G4(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Uh(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var uI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var lI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return a0()?8:WH(Ke())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new lI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Es()<=ce.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ds(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Es()<=ce.DEBUG&&F("QueryEngine","Query:",Ds(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Es()<=ce.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ds(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):x.resolve())}ps(e,t){if(dR(t))return x.resolve(null);let r=Fn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=M_(t,null,"F"),r=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,M_(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return dR(t)||i.isEqual(X.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Es()<=ce.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ds(t)),this.vs(e,s,t,HH(i,$c)).next(a=>a))})}bs(e,t){let r=new Ye(yN(e));return t.forEach((i,o)=>{Sf(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Es()<=ce.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ds(t)),this.gs.getDocumentsMatchingQuery(e,t,Xi.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tw="LocalStore",W4=3e8,hI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Me(ie),this.Ms=new fr(o=>ZI(o),JI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function K4(n,e,t,r){return new hI(n,e,t,r)}function VN(n,e){return v(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Q4(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ye(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LN(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Y4(n,e){let t=Q(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(dt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,V){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=W4?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=pr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Z4(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(X.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function Z4(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=pr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(tw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function J4(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=GI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X4(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Wc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function fI(n,e,t){return v(this,null,function*(){let r=Q(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zs(s))throw s;F(tw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function bR(n,e,t){let r=Q(n),i=X.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Q(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:X.min(),t?o:de())).next(a=>(eq(r,f4(e),a),{documents:a,qs:o})))}function eq(n,e,t){let r=n.xs.get(e)||X.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var af=class{constructor(){this.activeTargetIds=_4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pI=class{constructor(){this.Fo=new af,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new af,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gI=class{xo(e){}shutdown(){}};var TR="ConnectivityMonitor",cf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(TR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(TR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jh=null;function mI(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}var s_="RestConnection",tq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},yI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Kh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=mI(),a=this.Go(e,t.toUriEncodedString());F(s_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=jr(l);return this.jo(e,a,u,r,h).then(p=>(F(s_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Jr(s_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=tq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var vI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var lt="WebChannelConnection",_I=class extends yI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=mI();return new Promise((a,u)=>{let l=new e_;l.setWithCredentials(!0),l.listenOnce(t_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Oc.NO_ERROR:let p=l.getResponseJson();F(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Oc.TIMEOUT:F(lt,`RPC '${e}' ${s} timed out`),u(new j(P.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:let m=l.getStatus();if(F(lt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(V){let G=V.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(G)>=0?G:P.UNKNOWN}(C.status);u(new j(N,C.message))}else u(new j(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(P.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(lt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(lt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=mI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i_(),a=r_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new vI({Ho:R=>{y?F(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(lt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,V,G)=>{R.listen(V,K=>{try{G(K)}catch(we){setTimeout(()=>{throw we},0)}})};return N(p,ws.EventType.OPEN,()=>{y||(F(lt,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),N(p,ws.EventType.CLOSE,()=>{y||(y=!0,F(lt,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),N(p,ws.EventType.ERROR,R=>{y||(y=!0,Jr(lt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),C.__(new j(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,ws.EventType.MESSAGE,R=>{var V;if(!y){let G=R.data[0];ye(!!G,16349);let K=G,we=K?.error||((V=K[0])===null||V===void 0?void 0:V.error);if(we){F(lt,`RPC '${e}' stream ${i} received error:`,we);let ht=we.status,ve=function(w){let E=je[w];if(E!==void 0)return AN(E)}(ht),D=we.message;ve===void 0&&(ve=P.INTERNAL,D="Unknown error status: "+ht+" with message "+we.message),y=!0,C.__(new j(ve,D)),p.close()}else F(lt,`RPC '${e}' stream ${i} received:`,G),C.a_(G)}}),N(a,n_.STAT_EVENT,R=>{R.stat===Fh.PROXY?F(lt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Fh.NOPROXY&&F(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function a_(){return typeof document<"u"?document:null}function Af(n){return new U_(n,!0)}var uf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var CR="PersistentStream",lf=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new uf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new j(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(CR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(F(CR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},II=class extends lf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=x4(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Vn(s.readTime):X.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=q_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=N_(u)?{documents:F4(o,u)}:{query:V4(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=RN(o,s.resumeToken);let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=nf(o,s.snapshotVersion.toTimestamp());let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=j4(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=q_(this.serializer),t.removeTarget=e,this.k_(t)}},wI=class extends lf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=O4(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=q_(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>k4(this.serializer,r))};this.k_(t)}};var EI=class{},DI=class extends EI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,$_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,$_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},bI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(lr(t),this._a=!1):F("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ro="RemoteStore",TI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){io(this)&&(F(ro,"Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=Q(u);l.Ia.add(4),yield nu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Rf(l)})}(this))}))}),this.Aa=new bI(r,i)}};function Rf(n){return v(this,null,function*(){if(io(n))for(let e of n.da)yield e(!0)})}function nu(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function jN(n,e){let t=Q(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ow(t)?iw(t):Gs(t).x_()&&rw(t,e))}function nw(n,e){let t=Q(n),r=Gs(t);t.Ta.delete(e),r.x_()&&UN(t,e),t.Ta.size===0&&(r.x_()?r.B_():io(t)&&t.Aa.set("Unknown"))}function rw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gs(n).H_(e)}function UN(n,e){n.Ra.$e(e),Gs(n).Y_(e)}function iw(n){n.Ra=new j_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Gs(n).start(),n.Aa.aa()}function ow(n){return io(n)&&!Gs(n).M_()&&n.Ta.size>0}function io(n){return Q(n).Ia.size===0}function BN(n){n.Ra=void 0}function nq(n){return v(this,null,function*(){n.Aa.set("Online")})}function rq(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{rw(n,e)})})}function iq(n,e){return v(this,null,function*(){BN(n),ow(n)?(n.Aa.la(e),iw(n)):n.Aa.set("Unknown")})}function oq(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof ef&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){F(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield df(n,r)}else if(e instanceof Ss?n.Ra.Ye(e):e instanceof Xh?n.Ra.it(e):n.Ra.et(e),!t.isEqual(X.min()))try{let r=yield LN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),UN(o,u);let p=new Wc(h.target,u,l,h.sequenceNumber);rw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){F(ro,"Failed to raise snapshot:",r),yield df(n,r)}})}function df(n,e,t){return v(this,null,function*(){if(!zs(e))throw e;n.Ia.add(1),yield nu(n),n.Aa.set("Offline"),t||(t=()=>LN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){F(ro,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Rf(n)}))})}function $N(n,e){return e().catch(t=>df(n,t,e))}function Nf(n){return v(this,null,function*(){let e=Q(n),t=ei(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:GI;for(;sq(e);)try{let i=yield J4(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,aq(e,i)}catch(i){yield df(e,i)}HN(e)&&qN(e)})}function sq(n){return io(n)&&n.Pa.length<10}function aq(n,e){n.Pa.push(e);let t=ei(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function HN(n){return io(n)&&!ei(n).M_()&&n.Pa.length>0}function qN(n){ei(n).start()}function cq(n){return v(this,null,function*(){ei(n).na()})}function uq(n){return v(this,null,function*(){let e=ei(n);for(let t of n.Pa)e.X_(t.mutations)})}function lq(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=O_.from(r,e,t);yield $N(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Nf(n)})}function dq(n,e){return v(this,null,function*(){e&&ei(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return C4(s)&&s!==P.ABORTED}(i.code)){let o=r.Pa.shift();ei(r).N_(),yield $N(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Nf(r)}})}(n,e)),HN(n)&&qN(n)})}function SR(n,e){return v(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),F(ro,"RemoteStore received new credentials");let r=io(t);t.Ia.add(3),yield nu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Rf(t)})}function hq(n,e){return v(this,null,function*(){let t=Q(n);e?(t.Ia.delete(2),yield Rf(t)):e||(t.Ia.add(2),yield nu(t),t.Aa.set("Unknown"))})}function Gs(n){return n.Va||(n.Va=function(t,r,i){let o=Q(t);return o.ia(),new II(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:nq.bind(null,n),e_:rq.bind(null,n),n_:iq.bind(null,n),J_:oq.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),ow(n)?iw(n):n.Aa.set("Unknown")):(yield n.Va.stop(),BN(n))}))),n.Va}function ei(n){return n.ma||(n.ma=function(t,r,i){let o=Q(t);return o.ia(),new wI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:cq.bind(null,n),n_:dq.bind(null,n),ea:uq.bind(null,n),ta:lq.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield Nf(n)):(yield n.ma.stop(),n.Pa.length>0&&(F(ro,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var CI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sw(n,e){if(lr("AsyncQueue",`${e}: ${n}`),zs(n))return new j(P.UNAVAILABLE,`${e}: ${n}`);throw n}var hf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Fc(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ff=class{constructor(){this.fa=new Me(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Us=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,hf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var SI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},AI=class{constructor(){this.queries=AR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=AR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new j(P.ABORTED,"Firestore shutting down"))}};function AR(){return new fr(n=>mN(n),Cf)}function aw(n,e){return v(this,null,function*(){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new SI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=sw(s,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&uw(t)})}function cw(n,e){return v(this,null,function*(){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function fq(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&uw(t)}function pq(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function uw(n){n.Da.forEach(e=>{e.next()})}var RI,RR;(RR=RI||(RI={})).Fa="default",RR.Cache="cache";var Yc=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Us(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==RI.Cache}};var pf=class{constructor(e){this.key=e}},gf=class{constructor(e){this.key=e}},NI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=de(),this.mutatedKeys=de(),this.Xa=yN(e),this.eu=new hf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new ff,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Sf(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Us(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ff,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=de(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new gf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new pf(r))}),t}uu(e){this.Ha=e.qs,this.Za=de();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Us.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},lw="SyncEngine",MI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},PI=class{constructor(e){this.key=e,this.lu=!1}},xI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new fr(a=>mN(a),Cf),this.Tu=new Map,this.Iu=new Set,this.du=new Me(H.comparator),this.Eu=new Map,this.Au=new Qc,this.Ru={},this.Vu=new Map,this.mu=Kc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function gq(n,e,t=!0){return v(this,null,function*(){let r=YN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield zN(r,e,t,!0),i})}function mq(n,e){return v(this,null,function*(){let t=YN(n);yield zN(t,e,!0,!1)})}function zN(n,e,t,r){return v(this,null,function*(){let i=yield X4(n.localStore,Fn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield yq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&jN(n.remoteStore,i),a})}function yq(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,m,y)=>function(N,R,V,G){return v(this,null,function*(){let K=R.view.nu(V);K.Ds&&(K=yield bR(N.localStore,R.query,!1).then(({documents:D})=>R.view.nu(D,K)));let we=G&&G.targetChanges.get(R.targetId),ht=G&&G.targetMismatches.get(R.targetId)!=null,ve=R.view.applyChanges(K,N.isPrimaryClient,we,ht);return MR(N,R.targetId,ve._u),ve.snapshot})}(n,p,m,y);let o=yield bR(n.localStore,e,!0),s=new NI(e,o.qs),a=s.nu(o.documents),u=Gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);MR(n,t,l._u);let h=new MI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function vq(n,e,t){return v(this,null,function*(){let r=Q(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Cf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nw(r.remoteStore,i.targetId),kI(r,i.targetId)}).catch(qs))):(kI(r,i.targetId),yield fI(r.localStore,i.targetId,!0))})}function _q(n,e){return v(this,null,function*(){let t=Q(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nw(t.remoteStore,r.targetId))})}function Iq(n,e,t){return v(this,null,function*(){let r=Sq(n);try{let i=yield function(s,a){let u=Q(s),l=$e.now(),h=a.reduce((y,C)=>y.add(C.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=pr(),N=de();return u.Os.getEntries(y,h).next(R=>{C=R,C.forEach((V,G)=>{G.isValidDocument()||(N=N.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let V=[];for(let G of a){let K=T4(G,p.get(G.key).overlayedDocument);K!=null&&V.push(new Un(G.key,K,lN(K.value.mapValue),Wr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(R=>{m=R;let V=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,V)})}).then(()=>({batchId:m.batchId,changes:_N(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Me(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield ru(r,i.changes),yield Nf(r.remoteStore)}catch(i){let o=sw(i,"Failed to persist write");t.reject(o)}})}function GN(n,e){return v(this,null,function*(){let t=Q(n);try{let r=yield Y4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ye(s.lu,14607):i.removedDocuments.size>0&&(ye(s.lu,42227),s.lu=!1))}),yield ru(t,r,e)}catch(r){yield qs(r)}})}function NR(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Q(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&uw(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wq(n,e,t){return v(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me(H.comparator);s=s.insert(o,fn.newNoDocument(o,X.min()));let a=de().add(o),u=new Jh(X.min(),new Map,new Me(ie),s,a);yield GN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),dw(r)}else yield fI(r.localStore,e,!1).then(()=>kI(r,e,t)).catch(qs)})}function Eq(n,e){return v(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield Q4(t.localStore,e);KN(t,r,null),WN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ru(t,i)}catch(i){yield qs(i)}})}function Dq(n,e,t){return v(this,null,function*(){let r=Q(n);try{let i=yield function(s,a){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ye(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);KN(r,e,t),WN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ru(r,i)}catch(i){yield qs(i)}})}function WN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function KN(n,e,t){let r=Q(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function kI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||QN(n,r)})}function QN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(nw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),dw(n))}function MR(n,e,t){for(let r of t)r instanceof pf?(n.Au.addReference(r.key,e),bq(n,r)):r instanceof gf?(F(lw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||QN(n,r.key)):q(19791,{yu:r})}function bq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(F(lw,"New document in limbo: "+t),n.Iu.add(r),dw(n))}function dw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Se.fromString(e)),r=n.mu.next();n.Eu.set(r,new PI(t)),n.du=n.du.insert(t,r),jN(n.remoteStore,new Wc(Fn(Tf(t.path)),r,"TargetPurposeLimboResolution",zI.ue))}}function ru(n,e,t){return v(this,null,function*(){let r=Q(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=uI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(u,l){return v(this,null,function*(){let h=Q(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!zs(p))throw p;F(tw,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,N)}}})}(r.localStore,o))})}function Tq(n,e){return v(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){F(lw,"User change. New user:",e.toKey());let r=yield VN(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new j(P.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ru(t,r.Bs)}})}function Cq(n,e){let t=Q(n),r=t.Eu.get(e);if(r&&r.lu)return de().add(r.key);{let i=de(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function YN(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wq.bind(null,e),e.hu.J_=fq.bind(null,e.eventManager),e.hu.pu=pq.bind(null,e.eventManager),e}function Sq(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dq.bind(null,e),e}var ZN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Af(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return K4(this.persistence,new dI,t.initialUser,this.serializer)}Du(t){return new of(cI.Vi,this.serializer)}bu(t){return new pI}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),OI=class extends ZN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ye(this.persistence.referenceDelegate instanceof sf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Q_(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new of(r=>sf.Vi(r,t),this.serializer)}};var Aq=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>NR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tq.bind(null,this.syncEngine),yield hq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new AI}()}createDatastore(t){let r=Af(t.databaseInfo.databaseId),i=function(s){return new _I(s)}(t.databaseInfo);return function(s,a,u,l){return new DI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new TI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>NR(this.syncEngine,r,0),function(){return cf.C()?new cf:new gI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new xI(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=Q(o);F(ro,"RemoteStore shutting down."),s.Ia.add(5),yield nu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Zc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ti="FirestoreClient",FI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Bc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){F(ti,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=sw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function c_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F(ti,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield VN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Jr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Jr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function PR(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Rq(n);F(ti,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>SR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>SR(e.remoteStore,i)),n._onlineComponents=e})}function Rq(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F(ti,"Using user provided OfflineComponentProvider");try{yield c_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Jr("Error using user provided cache. Falling back to memory cache: "+t),yield c_(n,new ZN)}}else F(ti,"Using default OfflineComponentProvider"),yield c_(n,new OI(void 0));return n._offlineComponents})}function JN(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F(ti,"Using user provided OnlineComponentProvider"),yield PR(n,n._uninitializedComponentsProvider._online)):(F(ti,"Using default OnlineComponentProvider"),yield PR(n,new Aq))),n._onlineComponents})}function Nq(n){return JN(n).then(e=>e.syncEngine)}function mf(n){return v(this,null,function*(){let e=yield JN(n),t=e.eventManager;return t.onListen=gq.bind(null,e.syncEngine),t.onUnlisten=vq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_q.bind(null,e.syncEngine),t})}function Mq(n,e,t={}){let r=new hn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new Zc({next:m=>{h.Ou(),s.enqueueAndForget(()=>cw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new j(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Yc(Tf(a.path),h,{includeMetadataChanges:!0,ka:!0});return aw(o,p)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}function Pq(n,e,t={}){let r=new hn;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,u,l){let h=new Zc({next:m=>{h.Ou(),s.enqueueAndForget(()=>cw(o,p)),m.fromCache&&u.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Yc(a,h,{includeMetadataChanges:!0,ka:!0});return aw(o,p)}(yield mf(n),n.asyncQueue,e,t,r)})),r.promise}function XN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var xR=new Map;var eM="firestore.googleapis.com",kR=!0,yf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eM,this.ssl=kR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:kR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z4)throw new j(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$H("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Bs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u_;switch(r.type){case"firstParty":return new f_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=xR.get(t);r&&(F("ComponentProvider","Removing Datastore"),xR.delete(t),r.terminate())}(this),Promise.resolve()}};function tM(n,e,t,r={}){var i;n=Yt(n,Bs);let o=jr(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(sh(`https://${u}`),ah("Firestore",!0)),s.host!==eM&&s.host!==u&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Mn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Qe.MOCK_USER;else{h=t0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qe(m)}n._authCredentials=new l_(new Hh(h,p))}}var Jc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ze=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(tu(t,n._jsonSchema))return new n(e,r||null,new H(Se.fromString(t.referencePath)))}};Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:Be("string",Ze._jsonSchemaVersion),referencePath:Be("string")};var Kr=class n extends Jc{constructor(e,t,r){super(e,t,Tf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function nM(n,e,...t){if(n=xe(n),UR("collection","path",e),n instanceof Bs){let r=Se.fromString(e,...t);return XA(r),new Kr(n,null,r)}{if(!(n instanceof Ze||n instanceof Kr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return XA(r),new Kr(n.firestore,null,r)}}function rM(n,e,...t){if(n=xe(n),arguments.length===1&&(e=Bc.newId()),UR("doc","path",e),n instanceof Bs){let r=Se.fromString(e,...t);return JA(r),new Ze(n,null,new H(r))}{if(!(n instanceof Ze||n instanceof Kr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return JA(r),new Ze(n.firestore,n instanceof Kr?n.converter:null,new H(r))}}var OR="AsyncQueue",vf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new uf(this,"async_queue_retry"),this.oc=()=>{let r=a_();r&&F(OR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=a_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=a_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new hn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zs(e))throw e;F(OR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,lr("INTERNAL UNHANDLED ERROR: ",FR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=CI.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:FR(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function FR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function VR(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var gr=class extends Bs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vf(e),this._firestoreClient=void 0,yield e}})}};function iM(n,e){let t=typeof n=="object"?n:Bi(),r=typeof n=="string"?n:e||Kh,i=ps(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=e0("firestore");o&&tM(i,...o)}return i}function Mf(n){if(n._terminated)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xq(n),n._firestoreClient}function xq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new v_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new FI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Qr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new j(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Qr._jsonSchemaVersion="firestore/bytes/1.0",Qr._jsonSchema={type:Be("string",Qr._jsonSchemaVersion),bytes:Be("string")};var $s=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xc=class{constructor(e){this._methodName=e}};var Yr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(tu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Yr._jsonSchemaVersion="firestore/geoPoint/1.0",Yr._jsonSchema={type:Be("string",Yr._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};var Zr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new j(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Zr._jsonSchemaVersion="firestore/vectorValue/1.0",Zr._jsonSchema={type:Be("string",Zr._jsonSchemaVersion),vectorValues:Be("object")};var kq=/^__.*__$/,VI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Un(e,this.data,this.fieldMask,t,this.fieldTransforms):new no(e,this.data,t,this.fieldTransforms)}},_f=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Un(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function oM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:n})}}var LI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(oM(this.Ec)&&kq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Af(e)}Dc(e,t,r,i=!1){return new LI({Ec:e,methodName:t,bc:r,path:Lt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sM(n){let e=n._freezeSettings(),t=Af(n._databaseId);return new jI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Oq(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);hw("Data must be an object, but it was:",s,r);let a=aM(r,s),u,l;if(o.merge)u=new Qt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=UI(e,p,t);if(!s.contains(m))throw new j(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);uM(h,m)||h.push(m)}u=new Qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new VI(new Vt(a),u,l)}var If=class n extends Xc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Fq(n,e,t,r){let i=n.Dc(1,e,t);hw("Data must be an object, but it was:",i,r);let o=[],s=Vt.empty();ni(r,(u,l)=>{let h=fw(e,u,t);l=xe(l);let p=i.gc(h);if(l instanceof If)o.push(h);else{let m=Pf(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Qt(o);return new _f(s,a,i.fieldTransforms)}function Vq(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[UI(e,r,t)],u=[i];if(o.length%2!=0)throw new j(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(UI(e,o[m])),u.push(o[m+1]);let l=[],h=Vt.empty();for(let m=a.length-1;m>=0;--m)if(!uM(l,a[m])){let y=a[m],C=u[m];C=xe(C);let N=s.gc(y);if(C instanceof If)l.push(y);else{let R=Pf(C,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Qt(l);return new _f(h,p,s.fieldTransforms)}function Pf(n,e){if(cM(n=xe(n)))return hw("Unsupported field value:",e,n),aM(n,e);if(n instanceof Xc)return function(r,i){if(!oM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Pf(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=$e.fromDate(r);return{timestampValue:nf(i.serializer,o)}}if(r instanceof $e){let o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(i.serializer,o)}}if(r instanceof Yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:RN(i.serializer,r._byteString)};if(r instanceof Ze){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ew(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zr)return function(s,a){return{mapValue:{fields:{[KI]:{stringValue:QI},[Ns]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return XI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${qI(r)}`)}(n,e)}function aM(n,e){let t={};return nN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(n,(r,i)=>{let o=Pf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function cM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $e||n instanceof Yr||n instanceof Qr||n instanceof Ze||n instanceof Xc||n instanceof Zr)}function hw(n,e,t){if(!cM(t)||!BR(t)){let r=qI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function UI(n,e,t){if((e=xe(e))instanceof $s)return e._internalPath;if(typeof e=="string")return fw(n,e);throw wf("Field path arguments must be of type string or ",n,!1,void 0,t)}var Lq=new RegExp("[~\\*/\\[\\]]");function fw(n,e,t){if(e.search(Lq)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $s(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new j(P.INVALID_ARGUMENT,a+n+u)}function uM(n,e){return n.some(t=>t.isEqual(e))}var Ef=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},BI=class extends Ef{data(){return super.data()}};function lM(n,e){return typeof e=="string"?fw(n,e):e instanceof $s?e._internalPath:e._delegate._internalPath}function dM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $I=class{convertValue(e,t="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ni(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ns].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Zr(o)}convertGeoPoint(e){return new Yr(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=bf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){let t=dr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);ye(ON(r),9688,{name:e});let i=new Qh(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function jq(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Qi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yi=class n extends Ef{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new As(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yi._jsonSchema={type:Be("string",Yi._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};var As=class extends Yi{data(e={}){return super.data(e)}},Zi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new As(this._firestore,this._userDataWriter,r.key,r,new Qi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Uq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Uq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}function hM(n){n=Yt(n,Ze);let e=Yt(n.firestore,gr);return Mq(Mf(e),n._key).then(t=>yM(e,n,t))}Zi._jsonSchemaVersion="firestore/querySnapshot/1.0",Zi._jsonSchema={type:Be("string",Zi._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};var eu=class extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}};function fM(n){n=Yt(n,Jc);let e=Yt(n.firestore,gr),t=Mf(e),r=new eu(e);return dM(n._query),Pq(t,n._query).then(i=>new Zi(e,r,n,i))}function pM(n,e,t){n=Yt(n,Ze);let r=Yt(n.firestore,gr),i=jq(n.converter,e,t);return mM(r,[Oq(sM(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Wr.none())])}function gM(n,e,t,...r){n=Yt(n,Ze);let i=Yt(n.firestore,gr),o=sM(i),s;return s=typeof(e=xe(e))=="string"||e instanceof $s?Vq(o,"updateDoc",n._key,e,t,r):Fq(o,"updateDoc",n._key,e),mM(i,[s.toMutation(n._key,Wr.exists(!0))])}function pw(n,...e){var t,r,i;n=xe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||VR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(VR(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ze)l=Yt(n.firestore,gr),h=Tf(n._key.path),u={next:p=>{e[s]&&e[s](yM(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Yt(n,Jc);l=Yt(p.firestore,gr),h=p._query;let m=new eu(l);u={next:y=>{e[s]&&e[s](new Zi(l,m,p,y))},error:e[s+1],complete:e[s+2]},dM(n._query)}return function(m,y,C,N){let R=new Zc(N),V=new Yc(y,R,C);return m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return aw(yield mf(m),V)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return cw(yield mf(m),V)}))}}(Mf(l),h,a,u)}function mM(n,e){return function(r,i){let o=new hn;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Iq(yield Nq(r),i,o)})),o.promise}(Mf(n),e)}function yM(n,e,t){let r=t.docs.get(e._key),i=new eu(n);return new Yi(n,i,e._key,r,new Qi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Hs=i})(Br),un(new It("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new gr(new d_(r.getProvider("auth-internal")),new p_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qh(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(KA,QA,e),Ne(KA,QA,"esm2017")})();var xf=function(){return xf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xf.apply(this,arguments)};var Hq={includeMetadataChanges:!1};function vM(n,e){return e===void 0&&(e=Hq),new ne(function(t){var r=pw(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function _M(n){return vM(n,{includeMetadataChanges:!0})}function IM(n,e){return e===void 0&&(e={}),_M(n).pipe(Z(function(t){return wM(t,e)}))}function wM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:xf(xf({},r),(t={},t[e.idField]=n.id,t))}var oo=class{constructor(e){return e}},EM="firestore",gw=class{constructor(){return ms(EM)}};var mw=new L("angularfire2.firestore-instances");function qq(n,e){let t=wc(EM,n,e);return t&&new oo(t)}function zq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var Gq={provide:gw,deps:[[new Mt,mw]]},Wq={provide:oo,useFactory:qq,deps:[[new Mt,mw],er]};function DM(n,...e){return Ne("angularfire",$r.full,"fst"),En([Wq,Gq,{provide:mw,useFactory:zq(n),multi:!0,deps:[ge,Le,Hr,Hi,[new Mt,kc],[new Mt,ys],...e]}])}var bM=ke(IM,!0);var TM=ke(nM,!0,2);var kf=ke(rM,!0,2);var CM=ke(hM,!0);var SM=ke(fM,!0);var AM=ke(iM,!0);var RM=ke(pM,!0,2);var NM=ke(gM,!0,2);function Kq(n,e){if(n&1&&(qt(0,"p",11),Mr(1),Pt()),n&2){let t=ZT();Ni(),Pm(t.error)}}var Of=class n{auth=M(Ws);router=M(At);email="";password="";error="";loading=!1;loginWithEmail(){return v(this,null,function*(){try{this.loading=!0,this.error="",yield this.auth.emailSignIn(this.email,this.password),this.afterLogin()}catch(e){this.error=e.message||"Login failed"}finally{this.loading=!1}})}loginWithGoogle(){return v(this,null,function*(){try{this.loading=!0,this.error="",yield this.auth.googleSignIn(),this.afterLogin()}catch(e){this.error=e.message||"Login failed"}finally{this.loading=!1}})}afterLogin(){this.auth.user$.pipe(mt(1)).subscribe(e=>{if(e){if(!e.emailVerified){this.error="Please verify your email before logging in.",this.auth.sendemailverification(e),this.auth.logout();return}this.auth.isAdmin$.pipe(mt(1)).subscribe(t=>{this.router.navigate([t?"/admin":"/user"])})}})}closeLogin(){this.router.navigate([""])}signUp(){return v(this,null,function*(){if(!this.email||!this.password){this.error="please provide email and password to sign up";return}try{this.loading=!0;let e=yield this.auth.emailSignUp(this.email,this.password);yield this.auth.sendemailverification(e.user),yield this.auth.ensureuserdoc({uid:e.user.uid,email:e.user.email}),this.error="Sign up successful! Please verify your email before logging in."}catch(e){this.error=e.message||"Sign up failed"}finally{this.loading=!1,this.auth.logout()}})}forgotPassword(){return v(this,null,function*(){if(!this.email){this.error="Enter your email to reset password.";return}try{this.loading=!0,yield this.auth.resetPassword(this.email),this.error="Password reset link sent to your email."}catch(e){this.error=e.message||"Password reset failed"}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=rd({type:n,selectors:[["app-login"]],decls:17,vars:5,consts:[[1,"relative","container","mx-auto","px-4","py-10","max-w-md","bg-white","rounded-lg","shadow"],[1,"absolute","top-4","right-4","text-red-600","hover:text-red-800","text-2xl","font-bold",3,"click"],[1,"text-3xl","font-bold","mb-6","text-center"],[1,"space-y-3"],["placeholder","Email",1,"w-full","border","rounded-lg","p-3",3,"ngModelChange","ngModel"],["placeholder","Password","type","password",1,"w-full","border","rounded-lg","p-3",3,"ngModelChange","ngModel"],[1,"w-full","px-4","py-2","rounded-lg","bg-blue-600","text-white",3,"click","disabled"],["type","button",1,"w-full","bg-green-600","hover:bg-green-700","text-white","py-3","rounded-lg","font-medium",3,"click"],["type","button",1,"w-full","text-blue-600","hover:underline","text-sm","mt-2",3,"click"],[1,"w-full","px-4","py-2","rounded-lg","bg-gray-900","text-white",3,"click","disabled"],["class","text-red-600",4,"ngIf"],[1,"text-red-600"]],template:function(t,r){t&1&&(qt(0,"section",0)(1,"button",1),xt("click",function(){return r.closeLogin()}),Mr(2," \u2715 "),Pt(),qt(3,"h2",2),Mr(4,"Login"),Pt(),qt(5,"div",3)(6,"input",4),ad("ngModelChange",function(o){return xm(r.email,o)||(r.email=o),o}),Pt(),qt(7,"input",5),ad("ngModelChange",function(o){return xm(r.password,o)||(r.password=o),o}),Pt(),qt(8,"button",6),xt("click",function(){return r.loginWithEmail()}),Mr(9," Login with Email "),Pt(),qt(10,"button",7),xt("click",function(){return r.signUp()}),Mr(11," Sign Up "),Pt(),qt(12,"button",8),xt("click",function(){return r.forgotPassword()}),Mr(13," Forgot Password? "),Pt(),qt(14,"button",9),xt("click",function(){return r.loginWithGoogle()}),Mr(15," Continue with Google "),Pt(),Sm(16,Kq,2,1,"p",10),Pt()()),t&2&&(Ni(6),sd("ngModel",r.email),Ni(),sd("ngModel",r.password),Ni(),Va("disabled",r.loading),Ni(6),Va("disabled",r.loading),Ni(2),Va("ngIf",r.error))},dependencies:[fd,$m,KS,eh,$S,ky,QS],encapsulation:2})};var yw=(n,e)=>{let t=M(Ws),r=M(At);return t.user$.pipe(mt(1),Z(i=>i?!0:r.createUrlTree(["/login"])))};var MM=[{path:"login",component:Of},{path:"admin",loadComponent:()=>import("./chunk-PBCRTI3J.js").then(n=>n.AdminComponent),canActivate:[yw]},{path:"user",loadComponent:()=>import("./chunk-7GBBAWCC.js").then(n=>n.UserComponent),canActivate:[yw]},{path:"**",redirectTo:"",pathMatch:"full"}];var Ff={firebase:{apiKey:"AIzaSyCY_0FkBXY7W2f36ApT4LHb0NyaTtNGA6E",authDomain:"gymwebsite-eb91c.firebaseapp.com",projectId:"gymwebsite-eb91c",storageBucket:"gymwebsite-eb91c.appspot.com",messagingSenderId:"89772950873",appId:"1:89772950873:web:54210f7b2f766f8c007848",measurementId:"G-T363YK2TKE"},adminEmails:["jibingeorge564@gmail.com"]},pee={providers:[rC({eventCoalescing:!0}),Cy(MM),S0(()=>A0(Ff.firebase)),VA(()=>UA()),DM(()=>AM())]};var Ws=class n{constructor(){}auth=M(Gi);db=M(oo);user$=LA(this.auth);loggedIn$=this.user$.pipe(Z(e=>!!e&&e.emailVerified),Gu());firebaseintializer(){return v(this,null,function*(){this.user$.subscribe(e=>v(this,null,function*(){e&&!Ff.adminEmails.includes(e.email||"")&&(console.log("ensureuserdoc called for user:",e.uid),yield this.ensureuserdoc({uid:e.uid,email:e.email}))}))})}ensureuserdoc(e){return v(this,null,function*(){let t=kf(this.db,"users",e.uid);(yield CM(t)).exists()||(yield RM(t,{uid:e.uid,email:e.email,plan:"free",trainer:"none",joinedOn:new Date}))})}getAllUsers(){return v(this,null,function*(){let e=TM(this.db,"users");return(yield SM(e)).docs.map(r=>k({id:r.id},r.data()))})}updateUserData(e,t){return v(this,null,function*(){let r=kf(this.db,"users",e);yield NM(r,t)})}isAdmin$=this.user$.pipe(Z(e=>!!e&&Ff.adminEmails.includes(e.email||"")));emailSignIn(e,t){return HA(this.auth,e,t)}emailSignUp(e,t){return jA(this.auth,e,t)}resetPassword(e){return $A(this.auth,e)}googleSignIn(){return qA(this.auth,new Uv)}logout(){return zA(this.auth)}sendemailverification(e=null){return e?BA(e):null}getuserDoc(e){let t=kf(this.db,"users",e);return bM(t,{idField:"uid"})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};export{v as a,ne as b,Oe as c,Z as d,ma as e,Do as f,jP as g,mt as h,$P as i,Qu as j,wp as k,B as l,wn as m,M as n,F8 as o,V8 as p,ge as q,Ar as r,cm as s,Ni as t,le as u,rd as v,Tn as w,Sm as x,Va as y,qt as z,Pt as A,Mm as B,qF as C,zF as D,W8 as E,xt as F,ZT as G,K8 as H,Mr as I,Pm as J,JT as K,sd as L,xm as M,ad as N,Q8 as O,Y8 as P,Z8 as Q,We as R,fC as S,$m as T,AV as U,fd as V,RV as W,HV as X,yy as Y,At as Z,fS as _,T2 as $,eh as aa,$S as ba,ky as ca,zS as da,kQ as ea,OQ as fa,KS as ga,Ws as ha,pee as ia};
